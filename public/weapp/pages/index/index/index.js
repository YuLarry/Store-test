(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index/index","components/diy-live/diy-live"],{"14c3":function(e,t,n){},"19b0":function(e,t,n){"use strict";n.r(t);var i=n("1f26"),o=n("efdd");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("7eb0"),n("f433");var r,u=n("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"53bed43e",null,!1,i["a"],r);t["default"]=c.exports},"1f26":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.liveInfo&&void 0!=e.liveInfo.roomid&&""!=e.liveInfo.banner?e.$util.img(e.liveInfo.banner):null),i=e.liveInfo&&void 0!=e.liveInfo.roomid&&""==e.liveInfo.banner?e.$util.img("upload/uniapp/live_default_banner.png"):null,o=e.liveInfo&&void 0!=e.liveInfo.roomid&&(e.value.isShowAnchorInfo||e.value.isShowLiveGood)&&e.value.isShowAnchorInfo&&""!=e.liveInfo.anchor_img?e.$util.img(e.liveInfo.anchor_img):null,a=e.liveInfo&&void 0!=e.liveInfo.roomid&&(e.value.isShowAnchorInfo||e.value.isShowLiveGood)&&e.value.isShowAnchorInfo&&""==e.liveInfo.anchor_img?e.$util.getDefaultImage():null;e._isMounted||(e.e0=function(t){e.liveInfo.banner=e.$util.img("upload/uniapp/live_default_banner.png")},e.e1=function(t){e.liveInfo.anchor_img=e.$util.getDefaultImage().default_headimg}),e.$mp.data=Object.assign({},{$root:{g0:n,g1:i,g2:o,g3:a}})},a=[]},"28d7":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("a34a")),o=(a(n("0eeb")),a(n("19b0")),n("c025"),a(n("ccd8")));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,o,a,r){try{var u=e[a](r),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(i,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function u(e){r(a,i,o,u,c,"next",e)}function c(e){r(a,i,o,u,c,"throw",e)}u(void 0)}))}}var c=function(){Promise.all([n.e("common/vendor"),n.e("components/ns-show-toast/ns-show-toast")]).then(function(){return resolve(n("691c"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("1fce"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/diy-bottom-nav/diy-bottom-nav").then(function(){return resolve(n("aac7"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/diy-index-page/diy-index-page").then(function(){return resolve(n("7207"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/diy-group/diy-group").then(function(){return resolve(n("177a"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/ns-navbar/ns-navbar").then(function(){return resolve(n("89fe"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/ns-copyright/ns-copyright").then(function(){return resolve(n("1dc2"))}.bind(null,n)).catch(n.oe)},v={components:{uniPopup:s,diyBottomNav:l,nsShowToast:c,nsNavbar:h,diyIndexPage:d,diyGroup:f,nsCopyRight:g},data:function(){return{isnetwork:!1,diyData:{global:{title:"",popWindow:{imageUrl:"",count:-1,link:{}}}},navTitle:"",siteInfo:null,memberId:0,id:0,store:{},storeId:0,latitude:null,longitude:null,showStore:!1,isIphoneX:!1,pageHeight:"0",headerHeight:"0",bottomHeight:"0",topIndexValue:null,copyight:[]}},onPullDownRefresh:function(){this.getDiyInfo()},watch:{storeId:function(){this.$forceUpdate()}},onLoad:function(t){if(e.hideTabBar(),this.isIphoneX=this.$util.uniappIsIPhoneX(),t.source_member&&e.setStorageSync("source_member",t.source_member),t.scene){var n=decodeURIComponent(t.scene);n=n.split("&"),n.length&&n.forEach((function(t){-1!=t.indexOf("source_member")&&e.setStorageSync("source_member",t.split("-")[1])}))}},onShow:function(){var e=this;return u(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.refresh(),e.$store.dispatch("getThemeStyle"),e.getHeight();case 3:case"end":return t.stop()}}),t)})))()},mixins:[o.default],computed:{top:function(){var e=0;return e=this.isIphoneX?180:140,e},bgColor:function(){var e="";return this.diyData&&this.diyData.global&&(e=this.diyData.global.bgColor),e},bgUrl:function(){var e="";return this.diyData&&this.diyData.global&&(e=this.diyData.global.bgUrl),e},bgNav:function(){return this.diyData.global.topNavColor?{background:this.diyData.global.topNavColor}:{background:"#ffffff"}},backgroundUrl:function(){var e=this.bgUrl?"background:url("+this.$util.img(this.bgUrl)+") no-repeat 0 0/100%":"";return e},scrollHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc("+this.pageHeight+"px - "+this.headerHeight+" - "+this.bottomHeight+")":"100vh"},scrollTopHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc("+this.pageHeight+"px - "+this.headerHeight+" - "+this.bottomHeight+" - 80rpx)":"100vh"},textNavColor:function(){return this.diyData.global.textNavColor?this.diyData.global.textNavColor:{background:"#ffffff"}},openBottomNav:function(){var e=!1;return this.diyData&&this.diyData.global&&(e=this.diyData.global.openBottomNav),e},minHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc(100vh - "+this.headerHeight+" - "+this.bottomHeight+" - 80rpx)":"100vh"}},methods:{callback:function(){this.$refs.indexPage&&this.$refs.indexPage.initPageIndex()},refresh:function(){this.store=e.getStorageSync("store")?e.getStorageSync("store"):{},this.store&&(this.storeId=this.store.store_id),this.$langConfig.refresh(),e.getStorageSync("token")&&this.getMemberId(),this.getDefaultImg(),this.getDiyInfo(),this.getCopyight()},getCopyight:function(){var e=this;this.$api.sendRequest({url:"/api/config/copyright",success:function(t){var n=t.data;0==t.code&&n&&(e.copyight=t.data)}})},redirectToJump:function(e){e&&(location.href=e)},getHeight:function(){var t=this;e.getSystemInfo({success:function(e){t.pageHeight=e.screenHeight}}),this.$nextTick((function(){var n=e.createSelectorQuery().in(t);n.select(".page-header").boundingClientRect((function(e){t.headerHeight=e.height+"px"})).exec()})),this.$nextTick((function(){var n=e.createSelectorQuery().in(t);n.select(".page-bottom").boundingClientRect((function(e){t.bottomHeight="55px"})).exec()}))},getDiyInfo:function(){var t=this,n="DIYVIEW_INDEX";this.$api.sendRequest({url:"/api/diyview/info",data:{name:n},success:function(n){if(0!=n.code||!n.data)return t.$refs.loadingCover&&t.$refs.loadingCover.hide(),void(t.diyData={});var i=n.data;if(i.value){t.diyData=JSON.parse(i.value),t.$langConfig.title(t.diyData.global.title),t.navTitle=t.diyData.global.title,t.diyData.global.popWindow&&t.diyData.global.popWindow.imageUrl&&setTimeout((function(){if(1==t.diyData.global.popWindow.count){var n=e.getStorageSync("index_popwindow_count");(t.$refs.uniPopupWindow&&""==n||t.$refs.uniPopupWindow&&1==n)&&(t.$refs.uniPopupWindow.open(),e.setStorageSync("index_popwindow_count",1))}else 0==t.diyData.global.popWindow.count&&(t.$refs.uniPopupWindow.open(),e.setStorageSync("index_popwindow_count",0))}),500);for(var o=0;o<t.diyData.value.length;o++)"TopCategory"==t.diyData.value[o].controller&&(t.topIndexValue=t.diyData.value[o])}e.stopPullDownRefresh(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(e){t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},closePopupWindow:function(){this.$refs.uniPopupWindow.close(),e.setStorageSync("index_popwindow_count",-1)},redirectTo:function(e){this.$util.diyRedirectTo(e)},getDefaultImg:function(){this.$api.sendRequest({url:"/api/config/defaultimg",success:function(t){var n=t.data;0==t.code&&n&&e.setStorageSync("default_img",JSON.stringify(n))}})},getMemberId:function(){var e=this;this.$api.sendRequest({url:"/api/member/id",success:function(t){t.code>=0&&(e.memberId=t.data)}})},onShareTimeline:function(){var e="";return this.memberId&&(e="source_member="+this.memberId),{title:"",query:e,imageUrl:""}}},onShareAppMessage:function(e){var t="";this.siteInfo&&(t=this.siteInfo.site_name);var n="/pages/index/index/index";return this.memberId&&(n+="?source_member="+this.memberId),{title:t,path:n,success:function(e){},fail:function(e){}}},onReady:function(){}};t.default=v}).call(this,n("543d")["default"])},5813:function(e,t,n){"use strict";var i=n("8390"),o=n.n(i);o.a},"592d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={components:{},name:"diy-live",props:{value:{type:Object,default:function(){return{}}}},data:function(){return{liveInfo:{banner:"",anchor_img:""}}},created:function(){this.getLiveInfo()},methods:{getLiveInfo:function(){var e=this;this.$api.sendRequest({url:"/live/api/live/info",success:function(t){0==t.code&&t.data?(e.liveInfo=t.data,e.getLiveStatus()):e.liveInfo=null}})},entryRoom:function(e){wx.navigateTo({url:"plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id=".concat(e)})},getLiveStatus:function(){var e=this,t=requirePlugin("live-player-plugin");t.getLiveStatus({room_id:this.liveInfo.roomid}).then((function(t){var n=t.liveStatus;n&&n!=e.liveInfo.live_status&&e.changeLiveStatus(n)})).catch((function(e){console.log("get live status",e)}));var n=setInterval((function(){t.getLiveStatus({room_id:e.liveInfo.roomid}).then((function(t){var i=t.liveStatus;i&&i!=e.liveInfo.live_status&&e.changeLiveStatus(i),e.$util.inArray(i,[103,104,106,107])&&clearInterval(n)})).catch((function(e){console.log("get live status",e)}))}),6e4)},changeLiveStatus:function(e){var t=this;this.$api.sendRequest({url:"/live/api/live/modifyLiveStatus",data:{room_id:this.liveInfo.roomid,status:e},success:function(e){0==e.code&&t.getLiveInfo()}})}}};t.default=i},"669b":function(e,t,n){},7506:function(e,t,n){},"7eb0":function(e,t,n){"use strict";var i=n("14c3"),o=n.n(i);o.a},8169:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={nsNavbar:function(){return n.e("components/ns-navbar/ns-navbar").then(n.bind(null,"89fe"))},diyIndexPage:function(){return n.e("components/diy-index-page/diy-index-page").then(n.bind(null,"7207"))},diyGroup:function(){return n.e("components/diy-group/diy-group").then(n.bind(null,"177a"))},uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"1fce"))},diyBottomNav:function(){return n.e("components/diy-bottom-nav/diy-bottom-nav").then(n.bind(null,"aac7"))},loadingCover:function(){return n.e("components/loading-cover/loading-cover").then(n.bind(null,"30be"))},nsShowToast:function(){return Promise.all([n.e("common/vendor"),n.e("components/ns-show-toast/ns-show-toast")]).then(n.bind(null,"691c"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.$util.img(e.diyData.global.popWindow.imageUrl));e.$mp.data=Object.assign({},{$root:{g0:n}})},a=[]},8390:function(e,t,n){},"96e9":function(e,t,n){"use strict";var i=n("669b"),o=n.n(i);o.a},aadc:function(e,t,n){"use strict";(function(e){n("5558");i(n("66fd"));var t=i(n("d123"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},d123:function(e,t,n){"use strict";n.r(t);var i=n("8169"),o=n("f04d");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("96e9"),n("5813");var r,u=n("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"0859480c",null,!1,i["a"],r);t["default"]=c.exports},efdd:function(e,t,n){"use strict";n.r(t);var i=n("592d"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},f04d:function(e,t,n){"use strict";n.r(t);var i=n("28d7"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},f433:function(e,t,n){"use strict";var i=n("7506"),o=n.n(i);o.a}},[["aadc","common/runtime","common/vendor"]]]);