(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_promotion/fenxiao/team"],{"0e46":function(e,t,n){"use strict";n.r(t);var i=n("3b3f"),o=n("4f62");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("1c92");var r,u=n("f0c5"),s=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);t["default"]=s.exports},"10b8":function(e,t,n){},"1c92":function(e,t,n){"use strict";var i=n("10b8"),o=n.n(i);o.a},"3b3f":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={nsEmpty:function(){return n.e("components/ns-empty/ns-empty").then(n.bind(null,"2c4c"))},nsLogin:function(){return n.e("components/ns-login/ns-login").then(n.bind(null,"2893"))},loadingCover:function(){return n.e("components/loading-cover/loading-cover").then(n.bind(null,"790a"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.token?e.__map(e.teamList,(function(t,n){var i=e.__get_orig(t),o=0!=e.teamList.length&&t.headimg?e.$util.img(t.headimg):null,a=0==e.teamList.length||t.headimg?null:e.$util.getDefaultImage();return{$orig:i,g0:o,g1:a}})):null);e.$mp.data=Object.assign({},{$root:{l0:n}})},a=[]},"4cd9":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("a34a")),o=a(n("0548"));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,o,a,r){try{var u=e[a](r),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(i,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function u(e){r(a,i,o,u,s,"next",e)}function s(e){r(a,i,o,u,s,"throw",e)}u(void 0)}))}}var s={data:function(){return{category:[{id:0,name:"推荐会员",number:0},{id:1,name:"下级",number:2},{id:2,name:"下下级",number:0}],selectId:0,teamList:[],emptyShow:!1,levelNum:0,token:null}},mixins:[o.default],onShow:function(){var t=this;if(!this.addonIsExist.fenxiao)return this.$util.showToast({title:"商家未开启分销",mask:!0,duration:2e3}),void setTimeout((function(){t.$util.redirectTo("/pages/index/index",{},"redirectTo")}),2e3);this.fenxiaoWords&&this.fenxiaoWords.my_team&&this.$langConfig.title(this.fenxiaoWords.my_team),this.getFenXiaoLevel(),e.getStorageSync("token")?this.token=e.getStorageSync("token"):setTimeout((function(){t.$refs.login.open("/pages_promotion/fenxiao/team")}))},methods:{getData:function(e){var t=this;this.emptyShow=!1,1==e.num&&(this.teamList=[]),this.$api.sendRequest({url:"/fenxiao/api/fenxiao/team",data:{page_size:e.size,page:e.num,level:this.selectId},success:function(n){t.emptyShow=!0;var i=[],o=n.message;0==n.code&&n.data?(i=n.data.list,i.forEach((function(e){e.audit_time=t.$util.timeStampTurnTime(e.audit_time).substring(0,10),e.reg_time=t.$util.timeStampTurnTime(e.reg_time).substring(0,10)}))):t.$util.showToast({title:o}),e.endSuccess(i.length),1==e.num&&(t.teamList=[]),t.teamList=t.teamList.concat(i),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(n){e.endErr(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},imageError:function(e){this.teamList[e].headimg=$util.getDefaultImage().head,this.$forceUpdate()},selectCate:function(e){this.selectId=e,this.$refs.mescroll.refresh()},toFenxiaoOrder:function(e){e.fenxiao_id?this.$util.redirectTo("/pages_promotion/fenxiao/relation",{fenxiao_id:e.fenxiao_id}):this.$util.redirectTo("/pages_promotion/fenxiao/relation",{sub_member_id:e.member_id})},getFenXiaoLevel:function(){var e=this;return u(i.default.mark((function t(){var n;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.sendRequest({url:"/fenxiao/api/config/basics",async:!1,success:function(e){}});case 2:n=t.sent,0==n.code&&n.data&&(0==n.data.self_purchase_rebate?e.levelNum=Number(n.data.level)+1:e.levelNum=Number(n.data.level));case 4:case"end":return t.stop()}}),t)})))()}},watch:{storeToken:function(e,t){e&&(this.token=e,this.$refs.mescroll.refresh())}},computed:{storeToken:function(){return this.$store.state.token}}};t.default=s}).call(this,n("543d")["default"])},"4f62":function(e,t,n){"use strict";n.r(t);var i=n("4cd9"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},cbce:function(e,t,n){"use strict";(function(e){n("34b0");i(n("66fd"));var t=i(n("0e46"));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])}},[["cbce","common/runtime","common/vendor"]]]);