(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_promotion/giftcard/present/present"],{1549:function(e,t,i){"use strict";var n=i("f7d4"),a=i.n(n);a.a},"2b67":function(e,t,i){"use strict";i.r(t);var n=i("9a24"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t["default"]=a.a},"9a24":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i("5e27");var n=function(){i.e("components/uni-popup/uni-popup").then(function(){return resolve(i("92aa"))}.bind(null,i)).catch(i.oe)},a={components:{uniPopup:n},data:function(){return{cardinfo:[],id:"",member_id:"",leav_message:"",transfer_id:"",shareTitle:"",shareImageurl:"",show:!1}},onLoad:function(e){var t=e.id;this.getData(t),this.id=e.id,this.onShare()},onShow:function(){},methods:{shareGift:function(){},getData:function(e){var t=this;this.$api.sendRequest({url:"/giftcard/api/giftcard/transfer",data:{id:e},success:function(e){0==e.code&&e.data&&(t.cardinfo=e.data,t.member_id=e.data.use_member_id),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(e){mescroll.endErr(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},oninput:function(e){var t=e.target.value;this.leav_message=t},openSharePopup:function(){this.$refs.sharePopup.open(),this.actionTransfer(0)},closeSharePopup:function(){this.$refs.sharePopup.close()},actionTransfer:function(e){var t=this;this.$api.sendRequest({url:"/giftcard/api/giftcard/actiontransfer",data:{id:this.id,use_member_id:this.member_id,leav_message:this.leav_message},success:function(e){0==e.code&&e.data&&(t.transfer_id=e.data.transfer_id,t.shareGift())}})},copyUrl:function(e){var t=this;if(this.actionTransfer(1),this.transfer_id){var i=this.$config.h5Domain+"/pages_promotion/giftcard/present/accept?transfer_id="+this.transfer_id;this.$util.copy(i,(function(){t.closeSharePopup()}))}},onShare:function(){this.$api.sendRequest({url:"/weapp/api/weapp/share",success:function(e){}})},onShare2:function(){this.show=!0,this.closeSharePopup()},hide:function(){this.show=!1},openPosterPopup:function(){var t=this;this.getGiftcardPoster(),this.$refs.sharePopup.close(),this.$refs.posterPopup.open(),setTimeout((function(){var i=e.createSelectorQuery().in(t).select(".poster-layer .image-wrap");i.fields({size:!0},(function(e){var i=e.width,n=parseFloat((740/i).toFixed(2));t.token,t.posterHeight=parseInt(1100/n)})).exec()}),100)},getGiftcardPoster:function(){var e={id:this.cardinfo.id};this.memberId&&(e.source_member=this.memberId),this.$api.sendRequest({url:"/giftcard/api/goods/poster",data:{page:"/pages_promotion/giftcard/detail/detail",qrcode_param:JSON.stringify(e)},success:function(e){e.code}})}},onShareAppMessage:function(){return{title:"送你一张礼品卡",imageUrl:this.$util.img("public/uniapp/giftcard/detail/gift_bag3.png"),path:"/pages_promotion/giftcard/present/accept?transfer_id="+this.transfer_id,success:function(e){},fail:function(e){}}},onReady:function(){}};t.default=a}).call(this,i("543d")["default"])},b18f:function(e,t,i){"use strict";(function(e){i("34b0");n(i("66fd"));var t=n(i("bf62"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=i,e(t.default)}).call(this,i("543d")["createPage"])},bf62:function(e,t,i){"use strict";i.r(t);var n=i("d745"),a=i("2b67");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("1549");var o,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);t["default"]=u.exports},d745:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return n}));var n={uniPopup:function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"92aa"))},loadingCover:function(){return i.e("components/loading-cover/loading-cover").then(i.bind(null,"790a"))}},a=function(){var e=this,t=e.$createElement,i=(e._self._c,e.$util.img("public/uniapp/giftcard/detail/present_bg.png")),n=e.$util.img(e.cardinfo.card_cover),a=n?e.$util.img(e.cardinfo.card_cover):null,r=n?null:e.$util.img("public/uniapp/giftcard/detail/gitcard_default3.png"),o=1==e.show?e.$util.img("public/uniapp/giftcard/detail/share.png"):null;e.$mp.data=Object.assign({},{$root:{g0:i,g1:n,g2:a,g3:r,g4:o}})},r=[]},f7d4:function(e,t,i){}},[["b18f","common/runtime","common/vendor"]]]);