<page-meta page-style="{{themeColor}}"></page-meta><view><mescroll-uni class="vue-ref" vue-id="588a5993-1" size="{{10}}" data-ref="mescroll" data-event-opts="{{[['^getData',[['getData']]]]}}" bind:getData="__e" bind:__l="__l" vue-slots="{{['list']}}"><view slot="list"><view class="cf-container color-line-border"><view class="tab"><view data-event-opts="{{[['tap',[['changeState',[1]]]]]}}" bindtap="__e"><text class="{{[order_type==1?'color-base-text active color-base-border-bottom':'']}}">全部</text></view><view data-event-opts="{{[['tap',[['changeState',[2]]]]]}}" bindtap="__e"><text class="{{[order_type==2?'color-base-text active color-base-border-bottom':'']}}">待支付</text></view><view data-event-opts="{{[['tap',[['changeState',[3]]]]]}}" bindtap="__e"><text class="{{[order_type==3?'color-base-text active color-base-border-bottom':'']}}">已完成</text></view></view></view><block wx:if="{{orderList.length>0}}"><view class="card-box"><block wx:for="{{orderList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view><block wx:if="{{item.status==0}}"><view class="card-item"><view class="card-content"><view style="display:flex;justify-content:space-between;margin-bottom:30rpx;border-bottom:1rpx solid #fcfcfc;"><view class="card-num">{{"订单号: "+item.order_number}}</view><view class="pay-status">待支付</view></view><view style="display:flex;justify-content:space-between;margin-bottom:20rpx;"><view class="card-name">{{item.card_name}}</view><view class="card-money">{{"￥"+item.order_total_price/item.num}}</view></view><view style="display:flex;justify-content:space-between;"><view class="card-use"><block wx:if="{{item.balance>0||item.point>0||item.goods_num>0}}"><text>礼品卡权益：</text></block><block wx:if="{{item.balance>0&&item.point>0&&item.goods_num>0}}"><text class="card-num">{{'￥'+item.balance+" + "+item.point+"积分+商品*"+item.goods_num+''}}</text></block><block wx:else><block wx:if="{{item.balance>0&&item.point==0}}"><text class="card-num">{{"￥"+item.balance}}</text></block><block wx:else><block wx:if="{{item.balance==0&&item.point>0}}"><text class="card-num">{{item.point+" 积分"}}</text></block><block wx:else><block wx:if="{{item.balance==0&&item.point==0&&item.goods_num>0}}"><text class="card-num">{{"商品*"+item.goods_num}}</text></block><block wx:else><block wx:if="{{item.balance>0&&item.point>0&&item.goods_num==0}}"><text class="card-num">{{'￥'+item.balance+"+"+item.point+'积分'}}</text></block><block wx:else><block wx:if="{{item.balance>0&&item.point==0&&item.goods_num>0}}"><text class="card-num">{{'￥'+item.balance+"+商品*"+item.goods_num+''}}</text></block><block wx:else><block wx:if="{{item.balance==0&&item.point>0&&item.goods_num>0}}"><text class="card-num">{{''+item.point+"积分+商品*"+item.goods_num+''}}</text></block></block></block></block></block></block></block></view><view class="card-amount">{{"x"+item.num}}</view></view><view class="card-account"><text class="goods-num">{{"共计"+item.num+"件商品"}}</text><text>{{"应付款：￥"+item.order_total_price}}</text></view><view class="button"><view class="button-left"><button type="primary" size="mini" data-event-opts="{{[['tap',[['closeOrder',['$0'],[[['orderList','',index,'order_id']]]]]]]}}" bindtap="__e">关闭订单</button></view><view class="button-right"><button type="primary" size="mini" data-event-opts="{{[['tap',[['openChoosePayment',['$0','$1','$2'],[[['orderList','',index,'order_id']],[['orderList','',index,'order_total_price']],[['orderList','',index,'num']]]]]]]}}" bindtap="__e">支付</button></view></view></view></view></block><block wx:else><block wx:if="{{item.status==1}}"><view class="card-item"><view class="card-content"><view style="display:flex;justify-content:space-between;margin-bottom:30rpx;border-bottom:1rpx solid #fcfcfc;"><view class="card-num">{{"订单号: "+item.order_number}}</view><view class="pay-status2">已完成</view></view><view style="display:flex;justify-content:space-between;margin-bottom:20rpx;"><view class="card-name">{{item.card_name}}</view><view class="card-money">{{"￥"+item.order_total_price/item.num}}</view></view><view style="display:flex;justify-content:space-between;"><view class="card-use"><block wx:if="{{item.balance>0||item.point>0||item.goods_num>0}}"><text>礼品卡权益：</text></block><block wx:if="{{item.balance>0&&item.point>0&&item.goods_num>0}}"><text class="card-num">{{'￥'+item.balance+" + "+item.point+"积分+商品*"+item.goods_num+''}}</text></block><block wx:else><block wx:if="{{item.balance>0&&item.point==0}}"><text class="card-num">{{"￥"+item.balance}}</text></block><block wx:else><block wx:if="{{item.balance==0&&item.point>0}}"><text class="card-num">{{item.point+" 积分"}}</text></block><block wx:else><block wx:if="{{item.balance==0&&item.point==0&&item.goods_num>0}}"><text class="card-num">{{"商品*"+item.goods_num}}</text></block><block wx:else><block wx:if="{{item.balance>0&&item.point>0&&item.goods_num==0}}"><text class="card-num">{{'￥'+item.balance+"+"+item.point+'积分'}}</text></block><block wx:else><block wx:if="{{item.balance>0&&item.point==0&&item.goods_num>0}}"><text class="card-num">{{'￥'+item.balance+"+商品*"+item.goods_num+''}}</text></block><block wx:else><block wx:if="{{item.balance==0&&item.point>0&&item.goods_num>0}}"><text class="card-num">{{''+item.point+"积分+商品*"+item.goods_num+''}}</text></block></block></block></block></block></block></block></view><view class="card-amount">{{"x"+item.num}}</view></view><view class="card-account"><text class="goods-num">{{"共计"+item.num+"件商品"}}</text><text>{{"应付款：￥"+item.order_total_price}}</text></view><view class="button2"><view class="button3"></view></view></view></view></block><block wx:else><block wx:if="{{item.status==2}}"><view class="card-item"><view class="card-content"><view style="display:flex;justify-content:space-between;margin-bottom:30rpx;border-bottom:1rpx solid #fcfcfc;"><view class="card-num">{{"订单号: "+item.order_number}}</view><view class="pay-status2">已关闭</view></view><view style="display:flex;justify-content:space-between;margin-bottom:20rpx;"><view class="card-name">{{item.card_name}}</view><view class="card-money">{{"￥"+item.order_total_price/item.num}}</view></view><view style="display:flex;justify-content:space-between;"><view class="card-use"><block wx:if="{{item.balance>0||item.point>0||item.goods_num>0}}"><text>礼品卡权益：</text></block><block wx:if="{{item.balance>0&&item.point>0&&item.goods_num>0}}"><text class="card-num">{{'￥'+item.balance+" + "+item.point+"积分+商品*"+item.goods_num+''}}</text></block><block wx:else><block wx:if="{{item.balance>0&&item.point==0}}"><text class="card-num">{{"￥"+item.balance}}</text></block><block wx:else><block wx:if="{{item.balance==0&&item.point>0}}"><text class="card-num">{{item.point+" 积分"}}</text></block><block wx:else><block wx:if="{{item.balance==0&&item.point==0&&item.goods_num>0}}"><text class="card-num">{{"商品*"+item.goods_num}}</text></block><block wx:else><block wx:if="{{item.balance>0&&item.point>0&&item.goods_num==0}}"><text class="card-num">{{'￥'+item.balance+"+"+item.point+'积分'}}</text></block><block wx:else><block wx:if="{{item.balance>0&&item.point==0&&item.goods_num>0}}"><text class="card-num">{{'￥'+item.balance+"+商品*"+item.goods_num+''}}</text></block><block wx:else><block wx:if="{{item.balance==0&&item.point>0&&item.goods_num>0}}"><text class="card-num">{{''+item.point+"积分+商品*"+item.goods_num+''}}</text></block></block></block></block></block></block></block></view><view class="card-amount">{{"x"+item.num}}</view></view><view class="card-account"><text class="goods-num">{{"共计"+item.num+"件商品"}}</text><text>{{"应付款：￥"+item.order_total_price}}</text></view><view class="button2"><view class="button3"></view></view></view></view></block></block></block></view></block></view></block><block wx:else><view class="card-no-data"><view class="card-image"><image src="{{$root.g0}}"></image></view><view>暂无数据</view></view></block></view></mescroll-uni><loading-cover class="vue-ref" vue-id="588a5993-2" data-ref="loadingCover" bind:__l="__l"></loading-cover><ns-payment class="vue-ref" vue-id="588a5993-3" payMoney="{{price}}" data-ref="choosePaymentPopup" data-event-opts="{{[['^confirm',[['gotoBuy']]]]}}" bind:confirm="__e" bind:__l="__l"></ns-payment></view>