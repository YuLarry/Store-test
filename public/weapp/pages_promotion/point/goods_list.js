(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_promotion/point/goods_list"],{"0fdc":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return o}));var o={nsEmpty:function(){return e.e("components/ns-empty/ns-empty").then(e.bind(null,"2c4c"))},uniDrawer:function(){return e.e("components/uni-drawer/uni-drawer").then(e.bind(null,"493f"))}},n=function(){var t=this,i=t.$createElement,e=(t._self._c,t.goodsList.length?t.__map(t.goodsList,(function(i,e){var o=t.__get_orig(i),n=t.goodsImg(i.image),s=i.price>0&&i.pay_type>0?t.$lang("common.currencySymbol"):null,r=i.price>0&&i.pay_type>0?parseFloat(i.price).toFixed(2).split("."):null,a=i.price>0&&i.pay_type>0?parseFloat(i.price).toFixed(2).split("."):null;return{$orig:o,m0:n,m1:s,g0:r,g1:a}})):null);t._isMounted||(t.e0=function(i){t.showScreen=!1}),t.$mp.data=Object.assign({},{$root:{l0:e}})},s=[]},"269f":function(t,i,e){},3639:function(t,i,e){"use strict";e.r(i);var o=e("0fdc"),n=e("b6ba");for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("4d0a"),e("4bab");var r,a=e("f0c5"),c=Object(a["a"])(n["default"],o["b"],o["c"],!1,null,"374bd16a",null,!1,o["a"],r);i["default"]=c.exports},"4bab":function(t,i,e){"use strict";var o=e("269f"),n=e.n(o);n.a},"4d0a":function(t,i,e){"use strict";var o=e("576a"),n=e.n(o);n.a},"576a":function(t,i,e){},b6ba:function(t,i,e){"use strict";e.r(i);var o=e("dd28"),n=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=n.a},dd28:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=function(){e.e("components/uni-drawer/uni-drawer").then(function(){return resolve(e("493f"))}.bind(null,e)).catch(e.oe)},n={components:{uniDrawer:o},data:function(){return{listStyle:"",priceOrder:"desc",categoryList:[],goodsList:[],order:"",sort:"desc",showScreen:!1,keyword:"",categoryId:0,minPoint:"",maxPoint:"",isFreeShipping:!1,isIphoneX:!1,coupon:0,emptyShow:!1,isList:!0,mescroll:null,isLogin:!1,couponList:[],hongbaoList:[],point:0,token:null,memberInfo:{headimg:""}}},onLoad:function(t){this.categoryId=t.category_id||0,this.keyword=t.keyword||"",this.isIphoneX=this.$util.uniappIsIPhoneX(),this.coupon=t.coupon||0,this.loadCategoryList(this.categoryId)},methods:{getData:function(t){var i=this;this.$api.sendRequest({url:"/pointexchange/api/goods/page",data:{page_size:t.size,page:t.num,type:1,keyword:this.keyword,category_id:this.categoryId,min_point:this.minPoint,max_point:this.maxPoint,is_free_shipping:this.isFreeShipping?1:0,order:this.order,sort:this.sort,coupon:this.coupon},success:function(e){var o=[],n=e.message;0==e.code&&e.data?o=e.data.list:i.$util.showToast({title:n}),t.endSuccess(o.length),1==t.num&&(i.goodsList=[]),i.goodsList=i.goodsList.concat(o),i.$refs.loadingCover&&i.$refs.loadingCover.hide()},fail:function(){t.endErr(),this.$refs.loadingCover&&this.$refs.loadingCover.hide()}})},loadCategoryList:function(t,i){var e=this;this.$api.sendRequest({url:"/api/goodscategory/tree",data:{},success:function(t){null!=t.data&&(e.categoryList=t.data)}})},goodsImg:function(t){var i=t.split(",");return i[0]?this.$util.img(i[0],{size:"mid"}):this.$util.getDefaultImage().goods},imgError:function(t){this.goodsList[t].goods_image=this.$util.getDefaultImage().goods},toDetail:function(t){this.$util.redirectTo("/pages_promotion/point/detail",{id:t.id})},search:function(){this.emptyShow=!1,this.goodsList=[],this.$refs.mescroll.refresh()},sortTabClick:function(t){if("point"==t)this.order="point",this.sort="desc";else if("create_time"==t)this.order="create_time",this.sort="desc";else{if("screen"==t)return void(this.showScreen=!0);this.order="",this.sort=""}this.order=t,("create_time"===t||"point"===t)&&(this.priceOrder="asc"===this.priceOrder?"desc":"asc",this.sort=this.priceOrder),this.emptyShow=!1,this.goodsList=[],this.$refs.mescroll.refresh()},selectedCategory:function(t){this.categoryId=t},screenData:function(){if(""!=this.minPoint||""!=this.maxPoint){if(!Number(this.maxPoint)&&this.maxPoint)return void this.$util.showToast({title:"请输入最高价"});if(Number(this.minPoint)<0||Number(this.maxPoint)<0)return void this.$util.showToast({title:"筛选价格不能小于0"});if(""!=this.minPoint&&Number(this.minPoint)>Number(this.maxPoint)&&this.maxPoint)return void this.$util.showToast({title:"最低价不能大于最高价"});if(""!=this.maxPoint&&Number(this.maxPoint)<Number(this.minPoint))return void this.$util.showToast({title:"最高价不能小于最低价"})}this.emptyShow=!1,this.goodsList=[],this.$refs.mescroll.refresh(),this.showScreen=!1},resetData:function(){this.showScreen=!1,this.categoryId=0,this.minPoint="",this.maxPoint=""}}};i.default=n},f066:function(t,i,e){"use strict";(function(t){e("34b0");o(e("66fd"));var i=o(e("3639"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("543d")["createPage"])}},[["f066","common/runtime","common/vendor"]]]);