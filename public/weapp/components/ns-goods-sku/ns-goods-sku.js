(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/ns-goods-sku/ns-goods-sku"],{"0240":function(i,t,e){"use strict";e.r(t);var o=e("69b6"),s=e.n(o);for(var a in o)"default"!==a&&function(i){e.d(t,i,(function(){return o[i]}))}(a);t["default"]=s.a},"229c":function(i,t,e){"use strict";var o=e("7a97"),s=e.n(o);s.a},"3d75":function(i,t,e){},"69b6":function(i,t,e){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(e("9374"));function s(i){return i&&i.__esModule?i:{default:i}}var a=function(){e.e("components/uni-popup/uni-popup-sku").then(function(){return resolve(e("f410"))}.bind(null,e)).catch(e.oe)},u={name:"ns-goods-sku",components:{uniPopup:a},props:{goodsDetail:{type:Object,default:null},disabled:{type:Boolean,default:!1},pointLimit:{type:[Number,String]},maxBuy:{type:Number,default:0},minBuy:{type:Number,default:0}},data:function(){return{isIphoneX:!1,systemInfo:{},number:1,btnSwitch:!1,type:"",callback:null,skuId:0,pintuanId:0,limitNumber:0,minNumber:0,preview:0,cartNumber:0}},created:function(){this.isIphoneX=this.$util.uniappIsIPhoneX(),this.systemInfo=i.getSystemInfoSync()},watch:{pointLimit:function(i,t){this.limitNumber=Number(i)},goodsDetail:function(i,t){this.skuId=i.sku_id},minBuy:function(i,t){this.minBuy>1&&(this.number=Number(this.minBuy))}},computed:{balance:function(){var i=this.goodsDetail.member_price&&this.goodsDetail.member_price>0?this.goodsDetail.member_price:this.goodsDetail.price,t=parseFloat(i)-parseFloat(this.goodsDetail.presale_price);return t=t<0?0:t,t.toFixed(2)}},methods:{show:function(i,t){this.callback=t,this.$refs.skuPopup.open(t),this.type=i,this.skuId=this.goodsDetail.sku_id,this.preview=this.goodsDetail.preview||0,"pintuan"==this.type&&this.goodsDetail.pintuan_id||"pinfan"==this.type&&this.goodsDetail.pinfan_id?this.limitNumber=this.goodsDetail.buy_num:"groupbuy"==this.type&&this.goodsDetail.groupbuy_id?this.goodsDetail.stock>this.goodsDetail.buy_num&&(this.number=this.goodsDetail.buy_num,this.minNumber=this.goodsDetail.buy_num):"bargain"==this.type&&this.goodsDetail.bargain_id&&(this.number=1,this.minNumber=1),"join_cart"==this.type&&this.getCartData(),"point"==this.type&&-1==this.goodsDetail.stock&&(this.goodsDetail.pointCoupon=1,this.goodsDetail.stock=99999),"bale"==this.type&&(this.number=1,-1==this.$util.inArray(this.skuId+"",this.goodsDetail.activity_sku_ids)?(this.confirmDisabled=!0,this.$util.showToast({title:"该规格未参与打包一口价活动"})):this.confirmDisabled=!1),this.$forceUpdate()},hide:function(){this.$refs.skuPopup.close()},previewMedia:function(){var t=[];t.push(this.$util.img(this.goodsDetail.sku_image,{size:"big"})),i.previewImage({current:1,urls:t})},change:function(i,t){if(!this.disabled){this.btnSwitch=!1,this.skuId=i;for(var e=0;e<this.goodsDetail.goods_spec_format.length;e++)for(var o=this.goodsDetail.goods_spec_format[e],s=0;s<o.value.length;s++)t==this.goodsDetail.goods_spec_format[e].value[s].spec_id&&(this.goodsDetail.goods_spec_format[e].value[s].selected=!1);this.goodsDetail.pintuan_id?this.getPintuanGoodsSkuInfo():this.goodsDetail.pinfan_id?this.getPinfanGoodsSkuInfo():this.goodsDetail.groupbuy_id?this.getGroupbuyGoodsSkuInfo():this.goodsDetail.bargain_id?this.getBargainGoodsSkuInfo():this.goodsDetail.seckill_id?this.getSeckillGoodsSkuInfo():this.goodsDetail.topic_id?this.getTopicsGoodsSkuInfo():this.goodsDetail.exchange_id?this.getPointGoodsSkuInfo():"presale"==this.type&&this.goodsDetail.presale_id?this.getPresaleGoodsSkuInfo():this.goodsDetail.bale_id?(this.getGoodsSkuInfo(),-1==this.$util.inArray(i+"",this.goodsDetail.activity_sku_ids)?(this.confirmDisabled=!0,this.$util.showToast({title:"该规格未参与打包一口价活动"})):this.confirmDisabled=!1):this.getGoodsSkuInfo()}},showPrice:function(i){return parseFloat(i)},getFenxiaoGoodsDetail:function(){var i=this;this.$api.sendRequest({url:"/fenxiao/api/goods/detail",data:{sku_id:this.skuId},success:function(t){0==t.code&&t.data&&(i.levelInfo=t.data)}})},getGoodsSkuInfo:function(){var i=this;this.getFenxiaoGoodsDetail();this.$api.sendRequest({url:"/api/goodssku/info",data:{sku_id:this.skuId},success:function(t){var e=t.data;if(null!=e){if("presale"==e.promotion_type)return void i.$util.redirectTo("/promotionpages/presale/detail/detail",{id:e.presale_id,sku_id:i.skuId},"reLaunch");e.unit=e.unit||"件",i.goodsSkuDetail=e,i.dealData(),1==i.goodsSkuDetail.promotion_type&&(i.goodsSkuDetail.discountTimeMachine=i.$util.countDown(i.goodsSkuDetail.end_time-t.timestamp)),1==i.goodsSkuDetail.promotion_type&&i.goodsSkuDetail.discountTimeMachine?i.goodsSkuDetail.member_price>0&&Number(i.goodsSkuDetail.member_price)<=Number(i.goodsSkuDetail.discount_price)?i.goodsSkuDetail.show_price=i.goodsSkuDetail.member_price:i.goodsSkuDetail.show_price=i.goodsSkuDetail.discount_price:i.goodsSkuDetail.member_price>0?i.goodsSkuDetail.show_price=i.goodsSkuDetail.member_price:i.goodsSkuDetail.show_price=i.goodsSkuDetail.price,i.btnSwitch=!1,i.$emit("refresh",i.goodsSkuDetail),i.$emit("GetSkuid",i.skuId),i.$emit("levelInfo",i.levelInfo),i.$forceUpdate()}else i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(t){i.btnSwitch=!1,i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getPintuanGoodsSkuInfo:function(){var i=this;this.$api.sendRequest({url:"/pintuan/api/goods/info",data:{sku_id:this.skuId,pintuan_id:this.goodsDetail.pintuan_id},success:function(t){var e=t.data;if(null!=e){if("again"==e.type)return i.skuId=e.sku_id,void i.getPintuanGoodsSkuInfo();e.unit=e.unit||"件",i.goodsSkuDetail=e,i.dealData(),i.goodsSkuDetail.show_price=0==i.goodsDetail.group_id?i.goodsSkuDetail.promotion_price:i.goodsSkuDetail.pintuan_price,i.goodsSkuDetail.save_price=i.goodsSkuDetail.price-i.goodsSkuDetail.show_price>0?(i.goodsSkuDetail.price-i.goodsSkuDetail.show_price).toFixed(2):0,i.goodsSkuDetail.end_time-t.timestamp>0?i.goodsSkuDetail.timeMachine=i.$util.countDown(i.goodsSkuDetail.end_time-t.timestamp):(i.$util.showToast({title:"活动已结束"}),setTimeout((function(){i.$util.redirectTo("/pages/goods/detail/detail",{sku_id:i.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),i.btnSwitch=!1,i.$emit("refresh",i.goodsSkuDetail)}else i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(t){i.btnSwitch=!1,i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getPinfanGoodsSkuInfo:function(){var i=this;this.$api.sendRequest({url:"/pinfan/api/goods/info",data:{sku_id:this.skuId,pintuan_id:this.goodsDetail.pinfan_id},success:function(t){var e=t.data;if(null!=e){if("again"==e.type)return i.skuId=e.sku_id,void i.getPinfanGoodsSkuInfo();e.unit=e.unit||"件",i.goodsSkuDetail=e,i.dealData(),i.goodsSkuDetail.show_price=0==i.goodsDetail.group_id?i.goodsSkuDetail.promotion_price:i.goodsSkuDetail.pintuan_price,i.goodsSkuDetail.save_price=i.goodsSkuDetail.price-i.goodsSkuDetail.show_price>0?(i.goodsSkuDetail.price-i.goodsSkuDetail.show_price).toFixed(2):0,i.goodsSkuDetail.end_time-t.timestamp>0?i.goodsSkuDetail.timeMachine=i.$util.countDown(i.goodsSkuDetail.end_time-t.timestamp):(i.$util.showToast({title:"活动已结束"}),setTimeout((function(){i.$util.redirectTo("/pages/goods/detail/detail",{sku_id:i.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),i.btnSwitch=!1,i.$emit("refresh",i.goodsSkuDetail)}else i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(t){i.btnSwitch=!1,i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getBargainGoodsSkuInfo:function(){var i=this;this.$api.sendRequest({url:"/bargain/api/goods/info",data:{sku_id:this.skuId,bargain_id:this.goodsDetail.bargain_id},success:function(t){var e=t.data;if(null!=e){if("again"==e.type)return i.skuId=e.sku_id,void i.getBargainGoodsSkuInfo();e.unit=e.unit||"件",i.goodsSkuDetail=e,i.dealData(),i.goodsSkuDetail.show_price=i.goodsDetail.bargain_id>0?i.goodsSkuDetail.floor_price:i.goodsSkuDetail.price,i.goodsSkuDetail.stock=i.goodsSkuDetail.bargain_stock,i.goodsSkuDetail.save_price=i.goodsSkuDetail.price-i.goodsSkuDetail.show_price>0?(i.goodsSkuDetail.price-i.goodsSkuDetail.show_price).toFixed(2):0,i.goodsSkuDetail.end_time-t.timestamp>0?i.goodsSkuDetail.timeMachine=i.$util.countDown(i.goodsSkuDetail.end_time-t.timestamp):(i.$util.showToast({title:"活动已结束"}),setTimeout((function(){i.$util.redirectTo("/pages/goods/detail/detail",{sku_id:i.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),i.btnSwitch=!1,i.$emit("refresh",i.goodsSkuDetail)}else i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(t){i.btnSwitch=!1,i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getTopicsGoodsSkuInfo:function(){var i=this;this.$api.sendRequest({url:"/topic/api/topicgoods/info",data:{sku_id:this.skuId,topic_id:this.goodsDetail.topic_id},success:function(t){var e=t.data;if(null!=e){if("again"==e.type)return i.skuId=e.sku_id,void i.getTopicsGoodsSkuInfo();e.unit=e.unit||"件",i.goodsSkuDetail=e.goods_sku_detail,i.dealData(),i.goodsSkuDetail.show_price=i.goodsDetail.topic_id>0?i.goodsSkuDetail.topic_price:i.goodsSkuDetail.price,i.goodsSkuDetail.save_price=i.goodsSkuDetail.price-i.goodsSkuDetail.show_price>0?(i.goodsSkuDetail.price-i.goodsSkuDetail.show_price).toFixed(2):0,i.goodsSkuDetail.end_time-t.timestamp>0?i.goodsSkuDetail.timeMachine=i.$util.countDown(i.goodsSkuDetail.end_time-t.timestamp):(i.$util.showToast({title:"活动已结束"}),setTimeout((function(){i.$util.redirectTo("/pages/goods/detail/detail",{sku_id:i.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),i.btnSwitch=!1,i.$emit("refresh",i.goodsSkuDetail)}else i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(t){i.btnSwitch=!1,i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getGroupbuyGoodsSkuInfo:function(){var i=this;this.$api.sendRequest({url:"/groupbuy/api/goods/info",data:{sku_id:this.skuId,groupbuy_id:this.goodsDetail.groupbuy_id},success:function(t){var e=t.data;null!=e?(e.unit=e.unit||"件",i.goodsSkuDetail=e,i.dealData(),i.goodsSkuDetail.show_price=i.goodsDetail.groupbuy_price,i.goodsSkuDetail.save_price=i.goodsSkuDetail.price-i.goodsSkuDetail.show_price>0?(i.goodsSkuDetail.price-i.goodsSkuDetail.show_price).toFixed(2):0,i.goodsSkuDetail.end_time-t.timestamp>0?i.goodsSkuDetail.timeMachine=i.$util.countDown(i.goodsSkuDetail.end_time-t.timestamp):(i.$util.showToast({title:"活动已结束"}),setTimeout((function(){i.$util.redirectTo("/pages/goods/detail/detail",{sku_id:i.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),i.btnSwitch=!1,e.stock>e.buy_num&&(i.number=i.goodsDetail.buy_num,i.minNumber=i.goodsDetail.buy_num),i.$emit("refresh",i.goodsSkuDetail)):i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(t){i.btnSwitch=!1,i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getSeckillGoodsSkuInfo:function(){var i=this;this.$api.sendRequest({url:"/seckill/api/seckillgoods/info",data:{sku_id:this.skuId,seckill_id:this.goodsDetail.seckill_id},success:function(t){var e=t.data;if(null!=e){if("again"==e.type)return i.skuId=e.sku_id,void i.getSeckillGoodsSkuInfo();e.unit=e.unit||"件",i.goodsSkuDetail=e.goods_sku_detail,i.dealData(),i.goodsSkuDetail.show_price=i.goodsSkuDetail.seckill_price,i.goodsSkuDetail.price-i.goodsSkuDetail.show_price>0&&(i.goodsSkuDetail.price-i.goodsSkuDetail.show_price).toFixed(2),i.goodsSkuDetail.end_time-t.timestamp>0?i.goodsSkuDetail.timeMachine=i.$util.countDown(i.goodsSkuDetail.end_time-t.timestamp):(i.$util.showToast({title:"活动已结束"}),setTimeout((function(){i.$util.redirectTo("/pages/goods/detail/detail",{sku_id:i.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),i.btnSwitch=!1,i.$emit("refresh",i.goodsSkuDetail)}else i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(t){i.btnSwitch=!1,i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getPointGoodsSkuInfo:function(){var i=this;this.$api.sendRequest({url:"/pointexchange/api/goods/info",data:{sku_id:this.skuId,exchange_id:this.goodsDetail.exchange_id},success:function(t){var e=t.data;if(null!=e){if("again"==e.type)return i.skuId=e.sku_id,void i.getPointGoodsSkuInfo();e.unit=e.unit||"件",i.goodsSkuDetail=e,i.dealData(),i.btnSwitch=!1,i.$emit("refresh",i.goodsSkuDetail)}else i.$util.redirectTo("/promotionpages/point/list/list",{},"redirectTo")},fail:function(t){i.btnSwitch=!1,i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getPresaleGoodsSkuInfo:function(){var i=this;this.$api.sendRequest({url:"/presale/api/goods/info",data:{sku_id:this.skuId,id:this.goodsDetail.presale_id},success:function(t){var e=t.data;if(e){if("again"==e.type)return i.skuId=e.sku_id,void i.getPresaleGoodsSkuInfo();e.unit=e.unit||"件",i.goodsSkuDetail=e,i.dealData(),i.btnSwitch=!1,i.$emit("refresh",i.goodsSkuDetail)}else i.$util.redirectTo("/pages/goods/detail/detail",{sku_id:i.skuId},"redirectTo")},fail:function(t){i.btnSwitch=!1,i.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},dealData:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goodsSkuDetail;if(i.sku_images?i.sku_images=i.sku_images.split(","):i.sku_images=[],i.goods_spec_format&&i.goods_image&&(i.goods_image=i.goods_image.split(","),i.sku_images=i.sku_images.concat(i.goods_image)),i.sku_spec_format&&(i.sku_spec_format=JSON.parse(i.sku_spec_format)),i.goods_attr_format){var t=JSON.parse(i.goods_attr_format);i.goods_attr_format=this.$util.unique(t,"attr_id");for(var e=0;e<i.goods_attr_format.length;e++)for(var s=0;s<t.length;s++)i.goods_attr_format[e].attr_id==t[s].attr_id&&i.goods_attr_format[e].attr_value_id!=t[s].attr_value_id&&(i.goods_attr_format[e].attr_value_name+="、"+t[s].attr_value_name)}i.goods_spec_format&&(i.goods_spec_format=JSON.parse(i.goods_spec_format)),i.goods_content&&"point"!=this.type&&(i.goods_content=(0,o.default)(i.goods_content)),i.content&&"point"==this.type&&(i.content=(0,o.default)(i.content)),this.goodsDetail.unit=this.goodsDetail.unit||"件",this.keyInput(!0),this.$langConfig.title(i.goods_name)},changeNum:function(i){if(0!=this.goodsDetail.stock){var t=1,e=this.goodsDetail.stock;if(1==this.maxBuy&&(e=1),1==this.goodsDetail.is_limit&&this.maxBuy>0&&this.maxBuy<e&&(e=this.maxBuy),1==this.goodsDetail.is_limit&&2==this.goodsDetail.limit_type&&this.maxBuy>0&&this.goodsDetail.purchased_num>0){var o=this.maxBuy-this.goodsDetail.purchased_num;e=o<this.goodsDetail.stock?o:this.goodsDetail.stock}if(this.minBuy>1&&(t=this.minBuy),"pintuan"==this.type&&this.goodsDetail.pintuan_id?e=this.goodsDetail.buy_num>this.goodsDetail.stock?this.goodsDetail.stock:this.goodsDetail.buy_num:"groupbuy"==this.type&&this.goodsDetail.groupbuy_id?(e=(this.goodsDetail.buy_num,this.goodsDetail.stock,this.goodsDetail.stock),t=this.goodsDetail.buy_num):"seckill"==this.type&&this.goodsDetail.seckill_id&&this.goodsDetail.num>0&&this.goodsDetail.num<this.goodsDetail.stock?e=this.goodsDetail.num:"bargain"==this.type&&this.goodsDetail.bargain_id?e=1:"presale"==this.type&&this.goodsDetail.presale_id&&(e=this.goodsDetail.presale_num>this.goodsDetail.stock?this.goodsDetail.stock:this.goodsDetail.presale_num),"+"==i)if(this.number<e)this.number++;else{if(this.number>=this.goodsDetail.stock)return void this.$util.showToast({title:"库存不足"});if(1==this.goodsDetail.is_limit&&this.maxBuy>0){if(1==this.goodsDetail.limit_type)return void this.$util.showToast({title:"该商品每次最多购买"+this.maxBuy+this.goodsDetail.unit});if(2==this.goodsDetail.limit_type){var s="该商品每人限购"+this.maxBuy+this.goodsDetail.unit;return s+=this.goodsDetail.purchased_num>0?"，您已购买了"+this.goodsDetail.purchased_num+this.goodsDetail.unit:"",void this.$util.showToast({title:s})}}if("seckill"==this.type&&this.goodsDetail.seckill_id&&this.goodsDetail.num>0)return void this.$util.showToast({title:"该商品每人限购"+this.goodsDetail.num+this.goodsDetail.unit});if("presale"==this.type&&this.goodsDetail.presale_id&&this.goodsDetail.presale_num>0)return void this.$util.showToast({title:"该商品每人限购"+this.goodsDetail.presale_num+this.goodsDetail.unit})}else if("-"==i){if(!(this.number>t))return void(this.minBuy>1&&this.$util.showToast({title:"该商品"+this.minBuy+this.goodsDetail.unit+"起售"}));this.number-=1}this.number>this.limitNumber&&this.limitNumber&&(this.number=this.limitNumber)}},blur:function(){if(this.number||(this.number=0),this.number>this.limitNumber&&this.limitNumber&&(this.number=this.limitNumber),this.number<this.minNumber&&this.minNumber&&(this.number=this.minNumber),1==this.goodsDetail.is_limit&&this.maxBuy>0&&this.number>this.maxBuy&&(this.number=this.maxBuy),1==this.goodsDetail.is_limit&&this.maxBuy>0&&this.goodsDetail.purchased_num>0){var i=this.maxBuy-this.goodsDetail.purchased_num;this.number>i&&(this.number=i)}this.number<this.minBuy&&this.minBuy>0&&(this.number=this.minBuy),this.number<=0&&(this.number=1)},keyInput:function(i,t){var e=this;setTimeout((function(){var o=e.goodsDetail.stock;0!=e.goodsDetail.stock?(i&&0==e.number.length&&(e.number=1),i&&(e.number<=0||isNaN(e.number))&&(e.number=1),"pintuan"==e.type&&e.goodsDetail.pintuan_id&&e.number>e.goodsDetail.buy_num?e.number=e.goodsDetail.buy_num:"groupbuy"==e.type&&e.goodsDetail.groupbuy_id&&e.number<e.goodsDetail.buy_num?e.number=1:"seckill"==e.type&&e.goodsDetail.seckill_id&&e.goodsDetail.max_buy>0&&e.number>e.goodsDetail.max_buy?e.number=e.goodsDetail.max_buy:"bargain"==e.type&&e.goodsDetail.bargain_id?e.number=1:"presale"==e.type&&e.goodsDetail.presale_id&&e.goodsDetail.presale_num>0&&e.number>e.goodsDetail.presale_num?e.number=e.goodsDetail.presale_num:e.number>o&&(e.number=o),e.minBuy>1&&e.number<e.minBuy&&(e.number=e.minBuy),i&&(e.number=parseInt(e.number)),t&&t()):e.number=0}),0)},confirm:function(){var t=this;i.removeStorageSync("delivery"),this.preview?this.$util.showToast({title:"预览商品无法购买"}):i.getStorageSync("token")?this.keyInput(!0,(function(){if(0!=t.goodsDetail.stock)if(0==t.number.length||t.number<=0)t.$util.showToast({title:"购买数量不能小于等于0"});else if(t.goodsDetail.buy_num>t.goodsDetail.stock)t.$util.showToast({title:"库存小于最低购买数量"});else if(t.number>t.goodsDetail.stock)t.$util.showToast({title:"库存不足"});else if(1==t.goodsDetail.is_limit&&1==t.goodsDetail.limit_type&&t.maxBuy>0&&t.number>t.maxBuy)t.$util.showToast({title:"该商品每次最多购买"+t.maxBuy+t.goodsDetail.unit});else{if(1==t.goodsDetail.is_limit&&2==t.goodsDetail.limit_type&&t.maxBuy>0&&t.number+t.goodsDetail.purchased_num>t.maxBuy){var e="该商品每人限购"+t.maxBuy+t.goodsDetail.unit;return e+=t.goodsDetail.purchased_num>0?"，您已购买了"+t.goodsDetail.purchased_num+t.goodsDetail.unit:"",void t.$util.showToast({title:e})}if("join_cart"==t.type&&1==t.goodsDetail.is_limit&&t.maxBuy>0&&t.cartNumber+t.number>t.maxBuy)t.$util.showToast({title:"该商品每人限购"+t.maxBuy+t.goodsDetail.unit});else if(!t.btnSwitch)if(t.btnSwitch=!0,"join_cart"==t.type)t.$api.sendRequest({url:"/api/cart/add",data:{sku_id:t.skuId,num:t.number},success:function(i){var e=i.data;e>0&&(t.$util.showToast({title:"加入购物车成功"}),t.cartNumber+=t.number,t.callback&&t.callback()),t.$refs.skuPopup.close(),t.btnSwitch=!1},fail:function(i){t.$refs.skuPopup.close(),t.btnSwitch=!1}});else if("buy_now"==t.type){var o={sku_id:t.skuId,num:t.number};i.setStorage({key:"orderCreateData",data:o,success:function(){t.$util.redirectTo("/pages/order/payment/payment"),t.btnSwitch=!1}})}else if("seckill"==t.type){o={seckill_id:t.goodsDetail.seckill_id,num:t.number,sku_id:t.skuId};i.setStorage({key:"seckillOrderCreateData",data:o,success:function(){t.$util.redirectTo("/promotionpages/seckill/payment/payment"),t.btnSwitch=!1}})}else if("pintuan"==t.type){o={pintuan_goods_id:t.goodsDetail.id,group_id:t.goodsDetail.group_id,num:t.number};i.setStorage({key:"pintuanOrderCreateData",data:o,success:function(){t.$util.redirectTo("/promotionpages/pintuan/payment/payment"),t.btnSwitch=!1}})}else if("pinfan"==t.type){o={pintuan_goods_id:t.goodsDetail.id,group_id:t.goodsDetail.group_id,num:t.number};i.setStorage({key:"pinfanOrderCreateData",data:o,success:function(){t.$util.redirectTo("/promotionpages/rebate/rebate/payment"),t.btnSwitch=!1}})}else if("topic"==t.type){o={topic_goods_id:t.goodsDetail.id,num:t.number};i.setStorage({key:"topicOrderCreateData",data:o,success:function(){t.$util.redirectTo("/promotionpages/topics/payment/payment"),t.btnSwitch=!1}})}else if("groupbuy"==t.type){o={groupbuy_id:t.goodsDetail.groupbuy_id,sku_id:t.skuId,num:t.number};i.setStorage({key:"groupbuyOrderCreateData",data:o,success:function(){t.$util.redirectTo("/promotionpages/groupbuy/payment/payment"),t.btnSwitch=!1}})}else if("presale"==t.type){o={presale_id:t.goodsDetail.presale_id,sku_id:t.skuId,num:t.number};i.setStorage({key:"presaleOrderCreateData",data:o,success:function(){t.$util.redirectTo("/promotionpages/presale/payment/payment"),t.btnSwitch=!1}})}else if("bargain"==t.type)t.$api.sendRequest({url:"/bargain/api/bargain/launch",data:{id:t.goodsDetail.id},success:function(i){t.btnSwitch=!1,0==i.code?t.$util.redirectTo("/promotionpages/bargain/launch/launch",{id:i.data},"redirectTo"):t.$util.showToast({title:i.message})}});else if("point"==t.type){o={id:t.goodsDetail.exchange_id,sku_id:t.skuId,num:t.number};i.setStorage({key:"exchangeOrderCreateData",data:o,success:function(){t.$util.redirectTo("/promotionpages/point/payment/payment"),t.btnSwitch=!1}})}else"bale"==t.type&&(t.confirmDisabled||(t.btnSwitch=!1,t.goodsSkuDetail?t.$emit("confirm",{detail:t.goodsSkuDetail,goods_id:t.goodsSkuDetail.goods_id,sku_id:t.skuId,num:t.number}):t.$emit("confirm",{detail:t.goodsDetail,goods_id:t.goodsDetail.goods_id,sku_id:t.goodsDetail.sku_id,num:t.number})))}else t.$util.showToast({title:"商品已售罄"})})):this.$refs.login.open()},closeSkuPopup:function(){this.$refs.skuPopup.close()},imageError:function(){this.goodsDetail.sku_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},valueImageError:function(i,t){this.goodsDetail.goods_spec_format[i].value[t].image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},getCartData:function(){var i=this;this.$api.sendRequest({url:"/api/cart/goodsnum",data:{goods_id:this.goodsDetail.goods_id},success:function(t){t.code>=0&&(i.cartNumber=t.data)}})}}};t.default=u}).call(this,e("543d")["default"])},"7a97":function(i,t,e){},"88b6":function(i,t,e){"use strict";e.r(t);var o=e("e0bc"),s=e("0240");for(var a in s)"default"!==a&&function(i){e.d(t,i,(function(){return s[i]}))}(a);e("229c"),e("bf57");var u,n=e("f0c5"),d=Object(n["a"])(s["default"],o["b"],o["c"],!1,null,"05f879e1",null,!1,o["a"],u);t["default"]=d.exports},bf57:function(i,t,e){"use strict";var o=e("3d75"),s=e.n(o);s.a},e0bc:function(i,t,e){"use strict";e.d(t,"b",(function(){return s})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return o}));var o={uniPopup:function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"d7b6"))},nsLogin:function(){return Promise.all([e.e("common/vendor"),e.e("components/ns-login/ns-login")]).then(e.bind(null,"2bc6"))}},s=function(){var i=this,t=i.$createElement,e=(i._self._c,"point"==i.type&&i.goodsDetail.type&&1!=i.goodsDetail.type&&2==i.goodsDetail.type&&i.goodsDetail.image?i.$util.img(i.goodsDetail.image):null),o="point"==i.type&&i.goodsDetail.type&&1!=i.goodsDetail.type&&2==i.goodsDetail.type&&!i.goodsDetail.image?i.$util.img("upload/uniapp/point/coupon.png"):null,s="point"==i.type&&i.goodsDetail.type&&1!=i.goodsDetail.type&&3==i.goodsDetail.type&&i.goodsDetail.image?i.$util.img(i.goodsDetail.image):null,a="point"==i.type&&i.goodsDetail.type&&1!=i.goodsDetail.type&&3==i.goodsDetail.type&&!i.goodsDetail.image?i.$util.img("upload/uniapp/point/hongbao.png"):null,u="point"==i.type&&i.goodsDetail.type&&1!=i.goodsDetail.type?null:i.$util.img(i.goodsDetail.sku_image,{size:"mid"}),n="point"==i.type&&1==i.goodsDetail.type&&"0.00"!=i.goodsDetail.exchange_price&&i.goodsDetail.pay_type>0?i.$lang("common.currencySymbol"):null,d="point"!=i.type&&"presale"!=i.type&&"pintuan"!=i.type&&"groupbuy"!=i.type&&"seckill"!=i.type&&i.goodsDetail.discount_price>0&&i.goodsDetail.member_price?i.showPrice(i.goodsDetail.discount_price):null,l="point"!=i.type&&"presale"!=i.type&&"pintuan"!=i.type&&"groupbuy"!=i.type&&"seckill"!=i.type&&i.goodsDetail.discount_price>0&&i.goodsDetail.member_price?i.showPrice(i.goodsDetail.member_price):null,r="point"!=i.type&&"presale"!=i.type&&"pintuan"!=i.type&&"groupbuy"!=i.type&&"seckill"!=i.type&&i.goodsDetail.discount_price>0&&!i.goodsDetail.member_price?i.showPrice(i.goodsDetail.discount_price):null,g="point"!=i.type&&"presale"!=i.type&&"pintuan"!=i.type&&"groupbuy"!=i.type&&"seckill"!=i.type&&i.goodsDetail.discount_price>0&&!i.goodsDetail.member_price?i.showPrice(i.goodsDetail.price):null,c=i.__map(i.goodsDetail.goods_spec_format,(function(t,e){var o=i.__get_orig(t),s=i.__map(t.value,(function(t,e){var o=i.__get_orig(t),s=t.image?i.$util.img(t.image,{size:"small"}):null;return{$orig:o,g5:s}}));return{$orig:o,l0:s}}));i.$mp.data=Object.assign({},{$root:{g0:e,g1:o,g2:s,g3:a,g4:u,m0:n,m1:d,m2:l,m3:r,m4:g,l1:c}})},a=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/ns-goods-sku/ns-goods-sku-create-component',
    {
        'components/ns-goods-sku/ns-goods-sku-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("88b6"))
        })
    },
    [['components/ns-goods-sku/ns-goods-sku-create-component']]
]);
