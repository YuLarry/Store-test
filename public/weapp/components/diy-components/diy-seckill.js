(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/diy-components/diy-seckill"],{"422f":function(e,t,i){"use strict";i.r(t);var l=i("9c21"),o=i.n(l);for(var a in l)"default"!==a&&function(e){i.d(t,e,(function(){return l[e]}))}(a);t["default"]=o.a},6920:function(e,t,i){},75963:function(e,t,i){"use strict";var l;i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return l}));var o=function(){var e=this,t=e.$createElement,i=(e._self._c,e.isNow&&e.dataList.length&&"row1-of1"==e.value.template?e.__map(e.dataList,(function(t,i){var l=e.__get_orig(t),o=e.$util.img(t.goods_image,{size:"mid"}),a=e.value.progressStyle.control?Math.floor(t.sale_num/(t.goods_stock+t.sale_num)*240):null,s=e.value.progressStyle.control?(t.sale_num/(t.goods_stock+t.sale_num)*100).toFixed(2):null,r=t.seckill_price.split("."),n=t.seckill_price.split(".");return{$orig:l,g0:o,g1:a,g2:s,g3:r,g4:n}})):null),l=e.isNow&&e.dataList.length&&"row1-of2"==e.value.template?e.__map(e.dataList,(function(t,i){var l=e.__get_orig(t),o=e.$util.img(t.goods_image,{size:"mid"}),a=(e.value.goodsNameStyle.control||e.value.priceStyle.mainControl)&&e.value.priceStyle.mainControl?t.seckill_price.split("."):null,s=(e.value.goodsNameStyle.control||e.value.priceStyle.mainControl)&&e.value.priceStyle.mainControl?t.seckill_price.split("."):null;return{$orig:l,g5:o,g6:a,g7:s}})):null,o=e.isNow&&e.dataList.length&&"horizontal-slide"==e.value.template&&"scroll"==e.value.slideMode?e.__map(e.dataList,(function(t,i){var l=e.__get_orig(t),o=e.$util.img(t.goods_image,{size:"mid"}),a=(e.value.goodsNameStyle.control||e.value.priceStyle.mainControl)&&e.value.priceStyle.mainControl?t.seckill_price.split("."):null,s=(e.value.goodsNameStyle.control||e.value.priceStyle.mainControl)&&e.value.priceStyle.mainControl?t.seckill_price.split("."):null;return{$orig:l,g8:o,g9:a,g10:s}})):null,a=e.isNow&&e.dataList.length&&"horizontal-slide"==e.value.template&&"slide"==e.value.slideMode?e.__map(e.page,(function(t,i){var l=e.__get_orig(t),o=e.__map(e.dataList[i],(function(t,i){var l=e.__get_orig(t),o=e.$util.img(t.goods_image,{size:"mid"}),a=(e.value.goodsNameStyle.control||e.value.priceStyle.mainControl)&&e.value.priceStyle.mainControl?t.seckill_price.split("."):null,s=(e.value.goodsNameStyle.control||e.value.priceStyle.mainControl)&&e.value.priceStyle.mainControl?t.seckill_price.split("."):null;return{$orig:l,g11:o,g12:a,g13:s}}));return{$orig:l,l3:o}})):null;e.$mp.data=Object.assign({},{$root:{l0:i,l1:l,l2:o,l4:a}})},a=[]},"90c5":function(e,t,i){"use strict";i.r(t);var l=i("75963"),o=i("422f");for(var a in o)"default"!==a&&function(e){i.d(t,e,(function(){return o[e]}))}(a);i("d949");var s,r=i("f0c5"),n=Object(r["a"])(o["default"],l["b"],l["c"],!1,null,null,null,!1,l["a"],s);t["default"]=n.exports},"9c21":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"diy-seckill",props:{value:{type:Object}},data:function(){return{seckillId:0,index:null,timeList:[],dataList:[],isNow:!1,seckillH:"",seckillI:"",seckillS:"",seckillInterval:null,page:1}},created:function(){var e=this;this.getTimeList(),wx.onAppRoute((function(t){"pages/index/index"==t.path?e.getTimeList():clearInterval(e.seckillInterval)}))},watch:{$route:function(e,t){"/"==e.path||"/pages/index/index"==e.path?this.getTimeList():clearInterval(this.seckillInterval)}},computed:{wrapStyle:function(){var e="background-color:"+this.value.componentBgColor+";";return"round"==this.value.componentAngle&&(e+="border-top-left-radius:"+2*this.value.topAroundRadius+"rpx;",e+="border-top-right-radius:"+2*this.value.topAroundRadius+"rpx;",e+="border-bottom-left-radius:"+2*this.value.bottomAroundRadius+"rpx;",e+="border-bottom-right-radius:"+2*this.value.bottomAroundRadius+"rpx;"),e},titleTimeStyle:function(){var e="background-color:"+this.value.titleStyle.timeBgColor+";";return e+="color:"+this.value.titleStyle.timeTextColor+";",e},goodsItemCss:function(){var t="";t+="background-color:"+this.value.elementBgColor+";","round"==this.value.elementAngle&&(t+="border-top-left-radius:"+2*this.value.topElementAroundRadius+"rpx;",t+="border-top-right-radius:"+2*this.value.topElementAroundRadius+"rpx;",t+="border-bottom-left-radius:"+2*this.value.bottomElementAroundRadius+"rpx;",t+="border-bottom-right-radius:"+2*this.value.bottomElementAroundRadius+"rpx;"),"shadow"==this.value.ornament.type&&(t+="box-shadow:0 0 10rpx "+this.value.ornament.color+";"),"stroke"==this.value.ornament.type&&(t+="border:2rpx solid "+this.value.ornament.color+";");var i=e.getSystemInfoSync().safeArea.width||e.getSystemInfoSync().screenWidth;if("horizontal-slide"==this.value.template){var l="";l="scroll"==this.value.slideMode&&"diy"==this.value.goodsMarginType?this.rpxUpPx(2*this.value.goodsMarginNum):[i-2*this.rpxUpPx(20)-3*this.rpxUpPx(200)-2*this.rpxUpPx(2*this.value.margin.both)]/6,t+="margin-left:"+l+"px;",t+="margin-right:"+l+"px;"}return t},swiperHeight:function(){return"multiple"==this.value.nameLineMode?"shadow"==this.value.ornament.type?"388rpx":"380rpx":"shadow"==this.value.ornament.type?"358rpx":"350rpx"}},methods:{rpxUpPx:function(t){var i=e.getSystemInfoSync().safeArea.width||e.getSystemInfoSync().screenWidth,l=i*parseInt(t)/750;return Math.floor(l)},getTimeList:function(){var e=this;clearInterval(this.seckillInterval),this.seckillId=0,this.isNow=!1,this.seckillH="",this.seckillI="",this.seckillS="",this.$api.sendRequest({url:"/seckill/api/seckill/lists",success:function(t){var i=t.data,l=new Date(1e3*t.timestamp),o=60*l.getHours()*60+60*l.getMinutes()+l.getSeconds();if(i.list instanceof Array)a=i.list;else var a=Object.values(i.list);if(a.forEach((function(t,i){t.seckill_start_time<=o&&o<t.seckill_end_time?(e.seckillId=t.id,e.index=i,e.isNow=!0,t.isNow=!0):t.isNow=!1})),!e.seckillId)for(var s=0;s<a.length;s++)(o<a[s].seckill_start_time&&0==s||o<a[s].seckill_start_time&&o>a[s-1].seckill_end_time&&0!=s||s==a.length-1&&o>a[s].seckill_end_time)&&(e.seckillId=a[s].id,e.index=s);if(e.isNow&&a.length){var r=e;e.seckillInterval=setInterval((function(){var e=new Date,t=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds(),i=r.$util.countDown(a[r.index].seckill_end_time-t);if(r.seckillH=i.h,r.seckillI=i.i,r.seckillS=i.s,"00"==r.seckillH&&"00"==r.seckillI&&"00"==r.seckillS)var l=setTimeout((function(){clearInterval(r.seckillInterval),r.isNow=!1,r.seckillH="",r.seckillI="",r.seckillS="",r.index=1,clearTimeout(l)}),2e3)}),1e3)}e.timeList=a,e.seckillId&&e.getDataList(e.seckillId)}})},getDataList:function(e){var t=this,i=this.value.count;this.$api.sendRequest({url:"/seckill/api/seckillgoods/page",data:{seckill_time_id:e,page_size:i},success:function(e){var i=e.data;if(i.list&&(t.dataList=i.list,"horizontal-slide"==t.value.template&&"slide"==t.value.slideMode)){var l=3,o=[];t.page=Math.ceil(t.dataList.length/l);for(var a=0;a<t.page;a++){o[a]=[];for(var s=a*l;s<t.dataList.length;s++){if(o[a].length==l)break;o[a].push(t.dataList[s])}}t.dataList=o}}})},toDetail:function(e){this.$util.redirectTo("/pages_promotion/seckill/detail",{seckill_id:e})},imageError:function(e){this.dataList[e].goods_image=this.$util.getDefaultImage().goods,this.$forceUpdate()},toMore:function(){this.$util.redirectTo("/pages_promotion/seckill/list")}},onPageHide:function(){clearInterval(this.seckillInterval)}};t.default=i}).call(this,i("543d")["default"])},d949:function(e,t,i){"use strict";var l=i("6920"),o=i.n(l);o.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/diy-components/diy-seckill-create-component',
    {
        'components/diy-components/diy-seckill-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("90c5"))
        })
    },
    [['components/diy-components/diy-seckill-create-component']]
]);
