(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/ns-goods-item/ns-goods-item-row"],{"029b":function(t,e,o){"use strict";o.r(e);var a=o("cd5a"),i=o("2229");for(var u in i)"default"!==u&&function(t){o.d(e,t,(function(){return i[t]}))}(u);o("c076");var n,s=o("f0c5"),r=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],n);e["default"]=r.exports},2229:function(t,e,o){"use strict";o.r(e);var a=o("712f"),i=o.n(a);for(var u in a)"default"!==u&&function(t){o.d(e,t,(function(){return a[t]}))}(u);e["default"]=i.a},"4cd4":function(t,e,o){},"712f":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=u(o("a34a")),i=(u(o("a207")),u(o("ccd8")));u(o("df06"));function u(t){return t&&t.__esModule?t:{default:t}}function n(t,e,o,a,i,u,n){try{var s=t[u](n),r=s.value}catch(d){return void o(d)}s.done?e(r):Promise.resolve(r).then(a,i)}function s(t){return function(){var e=this,o=arguments;return new Promise((function(a,i){var u=t.apply(e,o);function s(t){n(u,a,i,s,r,"next",t)}function r(t){n(u,a,i,s,r,"throw",t)}s(void 0)}))}}var r=function(){Promise.all([o.e("common/vendor"),o.e("components/ns-goods-sku/ns-goods-sku-new")]).then(function(){return resolve(o("fb55"))}.bind(null,o)).catch(o.oe)},d={components:{nsGoodsSkuNew:r},name:"ns-goods-item-row",props:{value:{type:Array},type:{type:String,default:"default"},showInfor:{type:Object,default:function(){return{isShowCart:!1,isShowGoodName:1,isShowGoodSaleNum:1,isShowGoodSubTitle:0,isShowMarketPrice:1,recommend_way:0}}}},mixins:[i.default],data:function(){return{skuId:0,goodsSkuDetail:{goods_id:0,goods_service:[]},routeIdent:!1,join_cart:"join_cart"}},created:function(){var t=getCurrentPages(),e=t[t.length-1].route;this.routeIdent="pages/index/index/index"==e;for(var o=0;o<this.value.length;o++)this.value[o].goods_image&&(this.value[o].goods_image=this.value[o].goods_image.split(",")[0]);var a=getCurrentPages()[getCurrentPages().length-1];this.currentRoute="/"+a.route},onShow:function(){var e=this;return s(a.default.mark((function o(){return a.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.token=t.getStorageSync("token"),""!=e.token&&0==e.preview&&(e.getCartCount(),e.getMemberId());case 2:case"end":return o.stop()}}),o)})))()},methods:{toDetail:function(t){this.$emit("toDetail",t)},imageError:function(t){this.value[t].goods_image?this.value[t].goods_image=this.$util.getDefaultImage().default_goods_img:this.value[t].sku_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},getGoodsSkuDetail:function(e){var o=this;return s(a.default.mark((function i(){var u,n,s,r,d;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.getStorageSync("token")){a.next=3;break}return o.$refs.login.open(o.currentRoute),a.abrupt("return",!1);case 3:return a.next=5,o.$api.sendRequest({url:"/api/goodssku/detail",async:!1,data:{sku_id:e}});case 5:if(u=a.sent,n=u.data,null!=n.goods_sku_detail){if(o.goodsSkuDetail=n.goods_sku_detail,o.goodsSkuDetail.preview=o.preview,0==o.skuId&&(o.skuId=o.goodsSkuDetail.sku_id),o.goodsSkuDetail.video_url&&(o.switchMedia="video"),o.goodsSkuDetail.sku_images?o.goodsSkuDetail.sku_images=o.goodsSkuDetail.sku_images.split(","):o.goodsSkuDetail.sku_images=[],o.goodsSkuDetail.goods_spec_format&&o.goodsSkuDetail.goods_image&&(o.goodsSkuDetail.goods_image=o.goodsSkuDetail.goods_image.split(","),o.goodsSkuDetail.sku_images=o.goodsSkuDetail.sku_images.concat(o.goodsSkuDetail.goods_image)),o.goodsSkuDetail.unit=o.goodsSkuDetail.unit||"件",o.goodsSkuDetail.show_price=o.goodsSkuDetail.discount_price,o.goodsSkuDetail.sku_spec_format&&(o.goodsSkuDetail.sku_spec_format=JSON.parse(o.goodsSkuDetail.sku_spec_format)),o.goodsSkuDetail.goods_attr_format)for(s=JSON.parse(o.goodsSkuDetail.goods_attr_format),o.goodsSkuDetail.goods_attr_format=JSON.parse(o.goodsSkuDetail.goods_attr_format),o.goodsSkuDetail.goods_attr_format=o.$util.unique(o.goodsSkuDetail.goods_attr_format,"attr_id"),r=0;r<o.goodsSkuDetail.goods_attr_format.length;r++)for(d=0;d<s.length;d++)o.goodsSkuDetail.goods_attr_format[r].attr_id==s[d].attr_id&&o.goodsSkuDetail.goods_attr_format[r].attr_value_id!=s[d].attr_value_id&&(o.goodsSkuDetail.goods_attr_format[r].attr_value_name+="、"+s[d].attr_value_name);o.goodsSkuDetail.goods_spec_format&&(o.goodsSkuDetail.goods_spec_format=JSON.parse(o.goodsSkuDetail.goods_spec_format)),o.contactData={title:o.goodsSkuDetail.sku_name,path:"/pages/goods/detail/detail?sku_id="+o.skuId,img:o.$util.img(o.goodsSkuDetail.sku_image,{size:"big"})},o.$refs.goodSkuNew.show("join_cart",o.goodsSkuDetail,(function(){o.getCartCount()}))}else o.$util.redirectTo("/pages/index/index/index",{},"reLaunch");case 8:case"end":return a.stop()}}),i)})))()},refreshGoodsSkuDetail:function(t){Object.assign(this.goodsSkuDetail,t)},getCartCount:function(){var t=this;this.$store.dispatch("getCartNumber").then((function(e){t.cartCount=e}))}},watch:{value:function(){for(var t=0;t<this.value.length;t++)this.value[t].goods_image&&(this.value[t].goods_image=this.value[t].goods_image.split(",")[0])}}};e.default=d}).call(this,o("543d")["default"])},c076:function(t,e,o){"use strict";var a=o("4cd4"),i=o.n(a);i.a},cd5a:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return u})),o.d(e,"a",(function(){return a}));var a={nsLogin:function(){return Promise.all([o.e("common/vendor"),o.e("components/ns-login/ns-login")]).then(o.bind(null,"2e9e"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,"topicsList"==t.type?t.$lang("common.currencySymbol"):null),a="topicsList"==t.type?t.$lang("common.currencySymbol"):null,i=t.__map(t.value,(function(e,o){var a=t.__get_orig(e),i=e.goods_image?t.$util.img(e.goods_image,{size:"mid"}):null,u=e.goods_image?null:t.$util.img(e.sku_image,{size:"mid"}),n="default"==t.type&&1==e.promotion_type&&e.member_price>0?t.$util.img("upload/uniapp/index/discount.png"):null,s="default"==t.type&&1==e.promotion_type&&e.member_price>0?t.$util.img("upload/uniapp/index/VIP.png"):null,r="default"!=t.type||1!=e.promotion_type||e.member_price>0?null:t.$util.img("upload/uniapp/index/discount.png"),d="default"==t.type&&1!=e.promotion_type&&e.member_price>0?t.$util.img("upload/uniapp/index/VIP.png"):null;return{$orig:a,g0:i,g1:u,g2:n,g3:s,g4:r,g5:d}}));t.$mp.data=Object.assign({},{$root:{m0:o,m1:a,l0:i}})},u=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/ns-goods-item/ns-goods-item-row-create-component',
    {
        'components/ns-goods-item/ns-goods-item-row-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("029b"))
        })
    },
    [['components/ns-goods-item/ns-goods-item-row-create-component']]
]);
