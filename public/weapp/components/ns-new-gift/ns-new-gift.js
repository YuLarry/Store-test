(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/ns-new-gift/ns-new-gift"],{"03323":function(e,t,n){},"1f5e":function(e,t,n){"use strict";n.r(t);var a=n("5ab1"),i=n("fa76");for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("7b8c"),n("9862");var u,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"466191e4",null,!1,a["a"],u);t["default"]=c.exports},2133:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("a34a"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,a,i,r,u){try{var o=e[r](u),c=o.value}catch(f){return void n(f)}o.done?t(c):Promise.resolve(c).then(a,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var u=e.apply(t,n);function o(e){r(u,a,i,o,c,"next",e)}function c(e){r(u,a,i,o,c,"throw",e)}o(void 0)}))}}var o=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("2d2c"))}.bind(null,n)).catch(n.oe)},c={components:{uniPopup:o},data:function(){return{newgift:{flag:!1,award_list:{point:0,coupon_list:{}},remark:{}},userInfo:"",bgHight:"940rpx !important",bytesCount:null,leatGift:!1}},filters:{int:function(e){var t=String(e),n=t.split(".");return parseInt(n[1])>0?t:n[0]}},computed:{introduction:function(){for(var e=0,t=0,n=this.newgift.remark.length;t<n;t++){var a=this.newgift.remark.charCodeAt(t);e+=a>=1&&a<=126||65376<=a&&a<=65439?1:2}return e}},created:function(){var e=this;return u(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getHolidayGift();case 2:case"end":return t.stop()}}),t)})))()},methods:{getReward:function(){return this.birthday},open:function(){var e=this;return u(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.leatGift){t.next=8;break}return e.$refs.nsNewGift.open(),t.next=4,e.getusername();case 4:return t.next=6,e.getGift();case 6:t.next=15;break;case 8:return t.next=10,e.getusername();case 10:return t.next=12,e.getHolidayGift();case 12:return t.next=14,e.getGift();case 14:e.$refs.nsNewGift.open();case 15:case"end":return t.stop()}}),t)})))()},cancel:function(){this.$refs.nsNewGift.close()},getusername:function(){var t=this;return u(a.default.mark((function n(){var i;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.userInfo=e.getStorageSync("userInfo"),n.next=3,t.$api.sendRequest({url:"/api/member/info",async:!1});case 3:i=n.sent,i.code>=0&&i.data&&(t.token=e.getStorageSync("token"),t.userInfo=i.data,e.setStorageSync("userInfo",t.memberInfo));case 5:case"end":return n.stop()}}),n)})))()},getHolidayGift:function(){var t=this;return u(a.default.mark((function n(){var i;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$api.sendRequest({url:"/scenefestival/api/config/config",async:!1});case 2:i=n.sent,i.data[0]&&(t.newgift=i.data[0],t.leatGift=!0),i.data[0]&&t.newgift.award_list.award_type.length<=1&&(t.bgHight="800rpx !important"),i.data[0]&&e.setStorageSync("newgiftflag",i.data[0].flag);case 6:case"end":return n.stop()}}),n)})))()},getGift:function(){var t=this;return u(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(t.newgift.flag,"*******"),1!=t.newgift.flag){n.next=4;break}return n.next=4,t.$api.sendRequest({url:"/scenefestival/api/config/receive",data:{festival_id:t.newgift.festival_id},success:function(n){n.code>=0&&(t.$emit("getData"),e.removeStorageSync("newgiftflag"),t.$util.redirectTo("/pages/member/index/index",{},"reLaunch"))}});case 4:case"end":return n.stop()}}),n)})))()},closeRewardPopup:function(e){1!=e?2!=e?3!=e||this.$util.redirectTo("/otherpages/member/coupon/coupon",{}):this.$util.redirectTo("/otherpages/member/balance_detail/balance_detail",{}):this.$util.redirectTo("/otherpages/member/point_detail/point_detail",{})}}};t.default=c}).call(this,n("543d")["default"])},"5ab1":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));var a={uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"2d2c"))}},i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.newgift?e.$util.img("upload/uniapp/holiday_polite-bg.png"):null),a=e.newgift?e.$util.img("upload/uniapp/holiday_polite_left.png"):null,i=e.newgift?e.$util.img("upload/uniapp/holiday_polite_right.png"):null,r=e.newgift&&0==e.newgift.award_list.balance_type&&e.newgift.award_list.balance>0?e._f("int")(e.newgift.award_list.balance):null,u=e.newgift&&1==e.newgift.award_list.balance_type&&e.newgift.award_list.balance_money>0?e._f("int")(e.newgift.award_list.balance_money):null,o=e.newgift&&e.newgift.award_list.coupon_list.length>0?e.__map(e.newgift.award_list.coupon_list,(function(t,n){var a=e.__get_orig(t),i="reward"==t.type?parseFloat(t.money):null,r="reward"!=t.type&&"discount"==t.type?e._f("int")(t.discount):null;return{$orig:a,m0:i,f2:r}})):null;e.$mp.data=Object.assign({},{$root:{g0:n,g1:a,g2:i,f0:r,f1:u,l0:o}})},r=[]},"7b8c":function(e,t,n){"use strict";var a=n("da486"),i=n.n(a);i.a},9862:function(e,t,n){"use strict";var a=n("03323"),i=n.n(a);i.a},da486:function(e,t,n){},fa76:function(e,t,n){"use strict";n.r(t);var a=n("2133"),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=i.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/ns-new-gift/ns-new-gift-create-component',
    {
        'components/ns-new-gift/ns-new-gift-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("1f5e"))
        })
    },
    [['components/ns-new-gift/ns-new-gift-create-component']]
]);
