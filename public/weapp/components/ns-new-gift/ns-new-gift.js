(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/ns-new-gift/ns-new-gift"],{2381:function(t,e,n){"use strict";n.r(e);var a=n("f841f"),i=n("dc84");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("6001"),n("99f6");var u,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"49585ac4",null,!1,a["a"],u);e["default"]=c.exports},6001:function(t,e,n){"use strict";var a=n("6168"),i=n.n(a);i.a},6168:function(t,e,n){},"99f6":function(t,e,n){"use strict";var a=n("b35f"),i=n.n(a);i.a},b35f:function(t,e,n){},c2cc1:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("a34a"));function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,a,i,r,u){try{var o=t[r](u),c=o.value}catch(f){return void n(f)}o.done?e(c):Promise.resolve(c).then(a,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var u=t.apply(e,n);function o(t){r(u,a,i,o,c,"next",t)}function c(t){r(u,a,i,o,c,"throw",t)}o(void 0)}))}}var o=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("92aa"))}.bind(null,n)).catch(n.oe)},c={components:{uniPopup:o},data:function(){return{newgift:{flag:!1,award_list:{point:0,coupon_list:{}},remark:{}},userInfo:"",bgHight:"940rpx !important",bytesCount:null,leatGift:!1}},filters:{int:function(t){var e=String(t),n=e.split(".");return parseInt(n[1])>0?e:n[0]}},computed:{introduction:function(){for(var t=0,e=0,n=this.newgift.remark.length;e<n;e++){var a=this.newgift.remark.charCodeAt(e);t+=a>=1&&a<=126||65376<=a&&a<=65439?1:2}return t}},created:function(){var t=this;return u(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getHolidayGift();case 2:case"end":return e.stop()}}),e)})))()},methods:{getReward:function(){return this.birthday},open:function(){var t=this;return u(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.leatGift){e.next=8;break}return t.$refs.nsNewGift.open(),e.next=4,t.getusername();case 4:return e.next=6,t.getGift();case 6:e.next=15;break;case 8:return e.next=10,t.getusername();case 10:return e.next=12,t.getHolidayGift();case 12:return e.next=14,t.getGift();case 14:t.$refs.nsNewGift.open();case 15:case"end":return e.stop()}}),e)})))()},cancel:function(){this.$refs.nsNewGift.close()},getusername:function(){var e=this;return u(a.default.mark((function n(){var i;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.userInfo=t.getStorageSync("userInfo"),n.next=3,e.$api.sendRequest({url:"/api/member/info",async:!1});case 3:i=n.sent,i.code>=0&&i.data&&(e.token=t.getStorageSync("token"),e.userInfo=i.data,t.setStorageSync("userInfo",e.memberInfo));case 5:case"end":return n.stop()}}),n)})))()},getHolidayGift:function(){var e=this;return u(a.default.mark((function n(){var i;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$api.sendRequest({url:"/scenefestival/api/config/config",async:!1});case 2:i=n.sent,i.data[0]&&(e.newgift=i.data[0],e.leatGift=!0),i.data[0]&&e.newgift.award_list.award_type.length<=1&&(e.bgHight="800rpx !important"),i.data[0]&&t.setStorageSync("newgiftflag",i.data[0].flag);case 6:case"end":return n.stop()}}),n)})))()},getGift:function(){var e=this;return u(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(1!=e.newgift.flag){n.next=3;break}return n.next=3,e.$api.sendRequest({url:"/scenefestival/api/config/receive",data:{festival_id:e.newgift.festival_id},success:function(n){n.code>=0&&(e.$emit("getData"),t.removeStorageSync("newgiftflag"),e.$util.redirectTo("/pages/member/index",{},"reLaunch"))}});case 3:case"end":return n.stop()}}),n)})))()},closeRewardPopup:function(t){1!=t?2!=t?3!=t||this.$util.redirectTo("/pages_tool/member/coupon",{}):this.$util.redirectTo("/pages_tool/member/balance_detail",{}):this.$util.redirectTo("/pages_tool/member/point_detail",{})}}};e.default=c}).call(this,n("543d")["default"])},dc84:function(t,e,n){"use strict";n.r(e);var a=n("c2cc1"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},f841f:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"92aa"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.newgift?t.$util.img("public/uniapp/new_gift/holiday_polite-bg.png"):null),a=t.newgift?t.$util.img("public/uniapp/new_gift/holiday_polite_left.png"):null,i=t.newgift?t.$util.img("public/uniapp/new_gift/holiday_polite_right.png"):null,r=t.newgift&&0==t.newgift.award_list.balance_type&&t.newgift.award_list.balance>0?t._f("int")(t.newgift.award_list.balance):null,u=t.newgift&&1==t.newgift.award_list.balance_type&&t.newgift.award_list.balance_money>0?t._f("int")(t.newgift.award_list.balance_money):null,o=t.newgift&&t.newgift.award_list.coupon_list.length>0?t.__map(t.newgift.award_list.coupon_list,(function(e,n){var a=t.__get_orig(e),i="reward"==e.type?parseFloat(e.money):null,r="reward"!=e.type&&"discount"==e.type?t._f("int")(e.discount):null;return{$orig:a,m0:i,f2:r}})):null;t.$mp.data=Object.assign({},{$root:{g0:n,g1:a,g2:i,f0:r,f1:u,l0:o}})},r=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/ns-new-gift/ns-new-gift-create-component',
    {
        'components/ns-new-gift/ns-new-gift-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("2381"))
        })
    },
    [['components/ns-new-gift/ns-new-gift-create-component']]
]);
