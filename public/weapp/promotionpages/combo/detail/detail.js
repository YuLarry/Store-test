(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["promotionpages/combo/detail/detail"],{"1f24":function(n,t,e){"use strict";var i=e("696f"),o=e.n(i);o.a},"31b1":function(n,t,e){"use strict";e.r(t);var i=e("6d6f"),o=e.n(i);for(var a in i)"default"!==a&&function(n){e.d(t,n,(function(){return i[n]}))}(a);t["default"]=o.a},4811:function(n,t,e){},5335:function(n,t,e){"use strict";e.r(t);var i=e("cdfa"),o=e("31b1");for(var a in o)"default"!==a&&function(n){e.d(t,n,(function(){return o[n]}))}(a);e("c922"),e("1f24");var r,u=e("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"c1f94eec",null,!1,i["a"],r);t["default"]=c.exports},"696f":function(n,t,e){},"6d6f":function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(e("a34a")),o=a(e("c409"));function a(n){return n&&n.__esModule?n:{default:n}}function r(n,t,e,i,o,a,r){try{var u=n[a](r),c=u.value}catch(s){return void e(s)}u.done?t(c):Promise.resolve(c).then(i,o)}function u(n){return function(){var t=this,e=arguments;return new Promise((function(i,o){var a=n.apply(t,e);function u(n){r(a,i,o,u,c,"next",n)}function c(n){r(a,i,o,u,c,"throw",n)}u(void 0)}))}}var c={data:function(){return{num:1,blId:0,combo:[],packagePrice:[],saveThePrice:0,isDisabled:!1,isIphoneX:!1}},mixins:[o.default],onLoad:function(n){this.blId=n.bl_id||0,this.isIphoneX=this.$util.uniappIsIPhoneX()},onShow:function(){var n=this;if(!this.addonIsExit.bundling)return this.$util.showToast({title:"商家未开启组合套餐",mask:!0,duration:2e3}),void setTimeout((function(){n.$util.redirectTo("/pages/index/index/index",{},"redirectTo")}),2e3);this.$langConfig.refresh(),this.getDetail()},onHide:function(){this.btnSwitch=!0},methods:{getDetail:function(){var n=this;this.$api.sendRequest({url:"/bundling/api/bundling/detail",data:{bl_id:this.blId},success:function(t){t.data?(n.combo=t.data,n.numberChange()):n.$util.showToast({title:t.message}),n.$refs.loadingCover&&n.$refs.loadingCover.hide()},fail:function(t){n.$refs.loadingCover&&n.$refs.loadingCover.hide()}})},toGoodsDetail:function(n){this.$util.redirectTo("/pages/goods/detail/detail",{sku_id:n})},numberChange:function(n,t){var e=this;setTimeout((function(){var i=0;n&&0==e.num.length&&(e.num=1,i++),n&&(e.num<=0||isNaN(e.num))&&(e.number=1,i++),n&&(e.num=parseInt(e.num));for(var o=0,a=0;a<e.combo.bundling_goods.length;a++)o+=parseFloat(e.combo.bundling_goods[a].price),e.combo.bundling_goods[a].stock<e.num&&i++;e.isDisabled=!(i>0),e.saveThePrice=((o-e.combo.bl_price)*e.num).toFixed(2),e.packagePrice=(e.combo.bl_price*e.num).toFixed(2),t&&t()}),0)},comboBuy:function(){var t=this;return u(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isDisabled){e.next=2;break}return e.abrupt("return");case 2:t.numberChange(!0,(function(){if(n.getStorageSync("token")){if(0!=t.btnSwitch){t.btnSwitch=!1;var e={bl_id:t.blId,num:t.num};n.setStorage({key:"comboOrderCreateData",data:e,success:function(){t.$util.redirectTo("/promotionpages/combo/payment/payment"),t.btnSwitch=!0}})}}else t.$refs.login.open("/promotionpages/combo/detail/detail?bl_id="+t.blId)}));case 3:case"end":return e.stop()}}),e)})))()},imageError:function(n){this.combo.bundling_goods[n].sku_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()}},onShareAppMessage:function(n){var t="购买套餐，优惠多多哦",e="/promotionpages/combo/detail/detail?bl_id="+this.blId;return{title:t,path:e,success:function(n){},fail:function(n){}}}};t.default=c}).call(this,e("543d")["default"])},c922:function(n,t,e){"use strict";var i=e("4811"),o=e.n(i);o.a},cdfa:function(n,t,e){"use strict";e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return i}));var i={loadingCover:function(){return e.e("components/loading-cover/loading-cover").then(e.bind(null,"790a"))},nsLogin:function(){return Promise.all([e.e("common/vendor"),e.e("components/ns-login/ns-login")]).then(e.bind(null,"2893"))}},o=function(){var n=this,t=n.$createElement,e=(n._self._c,n.$lang("common.currencySymbol")),i=n.__map(n.combo.bundling_goods,(function(t,e){var i=n.__get_orig(t),o=n.$util.img(t.sku_image,{size:"mid"});return{$orig:i,g0:o}})),o=n.$lang("common.currencySymbol");n.$mp.data=Object.assign({},{$root:{m0:e,l0:i,m1:o}})},a=[]},e106:function(n,t,e){"use strict";(function(n){e("34b0");i(e("66fd"));var t=i(e("5335"));function i(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("543d")["createPage"])}},[["e106","common/runtime","common/vendor"]]]);