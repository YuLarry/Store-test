(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["promotionpages/point/list/list"],{"05bf":function(n,t,o){"use strict";(function(n){o("5558");e(o("66fd"));var t=e(o("43a1"));function e(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,o("543d")["createPage"])},"13d3":function(n,t,o){},3496:function(n,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return u})),o.d(t,"a",(function(){return e}));var e={nsEmpty:function(){return o.e("components/ns-empty/ns-empty").then(o.bind(null,"1928"))},uniPopup:function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"1fce"))},loadingCover:function(){return o.e("components/loading-cover/loading-cover").then(o.bind(null,"30be"))},nsLogin:function(){return Promise.all([o.e("common/vendor"),o.e("components/ns-login/ns-login")]).then(o.bind(null,"2e9e"))},nsShowToast:function(){return Promise.all([o.e("common/vendor"),o.e("components/ns-show-toast/ns-show-toast")]).then(o.bind(null,"691c"))}},i=function(){var n=this,t=n.$createElement,o=(n._self._c,n.isLogin?n.$util.img("/upload/uniapp/point/point-shop.png"):null),e=n.isLogin&&n.point?parseInt(n.point):null,i=n.isLogin?null:n.$util.img("/upload/uniapp/point/point_01.png"),u=n.__map(n.goodsList,(function(t,o){var e=n.__get_orig(t),i=2==t.type?n.$util.img(t.image):null,u=2==t.type&&i?n.$util.img(t.image):null,s=2!=t.type||i?null:n.$util.img("upload/uniapp/point/coupon.png"),a=2!=t.type&&3==t.type?n.$util.img(t.image):null,l=2!=t.type&&3==t.type&&a?n.$util.img(t.image):null,c=2==t.type||3!=t.type||a?null:n.$util.img("upload/uniapp/point/hongbao.png"),r=2!=t.type&&3!=t.type?n.$util.img(t.image):null,p="0.00"!==t.price?n.$lang("common.currencySymbol"):null;return{$orig:e,g2:i,g3:u,g4:s,g5:a,g6:l,g7:c,g8:r,m1:p}}));n.$mp.data=Object.assign({},{$root:{g0:o,m0:e,g1:i,l0:u}})},u=[]},"43a1":function(n,t,o){"use strict";o.r(t);var e=o("3496"),i=o("c00d");for(var u in i)"default"!==u&&function(n){o.d(t,n,(function(){return i[n]}))}(u);o("bd73");var s,a=o("f0c5"),l=Object(a["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],s);t["default"]=l.exports},"4fd0":function(n,t,o){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(o("ccd8"));function i(n){return n&&n.__esModule?n:{default:n}}var u=function(){o.e("components/uni-popup/uni-popup").then(function(){return resolve(o("1fce"))}.bind(null,o)).catch(o.oe)},s=function(){Promise.all([o.e("common/vendor"),o.e("components/ns-show-toast/ns-show-toast")]).then(function(){return resolve(o("691c"))}.bind(null,o)).catch(o.oe)},a={components:{uniPopup:u,nsShowToast:s},data:function(){return{mescroll:null,categoryList:[{id:1,name:"商品"},{id:2,name:"优惠券"},{id:3,name:"红包"}],selectCategoryId:1,goodsList:[],isLogin:!1,point:0}},onLoad:function(n){},mixins:[e.default],onShow:function(){var n=this;if(!this.addonIsExit.pointexchange)return this.$util.showToast({title:"商家未开启积分商城",mask:!0,duration:2e3}),void setTimeout((function(){n.$util.redirectTo("/pages/index/index/index",{},"redirectTo")}),2e3);this.getAccountInfo(),this.$langConfig.refresh()},computed:{storeToken:function(){return this.$store.state.token}},watch:{storeToken:function(n,t){n&&this.getAccountInfo()}},methods:{jumpPage:function(n){this.$util.redirectTo(n)},openPointPopup:function(){this.$refs.pointPopup.open()},closePointPopup:function(){this.$refs.pointPopup.close()},getData:function(n){var t=this;this.mescroll=n,this.$api.sendRequest({url:"/pointexchange/api/goods/page",data:{page_size:n.size,page:n.num,type:this.selectCategoryId},success:function(o){var e=[],i=o.message;0==o.code&&o.data?e=o.data.list:t.$util.showToast({title:i}),n.endSuccess(e.length),1==n.num&&(t.goodsList=[]),t.goodsList=t.goodsList.concat(e),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(){n.endErr(),this.$refs.loadingCover&&this.$refs.loadingCover.hide()}})},categoryChange:function(n){this.selectCategoryId=n,this.mescroll.resetUpScroll()},toDetail:function(n,t){this.$util.redirectTo("/promotionpages/point/detail/detail",{id:n.id})},getAccountInfo:function(){var t=this;n.getStorageSync("token")?(this.isLogin=!0,this.$api.sendRequest({url:"/api/memberaccount/info",data:{account_type:"point"},success:function(n){0==n.code&&n.data?t.point=n.data.point:t.$util.showToast({title:n.message})}})):this.isLogin=!1},login:function(){this.$refs.login.open("/promotionpages/point/list/list")},imageError:function(n){this.goodsList[n].image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()}},onShareAppMessage:function(n){var t="积分兑换，好礼带回家哦",o="/promotionpages/point/list/list";return{title:t,path:o,success:function(n){},fail:function(n){}}}};t.default=a}).call(this,o("543d")["default"])},bd73:function(n,t,o){"use strict";var e=o("13d3"),i=o.n(e);i.a},c00d:function(n,t,o){"use strict";o.r(t);var e=o("4fd0"),i=o.n(e);for(var u in e)"default"!==u&&function(n){o.d(t,n,(function(){return e[n]}))}(u);t["default"]=i.a}},[["05bf","common/runtime","common/vendor"]]]);