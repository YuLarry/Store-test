(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["promotionpages/point/detail/detail"],{"3f76":function(n,o,t){"use strict";t.r(o);var i=t("f1b4"),e=t("a3ef");for(var u in e)"default"!==u&&function(n){t.d(o,n,(function(){return e[n]}))}(u);t("555d"),t("c90d");var p,a=t("f0c5"),s=Object(a["a"])(e["default"],i["b"],i["c"],!1,null,"469cff64",null,!1,i["a"],p);o["default"]=s.exports},"555d":function(n,o,t){"use strict";var i=t("f2a7"),e=t.n(i);e.a},"91d5":function(n,o,t){"use strict";(function(n){t("5558");i(t("66fd"));var o=i(t("3f76"));function i(n){return n&&n.__esModule?n:{default:n}}n(o.default)}).call(this,t("543d")["createPage"])},a3ef:function(n,o,t){"use strict";t.r(o);var i=t("b73c"),e=t.n(i);for(var u in i)"default"!==u&&function(n){t.d(o,n,(function(){return i[n]}))}(u);o["default"]=e.a},b701:function(n,o,t){},b73c:function(n,o,t){"use strict";(function(n){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=p(t("df06")),e=p(t("ccd8")),u=p(t("dada"));function p(n){return n&&n.__esModule?n:{default:n}}var a=function(){t.e("components/uni-popup/uni-popup").then(function(){return resolve(t("1fce"))}.bind(null,t)).catch(t.oe)},s=function(){t.e("components/uni-number-box/uni-number-box").then(function(){return resolve(t("2520"))}.bind(null,t)).catch(t.oe)},f=function(){t.e("components/ns-goods-sku/ns-goods-sku").then(function(){return resolve(t("008f"))}.bind(null,t)).catch(t.oe)},r=function(){t.e("components/toTop/toTop").then(function(){return resolve(t("1051"))}.bind(null,t)).catch(t.oe)},c={components:{uniPopup:a,uniNumberBox:s,nsGoodsSku:f,toTop:r},data:function(){return{id:0,pointInfo:{image:""},isIphoneX:!1,isLogin:!1,memberPoint:0}},mixins:[e.default,u.default],onLoad:function(n){this.isIphoneX=this.$util.uniappIsIPhoneX(),n.id?(this.id=n.id,this.getPointInfo()):this.$util.redirectTo("/promotionpages/point/list/list",{},"redirectTo")},onShow:function(){this.$langConfig.refresh()},computed:{storeToken:function(){return this.$store.state.token},enough:function(){return parseInt(this.pointInfo.point)>parseInt(this.memberPoint)}},watch:{storeToken:function(n,o){n&&(this.isLogin=!0,this.getPointInfo())}},methods:{getAccountInfo:function(o,t){var i=this;n.getStorageSync("token")?this.$api.sendRequest({url:"/api/memberaccount/info",data:{account_type:"point"},success:function(n){if(0==n.code&&n.data){i.isLogin=!0,i.memberPoint=n.data.point;var e=Math.floor(parseInt(n.data.point)/t);i.Max=o>=e?e:o}else i.$util.showToast({title:n.message});i.$refs.loadingCover&&i.$refs.loadingCover.hide()}}):(this.isLogin=!1,this.$refs.loadingCover&&this.$refs.loadingCover.hide())},getPointInfo:function(){var n=this;this.$api.sendRequest({url:"/pointexchange/api/goods/detail",data:{id:this.id},success:function(o){if(o.code>=0&&0!==o.data.length){n.pointInfo=o.data,n.$langConfig.title(n.pointInfo.name);var t=2==n.pointInfo.type?n.pointInfo.count:n.pointInfo.stock;if(1==n.pointInfo.type){if(n.pointInfo.image=n.pointInfo["sku_image"],n.pointInfo.sku_spec_format&&(n.pointInfo.sku_spec_format=JSON.parse(n.pointInfo.sku_spec_format)),n.pointInfo.goods_attr_format){var e=JSON.parse(n.pointInfo.goods_attr_format);n.pointInfo.goods_attr_format=n.$util.unique(e,"attr_id");for(var u=0;u<n.pointInfo.goods_attr_format.length;u++)for(var p=0;p<e.length;p++)n.pointInfo.goods_attr_format[u].attr_id==e[p].attr_id&&n.pointInfo.goods_attr_format[u].attr_value_id!=e[p].attr_value_id&&(n.pointInfo.goods_attr_format[u].attr_value_name+="、"+e[p].attr_value_name)}n.pointInfo.goods_spec_format&&(n.pointInfo.goods_spec_format=JSON.parse(n.pointInfo.goods_spec_format))}n.pointInfo.unit=n.pointInfo.unit||"件",n.pointInfo.content&&(n.pointInfo.content=(0,i.default)(n.pointInfo.content)),n.getAccountInfo(t,n.pointInfo.point)}else n.$util.showToast({title:o.message}),setTimeout((function(){n.$util.redirectTo("/promotionpages/point/list/list",{},"redirectTo")}),1e3)}})},exchange:function(){n.getStorageSync("token")?this.$refs.goodsSku.show("point"):this.$refs.login.open("/promotionpages/point/detail/detail?id="+this.id)},refreshGoodsSkuDetail:function(n){Object.assign(this.pointInfo,n),this.pointInfo.unit=this.pointInfo.unit||"件"},openMerchantsServicePopup:function(){this.$refs.merchantsServicePopup.open()},closeMerchantsServicePopup:function(){this.$refs.merchantsServicePopup.close()},openAttributePopup:function(){this.$refs.attributePopup.open()},closeAttributePopup:function(){this.$refs.attributePopup.close()},imageError:function(){this.pointInfo.image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()}}};o.default=c}).call(this,t("543d")["default"])},c90d:function(n,o,t){"use strict";var i=t("b701"),e=t.n(i);e.a},f1b4:function(n,o,t){"use strict";t.d(o,"b",(function(){return e})),t.d(o,"c",(function(){return u})),t.d(o,"a",(function(){return i}));var i={uniPopup:function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"1fce"))},nsGoodsSku:function(){return t.e("components/ns-goods-sku/ns-goods-sku").then(t.bind(null,"008f"))},loadingCover:function(){return t.e("components/loading-cover/loading-cover").then(t.bind(null,"30be"))},nsLogin:function(){return Promise.all([t.e("common/vendor"),t.e("components/ns-login/ns-login")]).then(t.bind(null,"2e9e"))}},e=function(){var n=this,o=n.$createElement,t=(n._self._c,2==n.pointInfo.type&&n.pointInfo.image?n.$util.img(n.pointInfo.image):null),i=2!=n.pointInfo.type||n.pointInfo.image?null:n.$util.img("upload/uniapp/point/coupon.png"),e=2==n.pointInfo.type?n.$util.img("upload/uniapp/point/coupon.png"):null,u=2!=n.pointInfo.type&&3==n.pointInfo.type&&n.pointInfo.image?n.$util.img(n.pointInfo.image):null,p=2==n.pointInfo.type||3!=n.pointInfo.type||n.pointInfo.image?null:n.$util.img("upload/uniapp/point/hongbao.png"),a=2!=n.pointInfo.type&&3==n.pointInfo.type?n.$util.img("upload/uniapp/point/hongbao.png"):null,s=2!=n.pointInfo.type&&3!=n.pointInfo.type?n.$util.img(n.pointInfo.image):null,f="0.00"!=n.pointInfo.exchange_price&&n.pointInfo.pay_type>0?n.$lang("common.currencySymbol"):null,r=n.pointInfo.price?n.$lang("common.currencySymbol"):null,c=n.pointInfo.coupon_type&&1!=n.pointInfo.validity_type?n.$util.timeStampTurnTime(n.pointInfo.end_time):null;n.$mp.data=Object.assign({},{$root:{g0:t,g1:i,g2:e,g3:u,g4:p,g5:a,g6:s,m0:f,m1:r,g7:c}})},u=[]},f2a7:function(n,o,t){}},[["91d5","common/runtime","common/vendor"]]]);