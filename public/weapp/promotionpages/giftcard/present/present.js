(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["promotionpages/giftcard/present/present"],{"0b3c":function(e,t,n){"use strict";n.r(t);var i=n("cbc1"),a=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=a.a},"2d46":function(e,t,n){"use strict";(function(e){n("67ba");i(n("66fd"));var t=i(n("46b8"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"46b8":function(e,t,n){"use strict";n.r(t);var i=n("987a"),a=n("0b3c");for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("85d3");var o,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=c.exports},"53fc":function(e,t,n){},"85d3":function(e,t,n){"use strict";var i=n("53fc"),a=n.n(i);a.a},"987a":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var i={uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"d7b6"))},loadingCover:function(){return n.e("components/loading-cover/loading-cover").then(n.bind(null,"4c1d"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.$util.img(e.cardinfo.card_cover)),i=n?e.$util.img(e.cardinfo.card_cover):null,a=1==e.show?e.$util.img("https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/share.png"):null;e.$mp.data=Object.assign({},{$root:{g0:n,g1:i,g2:a}})},r=[]},cbc1:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n("319c");var i=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("d7b6"))}.bind(null,n)).catch(n.oe)},a={components:{uniPopup:i},data:function(){return{cardinfo:[],id:"",member_id:"",leav_message:"",transfer_id:"",shareTitle:"",shareImageurl:"",show:!1}},onLoad:function(e){var t=e.id;this.getData(t),this.id=e.id,this.onShare()},onShow:function(){this.$langConfig.refresh()},methods:{shareGift:function(){},getData:function(e){var t=this;this.$api.sendRequest({url:"/giftcard/api/giftcard/transfer",data:{id:e},success:function(e){0==e.code&&e.data&&(t.cardinfo=e.data,t.member_id=e.data.use_member_id),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(e){mescroll.endErr(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},oninput:function(e){var t=e.target.value;this.leav_message=t},openSharePopup:function(){this.$refs.sharePopup.open(),this.actionTransfer(0)},closeSharePopup:function(){this.$refs.sharePopup.close()},actionTransfer:function(e){var t=this;this.$api.sendRequest({url:"/giftcard/api/giftcard/actiontransfer",data:{id:this.id,use_member_id:this.member_id,leav_message:this.leav_message},success:function(e){0==e.code&&e.data&&(t.transfer_id=e.data.transfer_id,t.shareGift())}})},copyUrl:function(e){var t=this;if(this.actionTransfer(1),this.transfer_id){var n=this.$config.h5Domain+"/promotionpages/giftcard/present/accept?transfer_id="+this.transfer_id;this.$util.copy(n,(function(){t.closeSharePopup()}))}},onShare:function(){this.$api.sendRequest({url:"/weapp/api/weapp/share",success:function(e){}})},onShare2:function(){this.show=!0,this.closeSharePopup()},hide:function(){this.show=!1},openPosterPopup:function(){var t=this;this.getGiftcardPoster(),this.$refs.sharePopup.close(),this.$refs.posterPopup.open(),setTimeout((function(){var n=e.createSelectorQuery().in(t).select(".poster-layer .image-wrap");n.fields({size:!0},(function(e){var n=e.width,i=parseFloat((740/n).toFixed(2));t.token,t.posterHeight=parseInt(1100/i)})).exec()}),100)},getGiftcardPoster:function(){var e={id:this.cardinfo.id};this.memberId&&(e.source_member=this.memberId),this.$api.sendRequest({url:"/giftcard/api/goods/poster",data:{page:"/promotionpages/bargain/detail/detail",qrcode_param:JSON.stringify(e)},success:function(e){e.code}})}},onShareAppMessage:function(){return{title:"送你一张礼品卡",imageUrl:this.$util.img("https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/gift_bag3.png"),path:"/promotionpages/giftcard/present/accept?transfer_id="+this.transfer_id,success:function(e){},fail:function(e){}}},onReady:function(){}};t.default=a}).call(this,n("543d")["default"])}},[["2d46","common/runtime","common/vendor"]]]);