(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/store_notes/note_detail/note_detail"],{"0580":function(e,t,o){"use strict";o.r(t);var n=o("4091"),i=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(t,e,(function(){return n[e]}))}(s);t["default"]=i.a},"1bdf":function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return n}));var n={loadingCover:function(){return o.e("components/loading-cover/loading-cover").then(o.bind(null,"4c1d"))},nsLogin:function(){return Promise.all([o.e("common/vendor"),o.e("components/ns-login/ns-login")]).then(o.bind(null,"2bc6"))}},i=function(){var e=this,t=e.$createElement,o=(e._self._c,"goods_item"==e.noteType?e.$util.img(e.goodsItemInfo.goods_image):null),n="goods_item"==e.noteType&&1==e.goodsItemInfo.is_show_release_time?e.$util.timeStampTurnTime(e.goodsItemInfo.create_time,"time"):null,i="goods_item"!=e.noteType&&"shop_said"==e.noteType&&1==e.shopSaidInfo.is_show_release_time?e.$util.timeStampTurnTime(e.shopSaidInfo.create_time,"time"):null,s="goods_item"!=e.noteType&&"shop_said"==e.noteType?e.__map(e.shopSaidInfo.goods_list,(function(t,o){var n=e.__get_orig(t),i=e.shopSaidInfo.goods_list?e.$util.img(t.goods_image.split(",")[0]):null;return{$orig:n,g3:i}})):null;e.$mp.data=Object.assign({},{$root:{g0:o,g1:n,g2:i,l0:s}})},s=[]},"2cfd":function(e,t,o){"use strict";var n=o("976d"),i=o.n(n);i.a},4091:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(o("9374")),i=s(o("b6ac"));function s(e){return e&&e.__esModule?e:{default:e}}var d={components:{},data:function(){return{noteId:"",noteType:"",goodsItemInfo:{},shopSaidInfo:{},giveLikeIdent:!1,giveLikeFlag:!1,memberId:0,shareImg:""}},onLoad:function(t){var o=this;if(this.addonIsExit.notes)t.note_id?(this.noteId=t.note_id,this.getNoteDetail()):this.$util.redirectTo("/otherpages/store_notes/note_list/note_list",{},"redirectTo");else{if(this.$util.showToast({title:"商家未开启店铺笔记",mask:!0,duration:2e3}),this.$util.getMemberId().then((function(e){o.memberId=e})).catch((function(e){console.log("reject",e)})),t.source_member&&e.setStorageSync("source_member",t.source_member),t.scene){var n=decodeURIComponent(t.scene);n=n.split("&"),n.length&&n.forEach((function(t){-1!=t.indexOf("sku_id")&&(o.skuId=t.split("-")[1]),-1!=t.indexOf("m")&&e.setStorageSync("source_member",t.split("-")[1]),-1!=t.indexOf("is_test")&&e.setStorageSync("is_test",1)}))}setTimeout((function(){o.$util.redirectTo("/pages/index/index/index",{},"redirectTo")}),2e3)}},onShow:function(){this.$langConfig.refresh(),e.getStorageSync("token")&&e.getStorageSync("source_member")&&this.$util.onSourceMember(e.getStorageSync("source_member")),e.getStorageSync("token")&&this.isDianzan()},mixins:[i.default],onShareAppMessage:function(){var e="goods_item"==this.noteType?this.goodsItemInfo.note_title:this.shopSaidInfo.note_title,t="goods_item"==this.noteType?this.goodsItemInfo.cover_img:this.shopSaidInfo.cover_img;t=this.$util.img(t.split(",")[0]);var o=this.$util.getCurrentShareRoute(this.memberId),n=o.path;return{title:e,path:n,imageUrl:t}},onShareTimeline:function(){var e="goods_item"==this.noteType?this.goodsItemInfo.note_title:this.shopSaidInfo.note_title,t=this.$util.getCurrentShareRoute(this.memberId),o="goods_item"==this.noteType?this.goodsItemInfo.cover_img:this.shopSaidInfo.cover_img;o=this.$util.img(o.split(",")[0]);var n=t.query;return{title:e,query:n,imageUrl:o}},methods:{getNoteDetail:function(){var e=this;this.$api.sendRequest({url:"/notes/api/notes/detail",data:{note_id:this.noteId},success:function(t){0==t.code?(e.noteType=t.data.note_type,"goods_item"==e.noteType?(e.goodsItemInfo=t.data,e.goodsItemInfo.note_content&&(e.goodsItemInfo.note_content=(0,n.default)(e.goodsItemInfo.note_content)),e.goodsItemInfo.goods_image?e.shareImg=e.$util.img(e.goodsItemInfo.goods_image):e.shareImg=e.$util.getDefaultImage().default_goods_img,e.goodsItemInfo.goods_list.length?e.goodsItemInfo.goods_image=e.goodsItemInfo.goods_list[0].goods_image.split(",")[0]:e.goodsItemInfo.goods_image=e.$util.getDefaultImage().default_goods_img,e.goodsItemInfo.goods_highlights&&(e.goodsItemInfo.goods_highlights=e.goodsItemInfo.goods_highlights.split(","))):(e.shopSaidInfo=t.data,e.shopSaidInfo.note_content&&(e.shopSaidInfo.note_content=(0,n.default)(e.shopSaidInfo.note_content)))):e.$util.showToast({title:t.message}),e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},giveLike:function(){var t=this;if(e.getStorageSync("token")){if(this.giveLikeFlag)return!1;this.giveLikeFlag=!0;var o=this.giveLikeIdent?"/notes/api/record/delete":"/notes/api/record/add";this.$api.sendRequest({url:o,data:{note_id:this.noteId},success:function(e){t.giveLikeFlag=!1,0==e.code&&e.data>0?("goods_item"!=t.noteType?t.shopSaidInfo.dianzan_num=t.giveLikeIdent?t.shopSaidInfo.dianzan_num-1:t.shopSaidInfo.dianzan_num+1:t.goodsItemInfo.dianzan_num=t.giveLikeIdent?t.goodsItemInfo.dianzan_num-1:t.goodsItemInfo.dianzan_num+1,t.giveLikeIdent=!t.giveLikeIdent):t.$util.showToast({title:e.message})}})}else this.$refs.login.open("/pages/index/index/index")},isDianzan:function(){var e=this;this.$api.sendRequest({url:"/notes/api/record/isDianzan",data:{note_id:this.noteId},success:function(t){0==t.code?e.giveLikeIdent=1==t.data:e.$util.showToast({title:t.message})}})},redirectToGoods:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=t?e:e.goods_list[0].sku_id;this.$util.redirectTo("/pages/goods/detail/detail",{sku_id:o})},imageError:function(){this.goodsItemInfo.goods_image&&(this.goodsItemInfo.goods_image=this.$util.getDefaultImage().default_goods_img),this.$forceUpdate()}}};t.default=d}).call(this,o("543d")["default"])},"632a":function(e,t,o){"use strict";o.r(t);var n=o("1bdf"),i=o("0580");for(var s in i)"default"!==s&&function(e){o.d(t,e,(function(){return i[e]}))}(s);o("ef47"),o("2cfd");var d,a=o("f0c5"),r=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,"eec14d34",null,!1,n["a"],d);t["default"]=r.exports},"6f77":function(e,t,o){},"976d":function(e,t,o){},e779:function(e,t,o){"use strict";(function(e){o("67ba");n(o("66fd"));var t=n(o("632a"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},ef47:function(e,t,o){"use strict";var n=o("6f77"),i=o.n(n);i.a}},[["e779","common/runtime","common/vendor"]]]);