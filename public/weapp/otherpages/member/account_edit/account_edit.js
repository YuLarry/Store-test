(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/member/account_edit/account_edit"],{"0374":function(a,t,e){"use strict";(function(a){e("67ba");n(e("66fd"));var t=n(e("e4ca"));function n(a){return a&&a.__esModule?a:{default:a}}a(t.default)}).call(this,e("543d")["createPage"])},"24cd":function(a,t,e){"use strict";var n=e("fa6d"),r=e.n(n);r.a},"79a4":function(a,t,e){"use strict";e.r(t);var n=e("ba9a"),r=e.n(n);for(var i in n)"default"!==i&&function(a){e.d(t,a,(function(){return n[a]}))}(i);t["default"]=r.a},ba9a:function(a,t,e){"use strict";(function(a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(e("b056")),r=i(e("b6ac"));function i(a){return a&&a.__esModule?a:{default:a}}var o={data:function(){return{formData:{realname:"",mobile:"",withdraw_type:"",bank_account:"",branch_bank_name:""},payList:[],index:0,flag:!1,transferType:[],accountInfo:null,back:""}},onLoad:function(a){a.id&&(this.formData.id=a.id),a.back&&(this.back=a.back)},mixins:[r.default],onShow:function(){this.$langConfig.refresh(),this.formData.id?this.getAccountDetail(this.formData.id):this.getTransferType(),this.formData.id?a.setNavigationBarTitle({title:"编辑账户"}):a.setNavigationBarTitle({title:"新增账户"})},methods:{getAccountDetail:function(a){var t=this;this.$api.sendRequest({url:"/api/memberbankaccount/info",data:{id:this.formData.id},success:function(a){0==a.code&&a.data&&(t.accountInfo=a.data,t.formData.realname=a.data.realname,t.formData.mobile=a.data.mobile,t.formData.bank_account=a.data.bank_account,t.formData.branch_bank_name=a.data.branch_bank_name,t.formData.withdraw_type=a.data.withdraw_type),t.getTransferType(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(a){t.getTransferType(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},getTransferType:function(){var a=this;this.payList=[],this.$api.sendRequest({url:"/api/memberwithdraw/transferType",success:function(t){if(t.code>=0&&t.data){for(var e in a.transferType=t.data,a.transferType)a.payList.push(a.transferType[e]);if(1==a.payList.length&&"银行卡"==a.payList[0]&&(a.formData.withdraw_type="bank"),a.payList.reverse(),!a.formData.id&&a.$refs.loadingCover&&a.$refs.loadingCover.hide(),a.accountInfo&&-1==a.$util.inArray(a.accountInfo.withdraw_type_name,a.payList)&&a.payList.push(a.accountInfo.withdraw_type_name),a.payList.length&&a.accountInfo&&(a.index=a.$util.inArray(a.accountInfo.withdraw_type_name,a.payList)),!a.formData.withdraw_type&&a.payList.length)switch(a.payList[0]){case"银行卡":a.formData.withdraw_type="bank";break;case"支付宝":a.formData.withdraw_type="alipay";break;case"微信":a.formData.withdraw_type="wechatpay";break}}}})},bindPickerChange:function(a){this.index=a.detail.value;var t="";for(var e in this.transferType)this.transferType[e]==this.payList[this.index]&&(t=e);""!=t&&(this.formData.withdraw_type=t)},vertify:function(){var a=[{name:"realname",checkType:"required",errorMsg:"请输入姓名"},{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"withdraw_type",checkType:"required",errorMsg:"请选择账户类型"}];"bank"==this.formData.withdraw_type&&a.push({name:"branch_bank_name",checkType:"required",errorMsg:"请输入银行名称"}),"wechatpay"!=this.formData.withdraw_type&&a.push({name:"bank_account",checkType:"required",errorMsg:"请输入提现账号"});var t=n.default.check(this.formData,a);return!!t||(this.$util.showToast({title:n.default.error}),this.flag=!1,!1)},saveAccount:function(){var a=this;if(!this.flag&&(this.flag=!0,this.vertify())){var t=this.formData.id?"edit":"add";this.$api.sendRequest({url:"/api/memberbankaccount/"+t,data:{id:this.formData.id,realname:this.formData.realname,mobile:this.formData.mobile,withdraw_type:this.formData.withdraw_type,bank_account:this.formData.bank_account,branch_bank_name:this.formData.branch_bank_name},success:function(t){0==t.code?(a.formData.id?a.$util.showToast({title:"修改成功"}):a.$util.showToast({title:"添加成功"}),""!=a.back?a.$util.redirectTo(a.back,{},a.redirect):a.$util.redirectTo("/otherpages/member/account/account")):(a.flag=!1,a.$util.showToast({title:t.message}))},fail:function(t){a.flag=!1}})}}}};t.default=o}).call(this,e("543d")["default"])},e4ca:function(a,t,e){"use strict";e.r(t);var n=e("e8ff"),r=e("79a4");for(var i in r)"default"!==i&&function(a){e.d(t,a,(function(){return r[a]}))}(i);e("24cd");var o,c=e("f0c5"),s=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);t["default"]=s.exports},e8ff:function(a,t,e){"use strict";e.d(t,"b",(function(){return r})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return n}));var n={loadingCover:function(){return e.e("components/loading-cover/loading-cover").then(e.bind(null,"4c1d"))}},r=function(){var a=this,t=a.$createElement,e=(a._self._c,a.$lang("name")),n=a.$lang("mobilePhone"),r=a.$lang("accountType"),i=a.$lang("save");a.$mp.data=Object.assign({},{$root:{m0:e,m1:n,m2:r,m3:i}})},i=[]},fa6d:function(a,t,e){}},[["0374","common/runtime","common/vendor"]]]);