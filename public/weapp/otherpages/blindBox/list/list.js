(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/blindBox/list/list"],{"36d1":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("b6ac"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){n.e("components/ns-adv/ns-adv").then(function(){return resolve(n("6c5b"))}.bind(null,n)).catch(n.oe)},a={mixins:[i.default],components:{nsAdv:s},data:function(){return{boxStatus:0,list:[],categoryList:[],showEmpty:!1,isIphoneX:!1,state:1,adv:{},mescroll:{num:1,size:8},topJudge:!1,bottom_tips_judge:!0,skuId:0,memberId:0,mpShareData:null}},onLoad:function(e){var n=this;if(this.getCategory(),this.isIphoneX=this.$util.uniappIsIPhoneX(),this.getDate(),this.$util.getMemberId().then((function(t){n.memberId=t})).catch((function(t){console.log("reject",t)})),e.source_member&&t.setStorageSync("source_member",e.source_member),e.scene){var i=decodeURIComponent(e.scene);i=i.split("&"),i.length&&i.forEach((function(e){-1!=e.indexOf("sku_id")&&(n.skuId=e.split("-")[1]),-1!=e.indexOf("m")&&t.setStorageSync("source_member",e.split("-")[1]),-1!=e.indexOf("is_test")&&t.setStorageSync("is_test",1)}))}},onShow:function(){var e=this;if(this.getAdvList(),!this.addonIsExit.blindbox)return this.$util.showToast({title:"商家未开启盲盒",mask:!0,duration:2e3}),void setTimeout((function(){e.$util.redirectTo("/pages/index/index/index",{},"redirectTo")}),2e3);t.getStorageSync("token")&&t.getStorageSync("source_member")&&this.$util.onSourceMember(t.getStorageSync("source_member")),this.$util.getMpShare().then((function(t){e.mpShareData=t}))},onShareAppMessage:function(){return this.mpShareData.appMessage},onShareTimeline:function(){return this.mpShareData.timeLine},methods:{getAdvList:function(){var t=this;this.$api.sendRequest({url:"/api/adv/detail",data:{keyword:"NS_BLINDBOX"},success:function(e){if(0==e.code){var n=e.data.adv_list;for(var i in n)n[i].adv_url&&(n[i].adv_url=JSON.parse(n[i].adv_url));t.adv=e.data.adv_list}console.log(t.adv)}})},getCategory:function(){var t=this;this.$api.sendRequest({url:"/blindbox/api/goods/categoryList",success:function(e){e.code>=0?t.categoryList=e.data:t.$util.showToast({title:e.message})}})},getDate:function(){var t=this;this.showEmpty=!1,this.$api.sendRequest({url:"/blindbox/api/goods/page",data:{page:this.mescroll.num,page_size:this.mescroll.size,category_id:this.boxStatus},success:function(e){if(t.showEmpty=!0,e.code>=0)if(e.data.list.length>0){var n=[];n=e.data.list,n.length<t.mescroll.size&&(t.bottom_tips_judge=!0),t.list=t.list.concat(n),t.mescroll.num+=1}else t.mescroll.num>1&&(t.bottom_tips_judge=!0);t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},categoryChange:function(t){this.boxStatus=t,this.mescroll.num=1,this.list=[],this.bottom_tips_judge=!1,this.getDate()},toDetail:function(t){this.$util.redirectTo("/otherpages/blindBox/index/index",{blindbox_id:t})},imageError:function(t){this.list[t].blindbox_images=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},watchScroll:function(t){this.topHeight=t.detail.scrollTop,this.topHeight<165?this.topJudge=!1:this.topJudge=!0}}};e.default=a}).call(this,n("543d")["default"])},4311:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={nsAdv:function(){return n.e("components/ns-adv/ns-adv").then(n.bind(null,"6c5b"))},nsEmpty:function(){return n.e("components/ns-empty/ns-empty").then(n.bind(null,"90af"))},loadingCover:function(){return n.e("components/loading-cover/loading-cover").then(n.bind(null,"4c1d"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.list.length>0?t.__map(t.list,(function(e,n){var i=t.__get_orig(e),o=""!=e.blindbox_images?t.$util.img(e.blindbox_images):null,s=""==e.blindbox_images?t.$util.img("upload/uniapp/blindBox/default.png"):null;return{$orig:i,g0:o,g1:s}})):null);t.$mp.data=Object.assign({},{$root:{l0:n}})},s=[]},4659:function(t,e,n){"use strict";var i=n("ad6d"),o=n.n(i);o.a},"4bf0":function(t,e,n){"use strict";var i=n("acbc"),o=n.n(i);o.a},6944:function(t,e,n){"use strict";(function(t){n("67ba");i(n("66fd"));var e=i(n("e6fa"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},acbc:function(t,e,n){},ad6d:function(t,e,n){},bd9a:function(t,e,n){"use strict";n.r(e);var i=n("36d1"),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},e6fa:function(t,e,n){"use strict";n.r(e);var i=n("4311"),o=n("bd9a");for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n("4bf0"),n("4659");var a,u=n("f0c5"),r=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"b3f8498e",null,!1,i["a"],a);e["default"]=r.exports}},[["6944","common/runtime","common/vendor"]]]);