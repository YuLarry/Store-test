(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/hongbao/index/index"],{"0284":function(o,n,i){"use strict";i.d(n,"b",(function(){return e})),i.d(n,"c",(function(){return u})),i.d(n,"a",(function(){return t}));var t={uniCountDown:function(){return i.e("components/uni-count-down/uni-count-down").then(i.bind(null,"d753"))},uniPopup:function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"2d2c"))},nsLogin:function(){return Promise.all([i.e("common/vendor"),i.e("components/ns-login/ns-login")]).then(i.bind(null,"61d0"))},loadingCover:function(){return i.e("components/loading-cover/loading-cover").then(i.bind(null,"b1ae"))}},e=function(){var o=this,n=o.$createElement,i=(o._self._c,2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/hongbao_bg.png"):null),t=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/index.png"):null,e=2!=o.groupInfoList.status&&""==o.groupInfoList&&1==o.hongbaoInfo.status?o._f("int")(o.hongbaoInfo.money):null,u=2!=o.groupInfoList.status&&(""!=o.groupInfoList&&1==o.hongbaoInfo.status&&0==o.groupInfoList.status||2==o.groupInfoList.status)&&o.groupInfoList.member_list.length>0?o.__map(o.groupInfoList.member_list,(function(n,i){var t=o.__get_orig(n),e=""!=n.headimg?o.$util.img(n.headimg):null,u=""==n.headimg?o.$util.img("/upload/default/default_img/head.png"):null;return{$orig:t,g2:e,g3:u}})):null,a=2!=o.groupInfoList.status&&(""!=o.groupInfoList&&1==o.hongbaoInfo.status&&0==o.groupInfoList.status||2==o.groupInfoList.status)?o._f("int")(o.hongbaoInfo.money):null,s=2!=o.groupInfoList.status&&(""!=o.groupInfoList&&1==o.hongbaoInfo.status&&0==o.groupInfoList.status||2==o.groupInfoList.status)?o.$util.img("/upload/uniapp/hongbao/bg_left.png"):null,g=2!=o.groupInfoList.status&&(""!=o.groupInfoList&&1==o.hongbaoInfo.status&&0==o.groupInfoList.status||2==o.groupInfoList.status)?o.$util.img("/upload/uniapp/hongbao/bg_right.png"):null,r=2!=o.groupInfoList.status&&""!=o.groupInfoList&&1==o.groupInfoList.status&&0==o.g_member_state&&o.groupInfoList.member_list.length>0?o.__map(o.groupInfoList.member_list,(function(n,i){var t=o.__get_orig(n),e=""!=n.headimg?o.$util.img(n.headimg):null,u=""==n.headimg?o.$util.img("/upload/default/default_img/head.png"):null;return{$orig:t,g6:e,g7:u}})):null,p=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/active.png"):null,l=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/jiantou.png"):null,f=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/friend.png"):null,d=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/jiantou.png"):null,h=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/reward.png"):null,m=2==o.groupInfoList.status?o.$util.img("upload/uniapp/order/status-wrap-bg.png"):null,c=2==o.groupInfoList.status&&o.groupInfoList.member_list.length>0?o.__map(o.groupInfoList.member_list,(function(n,i){var t=o.__get_orig(n),e=""!=n.headimg?o.$util.img(n.headimg):null,u=""==n.headimg?o.$util.img("/upload/default/default_img/head.png"):null;return{$orig:t,g14:e,g15:u}})):null,I=2==o.groupInfoList.status?o.$util.timeStampTurnTime(o.hongbaoInfo.start_time):null,_=2==o.groupInfoList.status?o.$util.timeStampTurnTime(o.hongbaoInfo.end_time):null,b=2==o.groupInfoList.status?o.$util.timeStampTurnTime(o.groupInfoList.start_time):null,$=o.$util.img("upload/uniapp/hongbao/rule_head.png"),v=o.$util.timeStampTurnTime(o.hongbaoInfo.start_time),L=o.$util.timeStampTurnTime(o.hongbaoInfo.end_time),P=o.inviterInfo?o.$util.img("upload/uniapp/hongbao/popup_bg.png"):null,k=o.inviterInfo?o.$util.img(o.inviterInfo.headimg?o.$util.img(o.inviterInfo.headimg):o.$util.getDefaultImage().default_headimg):null,S=o.inviterInfo?o._f("guolv")(o.inviterInfo.nickname):null,w=o.inviterInfo?o.$util.img("upload/uniapp/hongbao/btn_bg.png"):null,x=o.inviterInfo?o.$util.img("/upload/uniapp/hongbao/close.png"):null,T=o.inviterInfo?null:o.$util.img("upload/uniapp/hongbao/popup_bg.png"),y=o.inviterInfo?null:o.$util.img(o.inviterInfo.headimg?o.$util.img(o.inviterInfo.headimg):o.$util.getDefaultImage().default_headimg),B=o.inviterInfo?null:o._f("guolv")(o.groupInfoList.header_nickname),D=o.inviterInfo?null:o.$util.img("upload/uniapp/hongbao/btn_bg.png"),M=o.inviterInfo?null:o.$util.img("/upload/uniapp/hongbao/close.png"),R=o.$util.img("upload/uniapp/hongbao/popup_bg.png"),C=o._f("guolv")(o.groupInfoList.header_nickname),U=o._f("int")(o.hongbaoInfo.money),j=o.$util.img("upload/uniapp/hongbao/btn_bg.png"),q=o.$util.img("/upload/uniapp/hongbao/close.png"),F=o.$util.img("upload/uniapp/hongbao/popup_bg.png"),N=o._f("int")(o.hongbaoInfo.money),O=o.$util.img("upload/uniapp/hongbao/btn_bg.png");o._isMounted||(o.e0=function(n){o.inviterInfo.headimg=o.$util.getDefaultImage().default_headimg},o.e1=function(n){o.inviterInfo.headimg=o.$util.getDefaultImage().default_headimg}),o.$mp.data=Object.assign({},{$root:{g0:i,g1:t,f0:e,l0:u,f1:a,g4:s,g5:g,l1:r,g8:p,g9:l,g10:f,g11:d,g12:h,g13:m,l2:c,g16:I,g17:_,g18:b,g19:$,g20:v,g21:L,g22:P,g23:k,f2:S,g24:w,g25:x,g26:T,g27:y,f3:B,g28:D,g29:M,g30:R,f4:C,f5:U,g31:j,g32:q,g33:F,f6:N,g34:O}})},u=[]},2254:function(o,n,i){},"266f":function(o,n,i){},"45ff":function(o,n,i){"use strict";(function(o){i("4b62");t(i("66fd"));var n=t(i("be4c"));function t(o){return o&&o.__esModule?o:{default:o}}wx.__webpack_require_UNI_MP_PLUGIN__=i,o(n.default)}).call(this,i("543d")["createPage"])},"529e":function(o,n,i){"use strict";i.r(n);var t=i("64f7"),e=i.n(t);for(var u in t)"default"!==u&&function(o){i.d(n,o,(function(){return t[o]}))}(u);n["default"]=e.a},"5c82":function(o,n,i){"use strict";var t=i("266f"),e=i.n(t);e.a},"60be":function(o,n,i){},6283:function(o,n,i){"use strict";var t=i("2254"),e=i.n(t);e.a},"64f7":function(o,n,i){"use strict";(function(o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=function(){i.e("components/uni-popup/uni-popup").then(function(){return resolve(i("2d2c"))}.bind(null,i)).catch(i.oe)},e={components:{uniPopup:t},data:function(){return{hongbaoInfo:{},groupInfoList:[],goodsRecommend:[],isShow:!1,isNow:!1,seckillH:"",seckillI:"",seckillS:"",seckillInterval:null,hongBaoId:"",groupId:"",memberInfo:{},money:"",memberList:[],inviterId:"",inviterInfo:{},is_exit:0,g_member_state:0,start_time_coupon:"",end_time_coupon:"",memberId:0,token:null}},onLoad:function(o){var n=this;if(o.scene){var i=decodeURIComponent(o.scene);i=i.split("&"),i.length&&i.forEach((function(o){-1!=o.indexOf("hid")&&(n.hongBaoId=o.split("-")[1]),-1!=o.indexOf("id")&&(n.inviterId=o.split("-")[1]),-1!=o.indexOf("gid")&&(n.groupId=o.split("-")[1])}))}else o.hid?(o.hid&&(this.hongBaoId=o.hid),o.id&&(this.inviterId=o.id),o.gid&&(this.groupId=o.gid)):(o.hongbao_id&&(this.hongBaoId=o.hongbao_id),o.inviter_id&&(this.inviterId=o.inviter_id),o.group_id&&(this.groupId=o.group_id))},filters:{date:function(o){return String(o).slice(0,10)},guolv:function(o){return o=String(o),o.length>=6?o.substr(0,1)+"****"+o.substr(o.split("").length-1,o.split("").length):o},int:function(o){var n=String(o),i=n.split(".");return parseInt(i[1])>0?n:i[0]}},onShow:function(){this.getInfo(),this.getMemberInfo(),this.getMemberId(),this.$langConfig.refresh()},onShareAppMessage:function(o){var n="/otherpages/hongbao/index/index?hid="+this.hongbaoInfo.hongbao_id+"&gid="+this.groupInfoList.group_id+"&id="+this.hongbaoInfo.member_id;return this.memberId&&(n+="&source_member="+this.memberId),{title:"还差"+(this.groupInfoList.num-this.groupInfoList.member_list.length)+"人瓜分成功",path:n,success:function(o){console.log(n,"00")},fail:function(o){console.log(n,"11")}}},methods:{getMemberId:function(){var o=this;this.$api.sendRequest({url:"/api/member/id",success:function(n){n.code>=0&&(o.memberId=n.data)}})},closeGetItNow:function(){this.$refs.linkSuccessPopup.close()},openSharePopup:function(){this.$refs.sharePopup.open()},closeSharePopup:function(){this.$refs.sharePopup.close()},showPrice:function(o){var n=o.discount_price;return o.member_price&&parseFloat(o.member_price)<parseFloat(n)&&(n=o.member_price),n},openRulePopup:function(){this.$refs.rulePopup.open()},closeRulePopup:function(){this.$refs.rulePopup.close()},toLook:function(){this.$util.redirectTo("/otherpages/member/balance_detail/balance_detail",{group_id:this.groupInfoList.group_id,from_type:"hongbao"})},toGuaFen:function(){this.$util.redirectTo("/otherpages/hongbao/list/list",{})},toIndex:function(){this.$util.redirectTo("/pages/index/index/index",{})},GetItNowPopup:function(){this.$refs.linkSuccessPopup.open()},closeFriend:function(){this.$refs.friendsPopup.close()},friend:function(){this.$refs.friendsPopup.open()},goFriend:function(){this.closeFriend(),this.openSharePopup()},getInfo:function(){var o=this;this.$api.sendRequest({url:"/hongbao/api/hongbao/info",data:{hongbao_id:this.hongBaoId,inviter_id:""==this.inviterId?0:this.inviterId,group_id:""==this.groupId?0:this.groupId},success:function(n){if(n.code>=0&&(o.hongbaoInfo=n.data,o.groupInfoList=n.data.group_info,o.memberList=n.data.group_info.member_list,o.groupId=n.data.group_info.group_id,o.hongbaoInfo.inviter_info&&(o.inviterInfo=n.data.inviter_info),o.memberList&&o.memberList.forEach((function(n){o.hongbaoInfo.member_id==n.member_id&&(o.money=n.money,o.start_time_coupon=n.coupon_start_time,o.end_time_coupon=n.coupon_end_time)})),""!=n.data.group_info)){Date.parse(new Date);if(o.groupInfoList.end_time-n.timestamp>0){var i=o.$util.countDown(o.groupInfoList.end_time-n.timestamp);o.seckillH=i.h,o.seckillI=i.i,o.seckillS=i.s}if(n.data.member_id!=n.data.group_info.header_id){var t=0;n.data.group_info.member_list.some((function(o){o.member_id==n.data.member_id&&(t+=1)})),1==n.data.group_info.status&&0==t?o.g_member_state=1:0==t&&(t+=1,o.$refs.linkPopup.open())}}}})},join:function(){var n=this;o.getStorageSync("token")?this.$api.sendRequest({url:"/hongbao/api/hongbao/divide",data:{group_id:this.groupId},success:function(o){o.code>=0?(n.$util.showToast({title:"加入成功"}),n.closeLinkPopup(),n.getInfo(),n.groupInfoList.num-n.groupInfoList.member_list.length>1&&n.friend(),n.groupInfoList.num-n.groupInfoList.member_list.length<=1&&n.GetItNowPopup()):(n.$util.showToast({title:o.message}),n.closeLinkPopup())}}):setTimeout((function(){n.$refs.login.open("/otherpages/hongbao/index/index?hongbao_id="+n.hongBaoId+"&group_id="+n.groupId+"&inviter_id="+n.inviterId)}))},getLaunch:function(){var n=this;o.getStorageSync("token")?this.$api.sendRequest({url:"/hongbao/api/hongbao/launch",data:{hongbao_id:this.hongBaoId},success:function(o){o.code>=0?(n.groupId=o.data,n.isShow,n.getInfo()):n.$util.showToast({title:"红包已被瓜分完，下次再来吧"}),n.$forceUpdate()}}):setTimeout((function(){n.$refs.login.open("/otherpages/hongbao/index/index?hongbao_id="+n.hongBaoId+"&group_id=")}))},openPosterPopup:function(){this.$util.redirectTo("/otherpages/hongbao/poster/poster",{hongbao_id:this.hongBaoId,group_id:this.groupId,inviter_id:this.hongbaoInfo.member_id})},closePosterPopup:function(){this.$refs.posterPopup.close()},closeLinkPopup:function(){this.$refs.linkPopup.close()},copyUrl:function(){var o=this,n=this.$config.h5Domain+"/otherpages/hongbao/index/index";this.hongBaoId&&(n+="?hongbao_id="+this.hongBaoId+"&group_id="+this.groupInfoList.group_id+"&inviter_id="+this.hongbaoInfo.member_id),this.$util.copy(n,(function(){o.closeSharePopup()}))},imageError:function(o){this.list[o].goods_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},headerimageError:function(o){this.list[o].headimg=this.$util.getDefaultImage().default_headimg,this.$forceUpdate()},onPageHide:function(){clearInterval(this.seckillInterval)},getMemberInfo:function(){var o=this;this.$api.sendRequest({url:"/api/member/info",success:function(n){0==n.code&&(o.memberInfo=n.data),o.$refs.loadingCover&&o.$refs.loadingCover.hide()},fail:function(n){o.$refs.loadingCover&&o.$refs.loadingCover.hide()}})}}};n.default=e}).call(this,i("543d")["default"])},be4c:function(o,n,i){"use strict";i.r(n);var t=i("0284"),e=i("529e");for(var u in e)"default"!==u&&function(o){i.d(n,o,(function(){return e[o]}))}(u);i("5c82"),i("6283"),i("c62e");var a,s=i("f0c5"),g=Object(s["a"])(e["default"],t["b"],t["c"],!1,null,"5a39b01d",null,!1,t["a"],a);n["default"]=g.exports},c62e:function(o,n,i){"use strict";var t=i("60be"),e=i.n(t);e.a}},[["45ff","common/runtime","common/vendor"]]]);