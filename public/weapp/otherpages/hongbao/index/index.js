(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/hongbao/index/index"],{3931:function(o,n,i){},"4fa1":function(o,n,i){"use strict";var t=i("bb3a"),e=i.n(t);e.a},"571d":function(o,n,i){"use strict";i.d(n,"b",(function(){return e})),i.d(n,"c",(function(){return u})),i.d(n,"a",(function(){return t}));var t={uniCountDown:function(){return i.e("components/uni-count-down/uni-count-down").then(i.bind(null,"9fb1"))},uniPopup:function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"d7b6"))},nsLogin:function(){return Promise.all([i.e("common/vendor"),i.e("components/ns-login/ns-login")]).then(i.bind(null,"2bc6"))},loadingCover:function(){return i.e("components/loading-cover/loading-cover").then(i.bind(null,"4c1d"))}},e=function(){var o=this,n=o.$createElement,i=(o._self._c,2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/hongbao_bg.png"):null),t=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/index.png"):null,e=2!=o.groupInfoList.status&&""==o.groupInfoList&&1==o.hongbaoInfo.status?o._f("int")(o.hongbaoInfo.money):null,u=2!=o.groupInfoList.status&&(""!=o.groupInfoList&&1==o.hongbaoInfo.status&&0==o.groupInfoList.status||2==o.groupInfoList.status)&&o.groupInfoList.member_list.length>0?o.__map(o.groupInfoList.member_list,(function(n,i){var t=o.__get_orig(n),e=""!=n.headimg?o.$util.img(n.headimg):null,u=""==n.headimg?o.$util.img("/upload/default/default_img/head.png"):null;return{$orig:t,g2:e,g3:u}})):null,a=2!=o.groupInfoList.status&&(""!=o.groupInfoList&&1==o.hongbaoInfo.status&&0==o.groupInfoList.status||2==o.groupInfoList.status)?o._f("int")(o.hongbaoInfo.money):null,s=2!=o.groupInfoList.status&&(""!=o.groupInfoList&&1==o.hongbaoInfo.status&&0==o.groupInfoList.status||2==o.groupInfoList.status)?o.$util.img("/upload/uniapp/hongbao/bg_left.png"):null,r=2!=o.groupInfoList.status&&(""!=o.groupInfoList&&1==o.hongbaoInfo.status&&0==o.groupInfoList.status||2==o.groupInfoList.status)?o.$util.img("/upload/uniapp/hongbao/bg_right.png"):null,g=2!=o.groupInfoList.status&&""!=o.groupInfoList&&1==o.groupInfoList.status&&0==o.g_member_state&&o.groupInfoList.member_list.length>0?o.__map(o.groupInfoList.member_list,(function(n,i){var t=o.__get_orig(n),e=""!=n.headimg?o.$util.img(n.headimg):null,u=""==n.headimg?o.$util.img("/upload/default/default_img/head.png"):null;return{$orig:t,g6:e,g7:u}})):null,p=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/active.png"):null,l=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/jiantou.png"):null,d=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/friend.png"):null,f=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/jiantou.png"):null,h=2!=o.groupInfoList.status?o.$util.img("/upload/uniapp/hongbao/reward.png"):null,m=2==o.groupInfoList.status?o.$util.img("upload/uniapp/order/status-wrap-bg.png"):null,c=2==o.groupInfoList.status&&o.groupInfoList.member_list.length>0?o.__map(o.groupInfoList.member_list,(function(n,i){var t=o.__get_orig(n),e=""!=n.headimg?o.$util.img(n.headimg):null,u=""==n.headimg?o.$util.img("/upload/default/default_img/head.png"):null;return{$orig:t,g14:e,g15:u}})):null,b=2==o.groupInfoList.status?o.$util.timeStampTurnTime(o.hongbaoInfo.start_time):null,I=2==o.groupInfoList.status?o.$util.timeStampTurnTime(o.hongbaoInfo.end_time):null,_=2==o.groupInfoList.status?o.$util.timeStampTurnTime(o.groupInfoList.start_time):null,$=o.$util.img("upload/uniapp/hongbao/rule_head.png"),v=o.$util.timeStampTurnTime(o.hongbaoInfo.start_time),L=o.$util.timeStampTurnTime(o.hongbaoInfo.end_time),S=o.inviterInfo?o.$util.img("upload/uniapp/hongbao/popup_bg.png"):null,P=o.inviterInfo?o.$util.img(o.inviterInfo.headimg?o.$util.img(o.inviterInfo.headimg):o.$util.getDefaultImage().default_headimg):null,k=o.inviterInfo?o._f("guolv")(o.inviterInfo.nickname):null,x=o.inviterInfo?o.$util.img("upload/uniapp/hongbao/btn_bg.png"):null,y=o.inviterInfo?o.$util.img("/upload/uniapp/hongbao/close.png"):null,w=o.inviterInfo?null:o.$util.img("upload/uniapp/hongbao/popup_bg.png"),T=o.inviterInfo?null:o.$util.img(o.inviterInfo.headimg?o.$util.img(o.inviterInfo.headimg):o.$util.getDefaultImage().default_headimg),B=o.inviterInfo?null:o._f("guolv")(o.groupInfoList.header_nickname),D=o.inviterInfo?null:o.$util.img("upload/uniapp/hongbao/btn_bg.png"),M=o.inviterInfo?null:o.$util.img("/upload/uniapp/hongbao/close.png"),R=o.$util.img("upload/uniapp/hongbao/popup_bg.png"),C=o._f("guolv")(o.groupInfoList.header_nickname),O=o._f("int")(o.hongbaoInfo.money),j=o.$util.img("upload/uniapp/hongbao/btn_bg.png"),q=o.$util.img("/upload/uniapp/hongbao/close.png"),F=o.$util.img("upload/uniapp/hongbao/popup_bg.png"),U=o._f("int")(o.hongbaoInfo.money),E=o.$util.img("upload/uniapp/hongbao/btn_bg.png");o._isMounted||(o.e0=function(n){o.inviterInfo.headimg=o.$util.getDefaultImage().default_headimg},o.e1=function(n){o.inviterInfo.headimg=o.$util.getDefaultImage().default_headimg}),o.$mp.data=Object.assign({},{$root:{g0:i,g1:t,f0:e,l0:u,f1:a,g4:s,g5:r,l1:g,g8:p,g9:l,g10:d,g11:f,g12:h,g13:m,l2:c,g16:b,g17:I,g18:_,g19:$,g20:v,g21:L,g22:S,g23:P,f2:k,g24:x,g25:y,g26:w,g27:T,f3:B,g28:D,g29:M,g30:R,f4:C,f5:O,g31:j,g32:q,g33:F,f6:U,g34:E}})},u=[]},"5a93":function(o,n,i){},"88ed":function(o,n,i){"use strict";var t=i("5a93"),e=i.n(t);e.a},"9a1d":function(o,n,i){"use strict";var t=i("3931"),e=i.n(t);e.a},b30e:function(o,n,i){"use strict";i.r(n);var t=i("571d"),e=i("e00a");for(var u in e)"default"!==u&&function(o){i.d(n,o,(function(){return e[o]}))}(u);i("9a1d"),i("4fa1"),i("88ed");var a,s=i("f0c5"),r=Object(s["a"])(e["default"],t["b"],t["c"],!1,null,"6e0778c4",null,!1,t["a"],a);n["default"]=r.exports},bb3a:function(o,n,i){},e00a:function(o,n,i){"use strict";i.r(n);var t=i("fa80"),e=i.n(t);for(var u in t)"default"!==u&&function(o){i.d(n,o,(function(){return t[o]}))}(u);n["default"]=e.a},ed42:function(o,n,i){"use strict";(function(o){i("67ba");t(i("66fd"));var n=t(i("b30e"));function t(o){return o&&o.__esModule?o:{default:o}}o(n.default)}).call(this,i("543d")["createPage"])},fa80:function(o,n,i){"use strict";(function(o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=function(){i.e("components/uni-popup/uni-popup").then(function(){return resolve(i("d7b6"))}.bind(null,i)).catch(i.oe)},e={components:{uniPopup:t},data:function(){return{hongbaoInfo:{},groupInfoList:[],goodsRecommend:[],isShow:!1,isNow:!1,seckillH:"",seckillI:"",seckillS:"",seckillInterval:null,hongBaoId:"",groupId:"",memberInfo:{},money:"",memberList:[],inviterId:"",inviterInfo:{},is_exit:0,g_member_state:0,start_time_coupon:"",end_time_coupon:"",memberId:0,token:null}},onLoad:function(n){var i=this;if(n.source_member&&o.setStorageSync("source_member",n.source_member),n.scene){var t=decodeURIComponent(n.scene);t=t.split("&"),t.length&&t.forEach((function(n){-1!=n.indexOf("hid")&&(i.hongBaoId=n.split("-")[1]),-1!=n.indexOf("id")&&(i.inviterId=n.split("-")[1]),-1!=n.indexOf("gid")&&(i.groupId=n.split("-")[1]),-1!=n.indexOf("m")&&o.setStorageSync("source_member",n.split("-")[1]),-1!=n.indexOf("is_test")&&o.setStorageSync("is_test",1)}))}else n.hid?(n.hid&&(this.hongBaoId=n.hid),n.id&&(this.inviterId=n.id),n.gid&&(this.groupId=n.gid)):(n.hongbao_id&&(this.hongBaoId=n.hongbao_id),n.inviter_id&&(this.inviterId=n.inviter_id),n.group_id&&(this.groupId=n.group_id))},filters:{date:function(o){return String(o).slice(0,10)},guolv:function(o){return o=String(o),o.length>=6?o.substr(0,1)+"****"+o.substr(o.split("").length-1,o.split("").length):o},int:function(o){var n=String(o),i=n.split(".");return parseInt(i[1])>0?n:i[0]}},onShow:function(){this.getInfo(),this.getMemberInfo(),this.getMemberId(),o.getStorageSync("token")&&o.getStorageSync("source_member")&&this.$util.onSourceMember(o.getStorageSync("source_member")),this.$langConfig.refresh()},onShareAppMessage:function(o){var n="/otherpages/hongbao/index/index?hid="+this.hongbaoInfo.hongbao_id+"&gid="+this.groupInfoList.group_id+"&id="+this.hongbaoInfo.member_id;return this.memberId&&(n+="&source_member="+this.memberId),{title:"仅差一人即可瓜分"+this.hongbaoInfo.money+"元红包",path:n,success:function(o){console.log(n,"00")},fail:function(o){console.log(n,"11")}}},onShareTimeline:function(){var o="仅差一人即可瓜分"+this.hongbaoInfo.money+"元红包",n="hid="+this.hongbaoInfo.hongbao_id+"&gid="+this.groupInfoList.group_id+"&id="+this.hongbaoInfo.member_id;return this.memberId&&(n+="&source_member="+this.memberId),{title:o,query:n,imageUrl:""}},methods:{getMemberId:function(){var o=this;this.$api.sendRequest({url:"/api/member/id",success:function(n){n.code>=0&&(o.memberId=n.data)}})},closeGetItNow:function(){this.$refs.linkSuccessPopup.close()},openSharePopup:function(){this.$refs.sharePopup.open()},closeSharePopup:function(){this.$refs.sharePopup.close()},showPrice:function(o){var n=o.discount_price;return o.member_price&&parseFloat(o.member_price)<parseFloat(n)&&(n=o.member_price),n},openRulePopup:function(){this.$refs.rulePopup.open()},closeRulePopup:function(){this.$refs.rulePopup.close()},toLook:function(){this.$util.redirectTo("/otherpages/member/balance_detail/balance_detail",{group_id:this.groupInfoList.group_id,from_type:"hongbao"})},toGuaFen:function(){this.$util.redirectTo("/otherpages/hongbao/list/list",{})},toIndex:function(){this.$util.redirectTo("/pages/index/index/index",{})},GetItNowPopup:function(){this.$refs.linkSuccessPopup.open()},closeFriend:function(){this.$refs.friendsPopup.close()},friend:function(){this.$refs.friendsPopup.open()},goFriend:function(){this.closeFriend(),this.openSharePopup()},getInfo:function(){var o=this;this.$api.sendRequest({url:"/hongbao/api/hongbao/info",data:{hongbao_id:this.hongBaoId,inviter_id:""==this.inviterId?0:this.inviterId,group_id:""==this.groupId?0:this.groupId},success:function(n){if(n.code>=0&&(o.hongbaoInfo=n.data,o.groupInfoList=n.data.group_info,o.memberList=n.data.group_info.member_list,o.groupId=n.data.group_info.group_id,o.hongbaoInfo.inviter_info&&(o.inviterInfo=n.data.inviter_info),o.memberList&&o.memberList.forEach((function(n){o.hongbaoInfo.member_id==n.member_id&&(o.money=n.money,o.start_time_coupon=n.coupon_start_time,o.end_time_coupon=n.coupon_end_time)})),""!=n.data.group_info)){Date.parse(new Date);if(o.groupInfoList.end_time-n.timestamp>0){var i=o.$util.countDown(o.groupInfoList.end_time-n.timestamp);o.seckillH=i.h,o.seckillI=i.i,o.seckillS=i.s}if(n.data.member_id!=n.data.group_info.header_id){var t=0;n.data.group_info.member_list.some((function(o){o.member_id==n.data.member_id&&(t+=1)})),1==n.data.group_info.status&&0==t?o.g_member_state=1:0==t&&(t+=1,o.$refs.linkPopup.open())}}}})},join:function(){var n=this;o.getStorageSync("token")?this.$api.sendRequest({url:"/hongbao/api/hongbao/divide",data:{group_id:this.groupId},success:function(o){o.code>=0?(n.$util.showToast({title:"加入成功"}),n.closeLinkPopup(),n.getInfo(),n.groupInfoList.num-n.groupInfoList.member_list.length>1&&n.friend(),n.groupInfoList.num-n.groupInfoList.member_list.length<=1&&n.GetItNowPopup()):(n.$util.showToast({title:o.message}),n.closeLinkPopup())}}):setTimeout((function(){n.$refs.login.open("/otherpages/hongbao/index/index?hongbao_id="+n.hongBaoId+"&group_id="+n.groupId+"&inviter_id="+n.inviterId)}))},getLaunch:function(){var n=this;o.getStorageSync("token")?this.$api.sendRequest({url:"/hongbao/api/hongbao/launch",data:{hongbao_id:this.hongBaoId},success:function(o){o.code>=0?(n.groupId=o.data,n.isShow,n.getInfo()):n.$util.showToast({title:"红包已被瓜分完，下次再来吧"}),n.$forceUpdate()}}):setTimeout((function(){n.$refs.login.open("/otherpages/hongbao/index/index?hongbao_id="+n.hongBaoId+"&group_id=")}))},openPosterPopup:function(){this.$util.redirectTo("/otherpages/hongbao/poster/poster",{hongbao_id:this.hongBaoId,group_id:this.groupId,inviter_id:this.hongbaoInfo.member_id})},closePosterPopup:function(){this.$refs.posterPopup.close()},closeLinkPopup:function(){this.$refs.linkPopup.close()},copyUrl:function(){var o=this,n=this.$config.h5Domain+"/otherpages/hongbao/index/index";this.hongBaoId&&(n+="?hongbao_id="+this.hongBaoId+"&group_id="+this.groupInfoList.group_id+"&inviter_id="+this.hongbaoInfo.member_id),this.$util.copy(n,(function(){o.closeSharePopup()}))},imageError:function(o){this.list[o].goods_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},headerimageError:function(o){this.list[o].headimg=this.$util.getDefaultImage().default_headimg,this.$forceUpdate()},onPageHide:function(){clearInterval(this.seckillInterval)},getMemberInfo:function(){var o=this;this.$api.sendRequest({url:"/api/member/info",success:function(n){0==n.code&&(o.memberInfo=n.data),o.$refs.loadingCover&&o.$refs.loadingCover.hide()},fail:function(n){o.$refs.loadingCover&&o.$refs.loadingCover.hide()}})}}};n.default=e}).call(this,i("543d")["default"])}},[["ed42","common/runtime","common/vendor"]]]);