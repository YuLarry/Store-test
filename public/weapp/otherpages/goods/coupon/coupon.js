(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/goods/coupon/coupon"],{2351:function(t,n,o){"use strict";o.r(n);var e=o("95f3"),i=o.n(e);for(var s in e)"default"!==s&&function(t){o.d(n,t,(function(){return e[t]}))}(s);n["default"]=i.a},"5bbd":function(t,n,o){"use strict";var e=o("a238"),i=o.n(e);i.a},"6e73":function(t,n,o){"use strict";o.r(n);var e=o("b1d4"),i=o("2351");for(var s in i)"default"!==s&&function(t){o.d(n,t,(function(){return i[t]}))}(s);o("5bbd");var u,c=o("f0c5"),a=Object(c["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],u);n["default"]=a.exports},"95f3":function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=i(o("ccd8"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){Promise.all([o.e("common/vendor"),o.e("components/ns-show-toast/ns-show-toast")]).then(function(){return resolve(o("691c"))}.bind(null,o)).catch(o.oe)},u={data:function(){return{list:[],couponBtnSwitch:!1}},components:{nsShowToast:s},onShow:function(){this.$langConfig.refresh()},mixins:[e.default],methods:{liClick:function(t,n){0==t.useState?this.receiveCoupon(t,n):this.toGoodsList(t,n)},receiveCoupon:function(n,o){var e=this;if(!this.couponBtnSwitch){this.couponBtnSwitch=!0;var i=t.getStorageSync("token");""!=i?this.$api.sendRequest({url:"/coupon/api/coupon/receive",data:{coupon_type_id:n.coupon_type_id,get_type:2},success:function(t){e.couponBtnSwitch=!1;var o="";o="领取成功，快去使用吧";var i=e.list;if(1==t.data.is_exist&&t.code<0&&(o="您已领取过该优惠券，快去使用吧"),1==t.data.is_exist)for(var s=0;s<i.length;s++)i[s].coupon_type_id==n.coupon_type_id&&(i[s].useState=1);else for(var u=0;u<i.length;u++)i[u].coupon_type_id==n.coupon_type_id&&(i[u].useState=2);e.$util.showToast({title:o})},fail:function(t){e.couponBtnSwitch=!1}}):(this.couponBtnSwitch=!1,this.$refs.login.open("/pages/login/login/login"))}},getMemberCounponList:function(t){var n=this;this.$api.sendRequest({url:"/coupon/api/coupon/typepagelists",data:{page:t.num,page_size:t.size},success:function(o){var e=[],i=o.message;0==o.code&&o.data?e=o.data.list:n.$util.showToast({title:i}),t.endSuccess(e.length),e.length&&e.forEach((function(t){t.useState=0})),1==t.num&&(n.list=[]),n.list=n.list.concat(e),n.$refs.loadingCover&&n.$refs.loadingCover.hide()},fail:function(){t.endErr(),this.$refs.loadingCover&&this.$refs.loadingCover.hide()}})},imageError:function(t){this.list[t].logo=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},couponImageError:function(t){this.list[t].image=this.$util.img("upload/uniapp/goods/coupon.png"),this.$forceUpdate()},toGoodsList:function(t){1!=t.goods_type?this.$util.redirectTo("/pages/goods/list/list",{coupon:t.coupon_type_id}):this.$util.redirectTo("/pages/goods/list/list",{})}},onShareAppMessage:function(t){var n="送您一张优惠券,快来领取吧",o="/otherpages/goods/coupon/coupon";return{title:n,path:o,success:function(t){},fail:function(t){}}}};n.default=u}).call(this,o("543d")["default"])},a238:function(t,n,o){},a87f:function(t,n,o){"use strict";(function(t){o("5558");e(o("66fd"));var n=e(o("6e73"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,o("543d")["createPage"])},b1d4:function(t,n,o){"use strict";o.d(n,"b",(function(){return i})),o.d(n,"c",(function(){return s})),o.d(n,"a",(function(){return e}));var e={nsEmpty:function(){return o.e("components/ns-empty/ns-empty").then(o.bind(null,"1928"))},loadingCover:function(){return o.e("components/loading-cover/loading-cover").then(o.bind(null,"30be"))},nsShowToast:function(){return Promise.all([o.e("common/vendor"),o.e("components/ns-show-toast/ns-show-toast")]).then(o.bind(null,"691c"))},nsLogin:function(){return Promise.all([o.e("common/vendor"),o.e("components/ns-login/ns-login")]).then(o.bind(null,"2e9e"))}},i=function(){var t=this,n=t.$createElement,o=(t._self._c,t.$util.img("upload/uniapp/coupon/coupon_ysy.png")),e=t.__map(t.list,(function(n,o){var e=t.__get_orig(n),i=n.validity_type?null:t.$util.timeStampTurnTime(n.end_time),s="reward"==n.type?parseInt(n.money):null,u="discount"==n.type?parseFloat(n.discount):null;return{$orig:e,g1:i,m0:s,m1:u}}));t.$mp.data=Object.assign({},{$root:{g0:o,l0:e}})},s=[]}},[["a87f","common/runtime","common/vendor"]]]);