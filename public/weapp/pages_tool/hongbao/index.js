(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_tool/hongbao/index"],{"0fd1":function(n,o,i){"use strict";(function(n){i("34b0");t(i("66fd"));var o=t(i("d698"));function t(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=i,n(o.default)}).call(this,i("543d")["createPage"])},"18f2":function(n,o,i){},5037:function(n,o,i){"use strict";(function(n){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t=function(){i.e("components/uni-popup/uni-popup").then(function(){return resolve(i("92aa"))}.bind(null,i)).catch(i.oe)},e={components:{uniPopup:t},data:function(){return{hongbaoInfo:{},groupInfoList:[],goodsRecommend:[],isShow:!1,isNow:!1,seckillH:"",seckillI:"",seckillS:"",seckillInterval:null,hongBaoId:"",groupId:"",memberInfo:{},money:"",memberList:[],inviterId:"",inviterInfo:{},is_exit:0,g_member_state:0,start_time_coupon:"",end_time_coupon:"",memberId:0,token:null}},onLoad:function(o){var i=this;if(o.source_member&&n.setStorageSync("source_member",o.source_member),o.scene){var t=decodeURIComponent(o.scene);t=t.split("&"),t.length&&t.forEach((function(o){-1!=o.indexOf("hid")&&(i.hongBaoId=o.split("-")[1]),-1!=o.indexOf("id")&&(i.inviterId=o.split("-")[1]),-1!=o.indexOf("gid")&&(i.groupId=o.split("-")[1]),-1!=o.indexOf("m")&&n.setStorageSync("source_member",o.split("-")[1]),-1!=o.indexOf("is_test")&&n.setStorageSync("is_test",1)}))}else o.hid?(o.hid&&(this.hongBaoId=o.hid),o.id&&(this.inviterId=o.id),o.gid&&(this.groupId=o.gid)):(o.hongbao_id&&(this.hongBaoId=o.hongbao_id),o.inviter_id&&(this.inviterId=o.inviter_id),o.group_id&&(this.groupId=o.group_id))},filters:{date:function(n){return String(n).slice(0,10)},guolv:function(n){return n=String(n),n.length>=6?n.substr(0,1)+"****"+n.substr(n.split("").length-1,n.split("").length):n},int:function(n){var o=String(n),i=o.split(".");return parseInt(i[1])>0?o:i[0]}},onShow:function(){var o=this;this.getInfo(),this.getMemberInfo(),this.$util.getMemberId().then((function(n){o.memberId=n})),n.getStorageSync("token")&&n.getStorageSync("source_member")&&this.$util.onSourceMember(n.getStorageSync("source_member"))},onShareAppMessage:function(n){var o="/pages_tool/hongbao/index?hid="+this.hongbaoInfo.hongbao_id+"&gid="+this.groupInfoList.group_id+"&id="+this.hongbaoInfo.member_id;return this.memberId&&(o+="&source_member="+this.memberId),{title:"仅差一人即可瓜分"+this.hongbaoInfo.money+"元红包",path:o,success:function(n){console.log(o,"00")},fail:function(n){console.log(o,"11")}}},onShareTimeline:function(){var n="仅差一人即可瓜分"+this.hongbaoInfo.money+"元红包",o="hid="+this.hongbaoInfo.hongbao_id+"&gid="+this.groupInfoList.group_id+"&id="+this.hongbaoInfo.member_id;return this.memberId&&(o+="&source_member="+this.memberId),{title:n,query:o,imageUrl:""}},methods:{closeGetItNow:function(){this.$refs.linkSuccessPopup.close()},openSharePopup:function(){this.$refs.sharePopup.open()},closeSharePopup:function(){this.$refs.sharePopup.close()},showPrice:function(n){var o=n.discount_price;return n.member_price&&parseFloat(n.member_price)<parseFloat(o)&&(o=n.member_price),o},openRulePopup:function(){this.$refs.rulePopup.open()},closeRulePopup:function(){this.$refs.rulePopup.close()},toLook:function(){this.$util.redirectTo("/pages_tool/member/balance_detail",{group_id:this.groupInfoList.group_id,from_type:"hongbao"})},toGuaFen:function(){this.$util.redirectTo("/pages_tool/hongbao/list",{})},toIndex:function(){this.$util.redirectTo("/pages/index/index",{})},GetItNowPopup:function(){this.$refs.linkSuccessPopup.open()},closeFriend:function(){this.$refs.friendsPopup.close()},friend:function(){this.$refs.friendsPopup.open()},goFriend:function(){this.closeFriend(),this.openSharePopup()},getInfo:function(){var n=this;this.$api.sendRequest({url:"/hongbao/api/hongbao/info",data:{hongbao_id:this.hongBaoId,inviter_id:""==this.inviterId?0:this.inviterId,group_id:""==this.groupId?0:this.groupId},success:function(o){if(o.code>=0&&(n.hongbaoInfo=o.data,n.groupInfoList=o.data.group_info,n.memberList=o.data.group_info.member_list,n.groupId=o.data.group_info.group_id,n.hongbaoInfo.inviter_info&&(n.inviterInfo=o.data.inviter_info),n.memberList&&n.memberList.forEach((function(o){n.hongbaoInfo.member_id==o.member_id&&(n.money=o.money,n.start_time_coupon=o.coupon_start_time,n.end_time_coupon=o.coupon_end_time)})),""!=o.data.group_info)){Date.parse(new Date);if(n.groupInfoList.end_time-o.timestamp>0){var i=n.$util.countDown(n.groupInfoList.end_time-o.timestamp);n.seckillH=i.h,n.seckillI=i.i,n.seckillS=i.s}if(o.data.member_id!=o.data.group_info.header_id){var t=0;o.data.group_info.member_list.some((function(n){n.member_id==o.data.member_id&&(t+=1)})),1==o.data.group_info.status&&0==t?n.g_member_state=1:0==t&&(t+=1,n.$refs.linkPopup.open())}}}})},join:function(){var o=this;n.getStorageSync("token")?this.$api.sendRequest({url:"/hongbao/api/hongbao/divide",data:{group_id:this.groupId},success:function(n){n.code>=0?(o.$util.showToast({title:"加入成功"}),o.closeLinkPopup(),o.getInfo(),o.groupInfoList.num-o.groupInfoList.member_list.length>1&&o.friend(),o.groupInfoList.num-o.groupInfoList.member_list.length<=1&&o.GetItNowPopup()):(o.$util.showToast({title:n.message}),o.closeLinkPopup())}}):setTimeout((function(){o.$refs.login.open("/pages_tool/hongbao/index?hongbao_id="+o.hongBaoId+"&group_id="+o.groupId+"&inviter_id="+o.inviterId)}))},getLaunch:function(){var o=this;n.getStorageSync("token")?this.$api.sendRequest({url:"/hongbao/api/hongbao/launch",data:{hongbao_id:this.hongBaoId},success:function(n){n.code>=0?(o.groupId=n.data,o.isShow,o.getInfo()):o.$util.showToast({title:"红包已被瓜分完，下次再来吧"}),o.$forceUpdate()}}):setTimeout((function(){o.$refs.login.open("/pages_tool/hongbao/index?hongbao_id="+o.hongBaoId+"&group_id=")}))},openPosterPopup:function(){this.$util.redirectTo("/pages_tool/hongbao/poster",{hongbao_id:this.hongBaoId,group_id:this.groupId,inviter_id:this.hongbaoInfo.member_id})},closePosterPopup:function(){this.$refs.posterPopup.close()},closeLinkPopup:function(){this.$refs.linkPopup.close()},copyUrl:function(){var n=this,o=this.$config.h5Domain+"/pages_tool/hongbao/index";this.hongBaoId&&(o+="?hongbao_id="+this.hongBaoId+"&group_id="+this.groupInfoList.group_id+"&inviter_id="+this.hongbaoInfo.member_id),this.$util.copy(o,(function(){n.closeSharePopup()}))},imageError:function(n){this.list[n].goods_image=this.$util.getDefaultImage().goods,this.$forceUpdate()},headerimageError:function(n){this.list[n].headimg=this.$util.getDefaultImage().head,this.$forceUpdate()},onPageHide:function(){clearInterval(this.seckillInterval)},getMemberInfo:function(){var n=this;this.$api.sendRequest({url:"/api/member/info",success:function(o){0==o.code&&(n.memberInfo=o.data),n.$refs.loadingCover&&n.$refs.loadingCover.hide()},fail:function(o){n.$refs.loadingCover&&n.$refs.loadingCover.hide()}})}}};o.default=e}).call(this,i("543d")["default"])},"8ca5":function(n,o,i){"use strict";var t=i("bec3"),e=i.n(t);e.a},9502:function(n,o,i){"use strict";var t=i("db24"),e=i.n(t);e.a},"98c4":function(n,o,i){"use strict";var t=i("18f2"),e=i.n(t);e.a},b5ede:function(n,o,i){"use strict";i.d(o,"b",(function(){return e})),i.d(o,"c",(function(){return u})),i.d(o,"a",(function(){return t}));var t={uniCountDown:function(){return i.e("components/uni-count-down/uni-count-down").then(i.bind(null,"1339"))},uniPopup:function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"92aa"))},nsLogin:function(){return i.e("components/ns-login/ns-login").then(i.bind(null,"2893"))},loadingCover:function(){return i.e("components/loading-cover/loading-cover").then(i.bind(null,"790a"))}},e=function(){var n=this,o=n.$createElement,i=(n._self._c,2!=n.groupInfoList.status?n.$util.img("public/uniapp/hongbao/hongbao_bg.png"):null),t=2!=n.groupInfoList.status?n.$util.img("public/uniapp/hongbao/index.png"):null,e=2!=n.groupInfoList.status&&""==n.groupInfoList&&1==n.hongbaoInfo.status?n._f("int")(n.hongbaoInfo.money):null,u=2!=n.groupInfoList.status&&(""!=n.groupInfoList&&1==n.hongbaoInfo.status&&0==n.groupInfoList.status||2==n.groupInfoList.status)&&n.groupInfoList.member_list.length>0?n.__map(n.groupInfoList.member_list,(function(o,i){var t=n.__get_orig(o),e=""!=o.headimg?n.$util.img(o.headimg):null,u=""==o.headimg?n.$util.img("public/uniapp/default_img/head.png"):null;return{$orig:t,g2:e,g3:u}})):null,s=2!=n.groupInfoList.status&&(""!=n.groupInfoList&&1==n.hongbaoInfo.status&&0==n.groupInfoList.status||2==n.groupInfoList.status)?n._f("int")(n.hongbaoInfo.money):null,r=2!=n.groupInfoList.status&&(""!=n.groupInfoList&&1==n.hongbaoInfo.status&&0==n.groupInfoList.status||2==n.groupInfoList.status)?n.$util.img("public/uniapp/hongbao/bg_left.png"):null,g=2!=n.groupInfoList.status&&(""!=n.groupInfoList&&1==n.hongbaoInfo.status&&0==n.groupInfoList.status||2==n.groupInfoList.status)?n.$util.img("public/uniapp/hongbao/bg_right.png"):null,a=2!=n.groupInfoList.status&&""!=n.groupInfoList&&1==n.groupInfoList.status&&0==n.g_member_state&&n.groupInfoList.member_list.length>0?n.__map(n.groupInfoList.member_list,(function(o,i){var t=n.__get_orig(o),e=""!=o.headimg?n.$util.img(o.headimg):null,u=""==o.headimg?n.$util.img("public/uniapp/default_img/head.png"):null;return{$orig:t,g6:e,g7:u}})):null,p=2!=n.groupInfoList.status?n.$util.img("public/uniapp/hongbao/active.png"):null,l=2!=n.groupInfoList.status?n.$util.img("public/uniapp/hongbao/jiantou.png"):null,f=2!=n.groupInfoList.status?n.$util.img("public/uniapp/hongbao/friend.png"):null,d=2!=n.groupInfoList.status?n.$util.img("public/uniapp/hongbao/jiantou.png"):null,c=2!=n.groupInfoList.status?n.$util.img("public/uniapp/hongbao/reward.png"):null,h=2==n.groupInfoList.status?n.$util.img("public/uniapp/order/status-wrap-bg.png"):null,m=2==n.groupInfoList.status&&n.groupInfoList.member_list.length>0?n.__map(n.groupInfoList.member_list,(function(o,i){var t=n.__get_orig(o),e=""!=o.headimg?n.$util.img(o.headimg):null,u=""==o.headimg?n.$util.img("public/uniapp/default_img/head.png"):null;return{$orig:t,g14:e,g15:u}})):null,b=2==n.groupInfoList.status?n.$util.timeStampTurnTime(n.hongbaoInfo.start_time):null,_=2==n.groupInfoList.status?n.$util.timeStampTurnTime(n.hongbaoInfo.end_time):null,I=2==n.groupInfoList.status?n.$util.timeStampTurnTime(n.groupInfoList.start_time):null,$=n.$util.img("public/uniapp/hongbao/rule_head.png"),v=n.$util.timeStampTurnTime(n.hongbaoInfo.start_time),L=n.$util.timeStampTurnTime(n.hongbaoInfo.end_time),S=n.inviterInfo?n.$util.img("public/uniapp/hongbao/popup_bg.png"):null,P=n.inviterInfo?n.$util.img(n.inviterInfo.headimg?n.$util.img(n.inviterInfo.headimg):n.$util.getDefaultImage().head):null,k=n.inviterInfo?n._f("guolv")(n.inviterInfo.nickname):null,w=n.inviterInfo?n.$util.img("public/uniapp/hongbao/btn_bg.png"):null,y=n.inviterInfo?n.$util.img("public/uniapp/hongbao/close.png"):null,T=n.inviterInfo?null:n.$util.img("public/uniapp/hongbao/popup_bg.png"),x=n.inviterInfo?null:n.$util.img(n.inviterInfo.headimg?n.$util.img(n.inviterInfo.headimg):n.$util.getDefaultImage().head),B=n.inviterInfo?null:n._f("guolv")(n.groupInfoList.header_nickname),D=n.inviterInfo?null:n.$util.img("public/uniapp/hongbao/btn_bg.png"),M=n.inviterInfo?null:n.$util.img("public/uniapp/hongbao/close.png"),O=n.$util.img("public/uniapp/hongbao/popup_bg.png"),R=n._f("guolv")(n.groupInfoList.header_nickname),U=n._f("int")(n.hongbaoInfo.money),C=n.$util.img("public/uniapp/hongbao/btn_bg.png"),j=n.$util.img("public/uniapp/hongbao/close.png"),q=n.$util.img("public/uniapp/hongbao/popup_bg.png"),F=n._f("int")(n.hongbaoInfo.money),N=n.$util.img("public/uniapp/hongbao/btn_bg.png");n._isMounted||(n.e0=function(o){n.inviterInfo.headimg=n.$util.getDefaultImage().head},n.e1=function(o){n.inviterInfo.headimg=n.$util.getDefaultImage().head}),n.$mp.data=Object.assign({},{$root:{g0:i,g1:t,f0:e,l0:u,f1:s,g4:r,g5:g,l1:a,g8:p,g9:l,g10:f,g11:d,g12:c,g13:h,l2:m,g16:b,g17:_,g18:I,g19:$,g20:v,g21:L,g22:S,g23:P,f2:k,g24:w,g25:y,g26:T,g27:x,f3:B,g28:D,g29:M,g30:O,f4:R,f5:U,g31:C,g32:j,g33:q,f6:F,g34:N}})},u=[]},bec3:function(n,o,i){},bf17:function(n,o,i){"use strict";i.r(o);var t=i("5037"),e=i.n(t);for(var u in t)"default"!==u&&function(n){i.d(o,n,(function(){return t[n]}))}(u);o["default"]=e.a},d698:function(n,o,i){"use strict";i.r(o);var t=i("b5ede"),e=i("bf17");for(var u in e)"default"!==u&&function(n){i.d(o,n,(function(){return e[n]}))}(u);i("8ca5"),i("98c4"),i("9502");var s,r=i("f0c5"),g=Object(r["a"])(e["default"],t["b"],t["c"],!1,null,"52582c10",null,!1,t["a"],s);o["default"]=g.exports},db24:function(n,o,i){}},[["0fd1","common/runtime","common/vendor"]]]);