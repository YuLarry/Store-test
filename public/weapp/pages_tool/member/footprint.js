(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_tool/member/footprint"],{4331:function(t,e,i){"use strict";(function(t){i("34b0");n(i("66fd"));var e=n(i("b189"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},4901:function(t,e,i){"use strict";i.r(e);var n=i("6a2f"),o=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a},"6a2f":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=[],n={data:function(){return{goodsList:[],current:-1,manage:!1,idArr:[],mescroll:null,isSub:!1,token:null}},onShow:function(){var e=this;t.getStorageSync("token")?(this.token=t.getStorageSync("token"),this.$refs.mescroll&&this.$refs.mescroll.refresh()):setTimeout((function(){e.$refs.login.open("/pages_tool/member/footprint")}))},computed:{selected:function(){return 0==this.idArr.length},isAll:function(){return this.idArr.length==this.goodsList.length},storeToken:function(){return this.$store.state.token}},methods:{getListData:function(t){var e=this;this.mescroll=t,this.$api.sendRequest({url:"/api/goodsbrowse/page",data:{page:t.num,page_size:t.size},success:function(n){var o=[],r=n.message;0==n.code&&n.data?o=n.data.list:e.$util.showToast({title:r}),t.endSuccess(o.length),1==t.num&&(e.goodsList=[]),e.goodsList=e.goodsList.concat(o),i=[],e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(i){t.endErr(),e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},longpress:function(t){this.current=t},deleteFootprint:function(){var t=this;0!=this.idArr.length?this.isSub||(this.isSub=!0,this.$api.sendRequest({url:"/api/goodsbrowse/delete",data:{id:this.idArr.toString()},success:function(e){t.isSub=!1,e.code>=0?(t.idArr=[],t.mescroll.resetUpScroll()):t.$util.showToast({title:e.message})}})):this.$util.showToast({title:"请选择要删除的数据！"})},manageFootprint:function(){this.manage=!this.manage,i=[]},goodsImg:function(t){var e=t.split(",");return e[0]?this.$util.img(e[0],{size:"mid"}):this.$util.getDefaultImage().goods},imgError:function(t){i=[],this.goodsList[t].goods_image=this.$util.getDefaultImage().goods},showPrice:function(t){var e=t.discount_price;return t.member_price&&parseFloat(t.member_price)<parseFloat(e)&&(e=t.member_price),e},goodsTag:function(t){return t.label_name||""},datetime:function(t){var e=new Date;e.setTime(1e3*t.browse_time);var n=e.getFullYear(),o=e.getMonth()+1;o=o<10?"0"+o:o;var r=e.getDate();r=r<10?"0"+r:r;var s=n+"/"+o+"/"+r;if(-1==this.$util.inArray(s,i))return i.push(s),s},singleElection:function(t){-1==this.$util.inArray(t.id,this.idArr)?this.idArr.push(t.id):this.idArr.splice(this.$util.inArray(t.id,this.idArr),1),i=[]},allElection:function(){if(this.idArr.length!=this.goodsList.length){this.idArr=[];var t=[];this.goodsList.forEach((function(e){t.push(e.id)})),this.idArr=t}else this.idArr=[];i=[]},toDetail:function(t){this.$util.redirectTo("/pages/goods/detail",{goods_id:t.goods_id})}},watch:{storeToken:function(t,e){t&&(this.token=t,this.$refs.mescroll.refresh())}}};e.default=n}).call(this,i("543d")["default"])},b189:function(t,e,i){"use strict";i.r(e);var n=i("e0b9"),o=i("4901");for(var r in o)"default"!==r&&function(t){i.d(e,t,(function(){return o[t]}))}(r);i("b2fb");var s,u=i("f0c5"),a=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=a.exports},b2fb:function(t,e,i){"use strict";var n=i("d1e2"),o=i.n(n);o.a},d1e2:function(t,e,i){},e0b9:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={nsEmpty:function(){return i.e("components/ns-empty/ns-empty").then(i.bind(null,"2c4c"))},nsLogin:function(){return i.e("components/ns-login/ns-login").then(i.bind(null,"2893"))},loadingCover:function(){return i.e("components/loading-cover/loading-cover").then(i.bind(null,"790a"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.$lang("common.currencySymbol")),n=t.$lang("common.currencySymbol"),o=t.token&&t.goodsList.length?t.__map(t.goodsList,(function(e,i){var n=t.__get_orig(e),o=t.datetime(e),r=t.manage?t.$util.inArray(e.id,t.idArr):null,s=t.goodsImg(e.goods_image),u=t.goodsTag(e),a=""!=u?t.goodsTag(e):null,l=parseFloat(t.showPrice(e)).toFixed(2).split("."),c=parseFloat(t.showPrice(e)).toFixed(2).split("."),d=e.member_price&&e.member_price==t.showPrice(e),g=d?t.$util.img("public/uniapp/index/VIP.png"):null,f=d||1!=e.promotion_type?null:t.$util.img("public/uniapp/index/discount.png");return{$orig:n,m0:o,g0:r,m1:s,m2:u,m3:a,g1:l,g2:c,m5:d,g3:g,g4:f}})):null;t.$mp.data=Object.assign({},{$root:{m4:i,m6:n,l0:o}})},r=[]}},[["4331","common/runtime","common/vendor"]]]);