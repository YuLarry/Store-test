(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promotionpages-giftcard-present-present"],{1378:function(e,n,i){var t=i("24fb");n=t(!1),n.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.ns-present-bg[data-v-af308afc]{width:100%;height:%?300?%;background:url(https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/present_bg.png) no-repeat 0 0/100% 100%;z-index:0}.uni-popup__wrapper-box .share-title[data-v-af308afc]{line-height:%?60?%;font-size:%?32?%;padding:%?15?% 0;text-align:center}.uni-popup__wrapper-box .share-content[data-v-af308afc]{display:flex;display:-webkit-flex;-webkit-flex-wrap:wrap;-moz-flex-wrap:wrap;-ms-flex-wrap:wrap;-o-flex-wrap:wrap;flex-wrap:wrap;padding:%?80?% %?15?%}.uni-popup__wrapper-box .share-content .share-box[data-v-af308afc]{flex:1;text-align:center}.uni-popup__wrapper-box .share-content .share-box .share-btn[data-v-af308afc]{margin:0;padding:0;border:none;line-height:1;height:auto}.uni-popup__wrapper-box .share-content .share-box .share-btn uni-text[data-v-af308afc]{margin-top:%?20?%;font-size:%?24?%;display:block;color:#303133}.uni-popup__wrapper-box .share-content .share-box .iconfont[data-v-af308afc]{font-size:%?80?%;line-height:normal}.uni-popup__wrapper-box .share-content .share-box .iconfuzhilianjie[data-v-af308afc],\r\n.uni-popup__wrapper-box .share-content .share-box .iconpengyouquan[data-v-af308afc],\r\n.uni-popup__wrapper-box .share-content .share-box .iconhaowuquan[data-v-af308afc],\r\n.uni-popup__wrapper-box .share-content .share-box .iconiconfenxianggeihaoyou[data-v-af308afc]{color:#07c160}.uni-popup__wrapper-box .share-footer[data-v-af308afc]{height:%?90?%;line-height:%?90?%;border-top:%?2?% solid #eee;text-align:center}.present-body[data-v-af308afc]{background:#fff;padding:%?40?% %?30?%;margin:%?-120?% %?30?% 0;border-radius:%?10?%;z-index:2}.present-body .card-item[data-v-af308afc]{padding:%?15?% %?30?%;background:url(https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/giftcard.png) no-repeat 0 0/100% 100%;border-radius:%?20?%}.present-body .card-item .card-content[data-v-af308afc]{padding:%?30?% %?50?%}.present-body .card-item .card-content .card-name[data-v-af308afc]{font-size:%?40?%;color:#fff;max-height:%?160?%;overflow:hidden}.present-body .card-item .card-content .use-orno[data-v-af308afc]{color:#fff}.present-body .card-item .card-content .card-use[data-v-af308afc]{color:#fff}.present-body .card-item .card-content .card-num[data-v-af308afc]{margin-top:%?20?%;line-height:%?20?%;color:#fff}.present-body .card-item .card-content .card-id[data-v-af308afc]{margin-top:%?40?%;color:#fff}.present-btn[data-v-af308afc]{left:%?30?%;bottom:%?50?%;position:fixed;display:flex;justify-content:space-around;width:92%}.present-btn uni-button[data-v-af308afc]{padding:0 %?68?%}.copy-present-btn[data-v-af308afc]{color:#000!important}.launch-mask[data-v-af308afc]{position:fixed;top:%?0?%;left:%?0?%;width:100%;height:100%;background:rgba(0,0,0,.8)}.launch-mask .mask-img[data-v-af308afc]{text-align:right}.launch-mask .mask-img uni-image[data-v-af308afc]{width:%?400?%;height:%?400?%}',""]),e.exports=n},1604:function(e,n,i){"use strict";var t=i("8f68"),a=i.n(t);a.a},"39c8":function(e,n,i){"use strict";i.r(n);var t=i("3e70"),a=i("60d2");for(var o in a)"default"!==o&&function(e){i.d(n,e,(function(){return a[e]}))}(o);i("1604");var r,c=i("f0c5"),s=Object(c["a"])(a["default"],t["b"],t["c"],!1,null,"af308afc",null,!1,t["a"],r);n["default"]=s.exports},"3e70":function(e,n,i){"use strict";i.d(n,"b",(function(){return a})),i.d(n,"c",(function(){return o})),i.d(n,"a",(function(){return t}));var t={uniPopup:i("2d2c").default,loadingCover:i("b1ae").default},a=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("v-uni-view",{},[i("v-uni-view",{staticClass:"ns-present-bg"}),i("v-uni-view",{staticClass:"present-body"},[i("v-uni-view",{staticClass:"card-item margin-bottom",style:{background:e.$util.img(e.cardinfo.card_cover)?"url("+e.$util.img(e.cardinfo.card_cover)+") no-repeat 0 0/100% 100%":"url(https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/gitcard_default3.png) no-repeat 0 0/100% 100%"}},[i("v-uni-view",{staticClass:"card-content"},[i("v-uni-view",{staticClass:"card-name"},[e._v(e._s(e.cardinfo.card_name))]),i("v-uni-view",{staticClass:"card-use"},[e._v("礼品卡权益")]),e.cardinfo.balance>0&&e.cardinfo.point>0&&e.cardinfo.goods_num>0?i("v-uni-view",{staticClass:"card-num"},[e._v("￥"+e._s(e.cardinfo.balance)+"+"+e._s(e.cardinfo.point)+"积分+商品*"+e._s(e.cardinfo.goods_num))]):e.cardinfo.balance>0&&0==e.cardinfo.point?i("v-uni-view",{staticClass:"card-num"},[e._v("￥"+e._s(e.cardinfo.balance))]):0==e.cardinfo.balance&&e.cardinfo.point>0?i("v-uni-view",{staticClass:"card-num"},[e._v(e._s(e.cardinfo.point)+" 积分")]):0==e.cardinfo.balance&&0==e.cardinfo.point&&e.cardinfo.goods_num>0?i("v-uni-view",{staticClass:"card-num"},[e._v("商品*"+e._s(e.cardinfo.goods_num))]):e.cardinfo.balance>0&&e.cardinfo.point>0&&0==e.cardinfo.goods_num?i("v-uni-view",{staticClass:"card-num"},[e._v("￥"+e._s(e.cardinfo.balance)+"+"+e._s(e.cardinfo.point)+"积分")]):e.cardinfo.balance>0&&0==e.cardinfo.point&&e.cardinfo.goods_num>0?i("v-uni-view",{staticClass:"card-num"},[e._v("￥"+e._s(e.cardinfo.balance)+"+商品*"+e._s(e.cardinfo.goods_num))]):0==e.cardinfo.balance&&e.cardinfo.point>0&&e.cardinfo.goods_num>0?i("v-uni-view",{staticClass:"card-num"},[e._v(e._s(e.cardinfo.point)+"积分+商品*"+e._s(e.cardinfo.goods_num))]):e._e(),i("v-uni-view",{staticClass:"card-id"},[e._v("NO."+e._s(e.cardinfo.number))])],1)],1),i("v-uni-view",[i("v-uni-view",{staticStyle:{"font-weight":"600"}},[e._v("给TA留言:")]),i("v-uni-textarea",{staticClass:"info",attrs:{maxlength:"30",placeholder:"请输入留言内容，最多30个字","placeholder-style":"color:#b1b2b6; font-size:30rpx;"},on:{input:function(n){arguments[0]=n=e.$handleEvent(n),e.oninput.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"present-btn"},[i("v-uni-button",{attrs:{type:"primary"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.openSharePopup.apply(void 0,arguments)}}},[e._v("赠送给好友")])],1),i("v-uni-view",{on:{touchmove:function(n){n.preventDefault(),n.stopPropagation(),arguments[0]=n=e.$handleEvent(n)}}},[i("uni-popup",{ref:"sharePopup",staticClass:"share-popup",attrs:{type:"bottom"}},[i("v-uni-view",[i("v-uni-view",{staticClass:"share-title"},[e._v("分享")]),i("v-uni-view",{staticClass:"share-content"},[i("v-uni-view",{staticClass:"share-box",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.copyUrl.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"share-btn",attrs:{plain:!0}},[i("v-uni-view",{staticClass:"iconfont iconfuzhilianjie"}),i("v-uni-text",[e._v("复制链接")])],1)],1)],1),i("v-uni-view",{staticClass:"share-footer",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.closeSharePopup.apply(void 0,arguments)}}},[i("v-uni-text",[e._v("取消分享")])],1)],1)],1)],1),1==e.show?i("v-uni-view",{staticClass:"launch-mask",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.hide()}}},[i("v-uni-view",{staticClass:"mask-img"},[i("v-uni-image",{attrs:{src:e.$util.img("https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/share.png"),mode:"aspectFit"}})],1)],1):e._e(),i("loading-cover",{ref:"loadingCover"})],1)},o=[]},"60d2":function(e,n,i){"use strict";i.r(n);var t=i("a217"),a=i.n(t);for(var o in t)"default"!==o&&function(e){i.d(n,e,(function(){return t[e]}))}(o);n["default"]=a.a},"8f68":function(e,n,i){var t=i("1378");"string"===typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);var a=i("4f06").default;a("5a1f717b",t,!0,{sourceMap:!1,shadowMode:!1})},9523:function(e,n){function i(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}e.exports=i},"9f38":function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Weixin=void 0;var t=function(){var e=i("bc9d");this.init=function(n){e.config({debug:!1,appId:n.appId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["chooseWXPay","openAddress","updateAppMessageShareData","updateTimelineShareData","scanQRCode"]})},this.pay=function(n,i){e.ready((function(){e.chooseWXPay({timestamp:n.timestamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign,success:function(e){"function"==typeof i&&i(e)}})}))},this.openAddress=function(n){e.ready((function(){e.openAddress({success:function(e){"function"==typeof n&&n(e)},fail:function(e){alert(JSON.stringify(e))}})}))},this.setShareData=function(n,i){e.ready((function(){e.updateAppMessageShareData({title:n.title||"",desc:n.desc||"",link:n.link||"",imgUrl:n.imgUrl||"",success:function(){"function"==typeof i&&i(res)}}),e.updateTimelineShareData({title:n.title||"",link:n.link||"",imgUrl:n.imgUrl||"",success:function(){"function"==typeof i&&i(res)}})}))},this.scanQRCode=function(n){e.ready((function(){e.scanQRCode({needResult:1,scanType:["qrCode"],success:function(e){"function"==typeof n&&n(e)}})}))}};n.Weixin=t},a217:function(e,n,i){"use strict";var t=i("4ea4");i("acd8"),i("e25e"),i("ac1f"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i("9f38"),o=t(i("2d2c")),r={components:{uniPopup:o.default},data:function(){return{cardinfo:[],id:"",member_id:"",leav_message:"",transfer_id:"",shareTitle:"",shareImageurl:"",show:!1}},onLoad:function(e){var n=e.id;this.getData(n),this.id=e.id},onShow:function(){this.$langConfig.refresh()},methods:{shareGift:function(){var e=this,n=this.transfer_id;this.$util.isWeiXin()&&this.$api.sendRequest({url:"/wechat/api/wechat/share",data:{},success:function(i){if(0==i.code){var t=new a.Weixin,o=e.$config.h5Domain+"/promotionpages/giftcard/present/accept?transfer_id="+n;t.setShareData({title:"送你一张礼品卡",desc:"快来领取吧，手慢就没有啦！",link:o,imgUrl:e.$util.img("https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/gift_bag3.png")})}}})},getData:function(e){var n=this;this.$api.sendRequest({url:"/giftcard/api/giftcard/transfer",data:{id:e},success:function(e){0==e.code&&e.data&&(n.cardinfo=e.data,n.member_id=e.data.use_member_id),n.$refs.loadingCover&&n.$refs.loadingCover.hide()},fail:function(e){mescroll.endErr(),n.$refs.loadingCover&&n.$refs.loadingCover.hide()}})},oninput:function(e){var n=e.target.value;this.leav_message=n},openSharePopup:function(){this.$refs.sharePopup.open(),this.actionTransfer(0)},closeSharePopup:function(){this.$refs.sharePopup.close()},actionTransfer:function(e){var n=this;this.$api.sendRequest({url:"/giftcard/api/giftcard/actiontransfer",data:{id:this.id,use_member_id:this.member_id,leav_message:this.leav_message},success:function(e){0==e.code&&e.data&&(n.transfer_id=e.data.transfer_id,n.shareGift())}})},copyUrl:function(e){var n=this;if(this.actionTransfer(1),this.transfer_id){var i=this.$config.h5Domain+"/promotionpages/giftcard/present/accept?transfer_id="+this.transfer_id;this.$util.copy(i,(function(){n.closeSharePopup()}))}},onShare:function(){this.$api.sendRequest({url:"/weapp/api/weapp/share",success:function(e){}})},onShare2:function(){this.show=!0,this.closeSharePopup()},hide:function(){this.show=!1},openPosterPopup:function(){var e=this;this.getGiftcardPoster(),this.$refs.sharePopup.close(),this.$refs.posterPopup.open(),setTimeout((function(){var n=uni.createSelectorQuery().in(e).select(".poster-layer .image-wrap");n.fields({size:!0},(function(n){var i=n.width,t=parseFloat((740/i).toFixed(2));e.token,e.posterHeight=parseInt(1100/t)})).exec()}),100)},getGiftcardPoster:function(){var e={id:this.cardinfo.id};this.memberId&&(e.source_member=this.memberId),this.$api.sendRequest({url:"/giftcard/api/goods/poster",data:{page:"/promotionpages/bargain/detail/detail",qrcode_param:JSON.stringify(e)},success:function(e){e.code}})}},onShareAppMessage:function(){return{title:"送你一张礼品卡",imageUrl:this.$util.img("https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/gift_bag3.png"),path:"/promotionpages/giftcard/present/accept?transfer_id="+this.transfer_id,success:function(e){},fail:function(e){}}},onReady:function(){}};n.default=r},bc9d:function(e,n,i){i("c975"),i("ac1f"),i("466d"),i("5319"),i("1276");var t=i("9523");!function(n,i){e.exports=i(n)}(window,(function(e,n){function i(n,i,t){e.WeixinJSBridge?WeixinJSBridge.invoke(n,o(i),(function(e){c(n,e,t)})):d(n,t)}function a(n,i,t){e.WeixinJSBridge?WeixinJSBridge.on(n,(function(e){t&&t.trigger&&t.trigger(e),c(n,e,i)})):d(n,t||i)}function o(e){return(e=e||{}).appId=C.appId,e.verifyAppId=C.appId,e.verifySignType="sha1",e.verifyTimestamp=C.timestamp+"",e.verifyNonceStr=C.nonceStr,e.verifySignature=C.signature,e}function r(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function c(e,n,i){"openEnterpriseChat"==e&&(n.errCode=n.err_code),delete n.err_code,delete n.err_desc,delete n.err_detail;var t=n.errMsg;t||(t=n.err_msg,delete n.err_msg,t=function(e,n){var i=e,t=g[i];t&&(i=t);var a="ok";if(n){var o=n.indexOf(":");"confirm"==(a=n.substring(o+1))&&(a="ok"),"failed"==a&&(a="fail"),-1!=a.indexOf("failed_")&&(a=a.substring(7)),-1!=a.indexOf("fail_")&&(a=a.substring(5)),"access denied"!=(a=(a=a.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=a||(a="permission denied"),"config"==i&&"function not exist"==a&&(a="ok"),""==a&&(a="fail")}return i+":"+a}(e,t),n.errMsg=t),(i=i||{})._complete&&(i._complete(n),delete i._complete),t=n.errMsg||"",C.debug&&!i.isInnerInvoke&&alert(JSON.stringify(n));var a=t.indexOf(":");switch(t.substring(a+1)){case"ok":i.success&&i.success(n);break;case"cancel":i.cancel&&i.cancel(n);break;default:i.fail&&i.fail(n)}i.complete&&i.complete(n)}function s(e){if(e){for(var n=0,i=e.length;n<i;++n){var t=e[n],a=l[t];a&&(e[n]=a)}return e}}function d(e,n){if(!(!C.debug||n&&n.isInnerInvoke)){var i=g[e];i&&(e=i),n&&n._complete&&delete n._complete,console.log('"'+e+'",',n||"")}}function u(){return(new Date).getTime()}function p(n){b&&(e.WeixinJSBridge?n():m.addEventListener&&m.addEventListener("WeixinJSBridgeReady",n,!1))}if(!e.jWeixin){var f,l={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},g=function(){var e={};for(var n in l)e[l[n]]=n;return e}(),m=e.document,h=m.title,v=navigator.userAgent.toLowerCase(),_=navigator.platform.toLowerCase(),w=!(!_.match("mac")&&!_.match("win")),y=-1!=v.indexOf("wxdebugger"),b=-1!=v.indexOf("micromessenger"),S=-1!=v.indexOf("android"),k=-1!=v.indexOf("iphone")||-1!=v.indexOf("ipad"),x=(R=v.match(/micromessenger\/(\d+\.\d+\.\d+)/)||v.match(/micromessenger\/(\d+\.\d+)/))?R[1]:"",I={initStartTime:u(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},T={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:k?1:S?2:-1,clientVersion:x,url:encodeURIComponent(location.href)},C={},P={_completes:[]},M={state:0,data:{}};p((function(){I.initEndTime=u()}));var A=!1,V=[],O=(f={config:function(n){d("config",C=n);var t=!1!==C.check;p((function(){if(t)i(l.config,{verifyJsApiList:s(C.jsApiList)},function(){P._complete=function(e){I.preVerifyEndTime=u(),M.state=1,M.data=e},P.success=function(e){T.isPreVerifyOk=0},P.fail=function(e){P._fail?P._fail(e):M.state=-1};var e=P._completes;return e.push((function(){!function(e){if(!(w||y||C.debug||x<"6.0.2"||T.systemType<0)){var n=new Image;T.appId=C.appId,T.initTime=I.initEndTime-I.initStartTime,T.preVerifyTime=I.preVerifyEndTime-I.preVerifyStartTime,O.getNetworkType({isInnerInvoke:!0,success:function(e){T.networkType=e.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+T.version+"&o="+T.isPreVerifyOk+"&s="+T.systemType+"&c="+T.clientVersion+"&a="+T.appId+"&n="+T.networkType+"&i="+T.initTime+"&p="+T.preVerifyTime+"&u="+T.url;n.src=i}})}}()})),P.complete=function(n){for(var i=0,t=e.length;i<t;++i)e[i]();P._completes=[]},P}()),I.preVerifyStartTime=u();else{M.state=1;for(var e=P._completes,n=0,a=e.length;n<a;++n)e[n]();P._completes=[]}})),O.invoke||(O.invoke=function(n,i,t){e.WeixinJSBridge&&WeixinJSBridge.invoke(n,o(i),t)},O.on=function(n,i){e.WeixinJSBridge&&WeixinJSBridge.on(n,i)})},ready:function(e){0!=M.state?e():(P._completes.push(e),!b&&C.debug&&e())},error:function(e){x<"6.0.2"||(-1==M.state?e(M.data):P._fail=e)},checkJsApi:function(e){i("checkJsApi",{jsApiList:s(e.jsApiList)},(e._complete=function(e){if(S){var n=e.checkResult;n&&(e.checkResult=JSON.parse(n))}e=function(e){var n=e.checkResult;for(var i in n){var t=g[i];t&&(n[t]=n[i],delete n[i])}return e}(e)},e))},onMenuShareTimeline:function(e){a(l.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:e.title||h,desc:e.title||h,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){a(l.onMenuShareAppMessage,{complete:function(n){"favorite"===n.scene?i("sendAppMessage",{title:e.title||h,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):i("sendAppMessage",{title:e.title||h,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){a(l.onMenuShareQQ,{complete:function(){i("shareQQ",{title:e.title||h,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){a(l.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:e.title||h,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){a(l.onMenuShareQZone,{complete:function(){i("shareQZone",{title:e.title||h,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){i("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){i("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){i("startRecord",{},e)},stopRecord:function(e){i("stopRecord",{},e)},onVoiceRecordEnd:function(e){a("onVoiceRecordEnd",e)},playVoice:function(e){i("playVoice",{localId:e.localId},e)},pauseVoice:function(e){i("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){i("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){a("onVoicePlayEnd",e)},uploadVoice:function(e){i("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){i("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){i("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){i("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(S){var n=e.localIds;try{n&&(e.localIds=JSON.parse(n))}catch(e){}}},e))},getLocation:function(e){},previewImage:function(e){i(l.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){i("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){i("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===A?(A=!0,i("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(A=!1,0<V.length){var n=V.shift();wx.getLocalImgData(n)}},e))):V.push(e)},getNetworkType:function(e){i("getNetworkType",{},(e._complete=function(e){e=function(e){var n=e.errMsg;e.errMsg="getNetworkType:ok";var i=e.subtype;if(delete e.subtype,i)e.networkType=i;else{var t=n.indexOf(":"),a=n.substring(t+1);switch(a){case"wifi":case"edge":case"wwan":e.networkType=a;break;default:e.errMsg="getNetworkType:fail"}}return e}(e)},e))},openLocation:function(e){i("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)}},t(f,"getLocation",(function(e){i(l.getLocation,{type:(e=e||{}).type||"wgs84"},(e._complete=function(e){delete e.type},e))})),t(f,"hideOptionMenu",(function(e){i("hideOptionMenu",{},e)})),t(f,"showOptionMenu",(function(e){i("showOptionMenu",{},e)})),t(f,"closeWindow",(function(e){i("closeWindow",{},e=e||{})})),t(f,"hideMenuItems",(function(e){i("hideMenuItems",{menuList:e.menuList},e)})),t(f,"showMenuItems",(function(e){i("showMenuItems",{menuList:e.menuList},e)})),t(f,"hideAllNonBaseMenuItem",(function(e){i("hideAllNonBaseMenuItem",{},e)})),t(f,"showAllNonBaseMenuItem",(function(e){i("showAllNonBaseMenuItem",{},e)})),t(f,"scanQRCode",(function(e){i("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(k){var n=e.resultStr;if(n){var i=JSON.parse(n);e.resultStr=i&&i.scan_code&&i.scan_code.scan_result}}},e))})),t(f,"openAddress",(function(e){i(l.openAddress,{},(e._complete=function(e){var n;(n=e).postalCode=n.addressPostalCode,delete n.addressPostalCode,n.provinceName=n.proviceFirstStageName,delete n.proviceFirstStageName,n.cityName=n.addressCitySecondStageName,delete n.addressCitySecondStageName,n.countryName=n.addressCountiesThirdStageName,delete n.addressCountiesThirdStageName,n.detailInfo=n.addressDetailInfo,delete n.addressDetailInfo,e=n},e))})),t(f,"openProductSpecificView",(function(e){i(l.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)})),t(f,"addCard",(function(e){for(var n=e.cardList,t=[],a=0,o=n.length;a<o;++a){var r=n[a],c={card_id:r.cardId,card_ext:r.cardExt};t.push(c)}i(l.addCard,{card_list:t},(e._complete=function(e){var n=e.card_list;if(n){for(var i=0,t=(n=JSON.parse(n)).length;i<t;++i){var a=n[i];a.cardId=a.card_id,a.cardExt=a.card_ext,a.isSuccess=!!a.is_succ,delete a.card_id,delete a.card_ext,delete a.is_succ}e.cardList=n,delete e.card_list}},e))})),t(f,"chooseCard",(function(e){i("chooseCard",{app_id:C.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))})),t(f,"openCard",(function(e){for(var n=e.cardList,t=[],a=0,o=n.length;a<o;++a){var r=n[a],c={card_id:r.cardId,code:r.code};t.push(c)}i(l.openCard,{card_list:t},e)})),t(f,"consumeAndShareCard",(function(e){i(l.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)})),t(f,"chooseWXPay",(function(e){i(l.chooseWXPay,r(e),e)})),t(f,"openEnterpriseRedPacket",(function(e){i(l.openEnterpriseRedPacket,r(e),e)})),t(f,"startSearchBeacons",(function(e){i(l.startSearchBeacons,{ticket:e.ticket},e)})),t(f,"stopSearchBeacons",(function(e){i(l.stopSearchBeacons,{},e)})),t(f,"onSearchBeacons",(function(e){a(l.onSearchBeacons,e)})),t(f,"openEnterpriseChat",(function(e){i("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)})),t(f,"launchMiniProgram",(function(e){i("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){if("string"==typeof e&&0<e.length){var n=e.split("?")[0],i=e.split("?")[1];return n+=".html",void 0!==i?n+"?"+i:n}}(e.path),envVersion:e.envVersion},e)})),t(f,"miniProgram",{navigateBack:function(e){e=e||{},p((function(){i("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)}))},navigateTo:function(e){p((function(){i("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)}))},redirectTo:function(e){p((function(){i("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)}))},switchTab:function(e){p((function(){i("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)}))},reLaunch:function(e){p((function(){i("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)}))},postMessage:function(e){p((function(){i("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)}))},getEnv:function(n){p((function(){n({miniprogram:"miniprogram"===e.__wxjs_environment})}))}}),f),E=1,L={};return m.addEventListener("error",(function(e){if(!S){var n=e.target,i=n.tagName,t=n.src;if(("IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i)&&-1!=t.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var a=n["wx-id"];if(a||(a=E++,n["wx-id"]=a),L[a])return;L[a]=!0,wx.ready((function(){wx.getLocalImgData({localId:t,success:function(e){n.src=e.localData}})}))}}}),!0),m.addEventListener("load",(function(e){if(!S){var n=e.target,i=n.tagName;if(n.src,"IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i){var t=n["wx-id"];t&&(L[t]=!1)}}}),!0),n&&(e.wx=e.jWeixin=O),O}var R}))}}]);