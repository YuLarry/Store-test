(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["promotionpages-giftcard-present-present"],{"0b3c":function(a,t,e){"use strict";e.r(t);var n=e("9d31"),i=e.n(n);for(var o in n)"default"!==o&&function(a){e.d(t,a,(function(){return n[a]}))}(o);t["default"]=i.a},"46b8":function(a,t,e){"use strict";e.r(t);var n=e("ec73"),i=e("0b3c");for(var o in i)"default"!==o&&function(a){e.d(t,a,(function(){return i[a]}))}(o);e("d05e");var r,s=e("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"6fbf6358",null,!1,n["a"],r);t["default"]=c.exports},"49e6":function(a,t,e){var n=e("abd8");"string"===typeof n&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);var i=e("4f06").default;i("7033bffc",n,!0,{sourceMap:!1,shadowMode:!1})},"9d31":function(a,t,e){"use strict";var n=e("4ea4");e("b680"),e("acd8"),e("e25e"),e("ac1f"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;e("319c");var i=n(e("d7b6")),o={components:{uniPopup:i.default},data:function(){return{cardinfo:[],id:"",member_id:"",leav_message:"",transfer_id:"",shareTitle:"",shareImageurl:"",show:!1}},onLoad:function(a){var t=a.id;this.getData(t),this.id=a.id},onShow:function(){this.$langConfig.refresh()},methods:{shareGift:function(){this.transfer_id},getData:function(a){var t=this;this.$api.sendRequest({url:"/giftcard/api/giftcard/transfer",data:{id:a},success:function(a){0==a.code&&a.data&&(t.cardinfo=a.data,t.member_id=a.data.use_member_id),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(a){mescroll.endErr(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},oninput:function(a){var t=a.target.value;this.leav_message=t},openSharePopup:function(){this.$refs.sharePopup.open(),this.actionTransfer(0)},closeSharePopup:function(){this.$refs.sharePopup.close()},actionTransfer:function(a){var t=this;this.$api.sendRequest({url:"/giftcard/api/giftcard/actiontransfer",data:{id:this.id,use_member_id:this.member_id,leav_message:this.leav_message},success:function(a){0==a.code&&a.data&&(t.transfer_id=a.data.transfer_id,t.shareGift())}})},copyUrl:function(a){var t=this;if(this.actionTransfer(1),this.transfer_id){var e=this.$config.h5Domain+"/promotionpages/giftcard/present/accept?transfer_id="+this.transfer_id;this.$util.copy(e,(function(){t.closeSharePopup()}))}},onShare:function(){this.$api.sendRequest({url:"/weapp/api/weapp/share",success:function(a){}})},onShare2:function(){this.show=!0,this.closeSharePopup()},hide:function(){this.show=!1},openPosterPopup:function(){var a=this;this.getGiftcardPoster(),this.$refs.sharePopup.close(),this.$refs.posterPopup.open(),setTimeout((function(){var t=uni.createSelectorQuery().in(a).select(".poster-layer .image-wrap");t.fields({size:!0},(function(t){var e=t.width,n=parseFloat((740/e).toFixed(2));a.token,a.posterHeight=parseInt(1100/n)})).exec()}),100)},getGiftcardPoster:function(){var a={id:this.cardinfo.id};this.memberId&&(a.source_member=this.memberId),this.$api.sendRequest({url:"/giftcard/api/goods/poster",data:{page:"/promotionpages/bargain/detail/detail",qrcode_param:JSON.stringify(a)},success:function(a){a.code}})}},onShareAppMessage:function(){return{title:"送你一张礼品卡",imageUrl:this.$util.img("https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/gift_bag3.png"),path:"/promotionpages/giftcard/present/accept?transfer_id="+this.transfer_id,success:function(a){},fail:function(a){}}},onReady:function(){}};t.default=o},abd8:function(a,t,e){var n=e("24fb");t=n(!1),t.push([a.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.ns-present-bg[data-v-6fbf6358]{width:100%;height:%?300?%;background:url(https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/present_bg.png) no-repeat 0 0/100% 100%;z-index:0}.uni-popup__wrapper-box .share-title[data-v-6fbf6358]{line-height:%?60?%;font-size:%?32?%;padding:%?15?% 0;text-align:center}.uni-popup__wrapper-box .share-content[data-v-6fbf6358]{display:-webkit-box;display:flex;display:-webkit-flex;-webkit-flex-wrap:wrap;-moz-flex-wrap:wrap;-ms-flex-wrap:wrap;-o-flex-wrap:wrap;flex-wrap:wrap;padding:%?80?% %?15?%}.uni-popup__wrapper-box .share-content .share-box[data-v-6fbf6358]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center}.uni-popup__wrapper-box .share-content .share-box .share-btn[data-v-6fbf6358]{margin:0;padding:0;border:none;line-height:1;height:auto}.uni-popup__wrapper-box .share-content .share-box .share-btn uni-text[data-v-6fbf6358]{margin-top:%?20?%;font-size:%?24?%;display:block;color:#303133}.uni-popup__wrapper-box .share-content .share-box .iconfont[data-v-6fbf6358]{font-size:%?80?%;line-height:normal}.uni-popup__wrapper-box .share-content .share-box .iconfuzhilianjie[data-v-6fbf6358],\r\n.uni-popup__wrapper-box .share-content .share-box .iconpengyouquan[data-v-6fbf6358],\r\n.uni-popup__wrapper-box .share-content .share-box .iconhaowuquan[data-v-6fbf6358],\r\n.uni-popup__wrapper-box .share-content .share-box .iconiconfenxianggeihaoyou[data-v-6fbf6358]{color:#07c160}.uni-popup__wrapper-box .share-footer[data-v-6fbf6358]{height:%?90?%;line-height:%?90?%;border-top:%?2?% solid #eee;text-align:center}.present-body[data-v-6fbf6358]{background:#fff;padding:%?40?% %?30?%;margin:%?-120?% %?30?% 0;border-radius:%?10?%;z-index:2}.present-body .card-item[data-v-6fbf6358]{padding:%?15?% %?30?%;background:url(https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/giftcard.png) no-repeat 0 0/100% 100%;border-radius:%?20?%}.present-body .card-item .card-content[data-v-6fbf6358]{padding:%?30?% %?50?%}.present-body .card-item .card-content .card-name[data-v-6fbf6358]{font-size:%?40?%;color:#fff;max-height:%?160?%;overflow:hidden}.present-body .card-item .card-content .use-orno[data-v-6fbf6358]{color:#fff}.present-body .card-item .card-content .card-use[data-v-6fbf6358]{color:#fff}.present-body .card-item .card-content .card-num[data-v-6fbf6358]{margin-top:%?20?%;line-height:%?20?%;color:#fff}.present-body .card-item .card-content .card-id[data-v-6fbf6358]{margin-top:%?40?%;color:#fff}.present-btn[data-v-6fbf6358]{left:%?30?%;bottom:%?50?%;position:fixed;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around;width:92%}.present-btn uni-button[data-v-6fbf6358]{padding:0 %?68?%}.copy-present-btn[data-v-6fbf6358]{color:#000!important}.launch-mask[data-v-6fbf6358]{position:fixed;top:%?0?%;left:%?0?%;width:100%;height:100%;background:rgba(0,0,0,.8)}.launch-mask .mask-img[data-v-6fbf6358]{text-align:right}.launch-mask .mask-img uni-image[data-v-6fbf6358]{width:%?400?%;height:%?400?%}',""]),a.exports=t},d05e:function(a,t,e){"use strict";var n=e("49e6"),i=e.n(n);i.a},ec73:function(a,t,e){"use strict";e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){return n}));var n={uniPopup:e("d7b6").default,loadingCover:e("4c1d").default},i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-uni-view",{},[e("v-uni-view",{staticClass:"ns-present-bg"}),e("v-uni-view",{staticClass:"present-body"},[e("v-uni-view",{staticClass:"card-item margin-bottom",style:{background:a.$util.img(a.cardinfo.card_cover)?"url("+a.$util.img(a.cardinfo.card_cover)+") no-repeat 0 0/100% 100%":"url(https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/gitcard_default3.png) no-repeat 0 0/100% 100%"}},[e("v-uni-view",{staticClass:"card-content"},[e("v-uni-view",{staticClass:"card-name"},[a._v(a._s(a.cardinfo.card_name))]),e("v-uni-view",{staticClass:"card-use"},[a._v("礼品卡权益")]),a.cardinfo.balance>0&&a.cardinfo.point>0&&a.cardinfo.goods_num>0?e("v-uni-view",{staticClass:"card-num"},[a._v("￥"+a._s(a.cardinfo.balance)+"+"+a._s(a.cardinfo.point)+"积分+商品*"+a._s(a.cardinfo.goods_num))]):a.cardinfo.balance>0&&0==a.cardinfo.point?e("v-uni-view",{staticClass:"card-num"},[a._v("￥"+a._s(a.cardinfo.balance))]):0==a.cardinfo.balance&&a.cardinfo.point>0?e("v-uni-view",{staticClass:"card-num"},[a._v(a._s(a.cardinfo.point)+" 积分")]):0==a.cardinfo.balance&&0==a.cardinfo.point&&a.cardinfo.goods_num>0?e("v-uni-view",{staticClass:"card-num"},[a._v("商品*"+a._s(a.cardinfo.goods_num))]):a.cardinfo.balance>0&&a.cardinfo.point>0&&0==a.cardinfo.goods_num?e("v-uni-view",{staticClass:"card-num"},[a._v("￥"+a._s(a.cardinfo.balance)+"+"+a._s(a.cardinfo.point)+"积分")]):a.cardinfo.balance>0&&0==a.cardinfo.point&&a.cardinfo.goods_num>0?e("v-uni-view",{staticClass:"card-num"},[a._v("￥"+a._s(a.cardinfo.balance)+"+商品*"+a._s(a.cardinfo.goods_num))]):0==a.cardinfo.balance&&a.cardinfo.point>0&&a.cardinfo.goods_num>0?e("v-uni-view",{staticClass:"card-num"},[a._v(a._s(a.cardinfo.point)+"积分+商品*"+a._s(a.cardinfo.goods_num))]):a._e(),e("v-uni-view",{staticClass:"card-id"},[a._v("NO."+a._s(a.cardinfo.number))])],1)],1),e("v-uni-view",[e("v-uni-view",{staticStyle:{"font-weight":"600"}},[a._v("给TA留言:")]),e("v-uni-textarea",{staticClass:"info",attrs:{maxlength:"30",placeholder:"请输入留言内容，最多30个字","placeholder-style":"color:#b1b2b6; font-size:30rpx;"},on:{input:function(t){arguments[0]=t=a.$handleEvent(t),a.oninput.apply(void 0,arguments)}}})],1)],1),e("v-uni-view",{staticClass:"present-btn"},[e("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.openSharePopup.apply(void 0,arguments)}}},[a._v("赠送给好友")])],1),e("v-uni-view",{on:{touchmove:function(t){t.preventDefault(),t.stopPropagation(),arguments[0]=t=a.$handleEvent(t)}}},[e("uni-popup",{ref:"sharePopup",staticClass:"share-popup",attrs:{type:"bottom"}},[e("v-uni-view",[e("v-uni-view",{staticClass:"share-title"},[a._v("分享")]),e("v-uni-view",{staticClass:"share-content"},[e("v-uni-view",{staticClass:"share-box",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.copyUrl.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"share-btn",attrs:{plain:!0}},[e("v-uni-view",{staticClass:"iconfont iconfuzhilianjie"}),e("v-uni-text",[a._v("复制链接")])],1)],1)],1),e("v-uni-view",{staticClass:"share-footer",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.closeSharePopup.apply(void 0,arguments)}}},[e("v-uni-text",[a._v("取消分享")])],1)],1)],1)],1),1==a.show?e("v-uni-view",{staticClass:"launch-mask",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.hide()}}},[e("v-uni-view",{staticClass:"mask-img"},[e("v-uni-image",{attrs:{src:a.$util.img("https://cs.b2c.niuteam.cn/upload/uniapp/giftcard/detail/share.png"),mode:"aspectFit"}})],1)],1):a._e(),e("loading-cover",{ref:"loadingCover"})],1)},o=[]}}]);