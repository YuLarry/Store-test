(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_tool-store_notes-note_list"],{"013c":function(t,e,i){"use strict";i("c975"),i("a9e3"),i("acd8"),i("ac1f"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={type:"scrolldone",target:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},currentTarget:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},detail:{}},o={props:{backgroundTextStyle:{type:String,default:"dark",validator:function(t){return-1!==["dark","light"].indexOf(t)}},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created:function(){var t=this,e=getCurrentPages()[0];this.$pageVm=e.$vm||e,uni.onWindowResize((function(e){t.$emit("resize",e)})),this.$pageVm.$on("hook:onPageScroll",(function(e){t.$emit("scroll",e)})),this.$watch("backgroundTextStyle",(function(){t.setBackgroundTextStyle()})),this.$watch((function(){return[t.rootFontSize,t.pageStyle]}),(function(){t.setPageMeta()})),this.$watch((function(){return[t.backgroundColor,t.backgroundColorTop,t.backgroundColorBottom]}),(function(){t.setBackgroundColor()})),this.$watch((function(){return[t.scrollTop,t.scrollDuration]}),(function(){t.pageScrollTo()}))},beforeMount:function(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle(),this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh:function(t,e){t.setStyle({pullToRefresh:{support:e,style:"Android"===plus.os.name?"circle":"default"}})},setPageMeta:function(){uni.setPageMeta({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle:function(){},setBackgroundColor:function(){},pageScrollTo:function(){var t=this,e=String(this.scrollTop);if(-1!==e.indexOf("rpx")&&(e=uni.upx2px(e.replace("rpx",""))),e=parseFloat(e),!isNaN(e)){var i=function i(o){o.scrollTop===e&&(t.$pageVm.$off("hook:onPageScroll",i),t.$emit("scrolldone",n))};uni.pageScrollTo({scrollTop:e,duration:this.scrollDuration,success:function(){t.$pageVm.$on("hook:onPageScroll",i)}})}}}};e.default=o},"14ae":function(t,e,i){"use strict";i.r(e);var n=i("5c23"),o=i("7c9a");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("cdf0");var s,r=i("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"0bc31fcc",null,!1,n["a"],s);e["default"]=c.exports},"3be7":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.notes-nav[data-v-0bc31fcc]{overflow:hidden;padding:0 %?20?%;background-color:#fff}.notes-nav .notes-list[data-v-0bc31fcc]{display:flex;align-items:center;width:100%;height:%?90?%;white-space:nowrap}.notes-nav .notes-list .notes-item[data-v-0bc31fcc]{display:inline-block;margin:0 %?20?%;height:%?86?%;text-align:center;line-height:%?90?%}.notes-nav .notes-list .notes-item.active[data-v-0bc31fcc]{border-bottom:%?4?% solid}.notes-content[data-v-0bc31fcc]{height:100%;width:100%}.note-item[data-v-0bc31fcc]{margin:%?30?% %?20?%;padding:%?20?%;background-color:#fff;border-radius:%?6?%;overflow:hidden;position:relative}.note-item .note-title[data-v-0bc31fcc]{font-size:%?30?%;font-weight:600;line-height:%?44?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.note-item .notes-highlights-list uni-text[data-v-0bc31fcc]{display:inline-block;color:#fff;font-size:%?24?%;line-height:%?36?%;padding:0 %?10?%;border-radius:%?4?%;margin:0 %?5?%}.note-item .note-desc[data-v-0bc31fcc]{margin:%?4?% 0 %?8?%;line-height:%?40?%;overflow:hidden}.note-item .note-desc uni-text[data-v-0bc31fcc]{float:left;margin-right:%?16?%}.note-item .notes-img-wrap[data-v-0bc31fcc]{position:relative;height:%?300?%}.note-item .notes-img-wrap .notes-item-image[data-v-0bc31fcc]{width:100%;height:%?300?%;object-fit:cover}.note-item .notes-img-wrap-list[data-v-0bc31fcc]{display:flex;justify-content:space-between;flex-wrap:wrap;height:auto}.note-item .notes-img-wrap-list uni-image[data-v-0bc31fcc]{width:calc((100% - %?40?%) / 3);height:%?210?%;margin-top:%?20?%}.note-item .notes-img-wrap-list uni-image[data-v-0bc31fcc]:nth-child(-n + 3){margin-top:0}.note-item .notes-img-wrap-list[data-v-0bc31fcc]:after{content:"";width:calc((100% - %?40?%) / 3)}.note-item .note-img-one[data-v-0bc31fcc]{display:flex;justify-content:center;align-items:center;width:100%;height:%?420?%}.note-item .note-img-one uni-image[data-v-0bc31fcc]{width:100%;height:%?420?%}.note-item .note-img-more[data-v-0bc31fcc]{width:100%;white-space:nowrap}.note-item .note-img-more .more-item[data-v-0bc31fcc]{overflow:hidden;display:inline-block;width:%?200?%;height:%?200?%;text-align:center;line-height:%?200?%;border-radius:%?10?%}.note-item .note-img-more .more-item ~ .more-item[data-v-0bc31fcc]{margin-left:%?16?%}.note-item .note-img-more .more-item uni-image[data-v-0bc31fcc]{width:%?200?%;height:%?200?%}.note-item .notes-img-wrap[data-v-0bc31fcc]{position:relative;height:%?300?%}.note-item .notes-img-wrap .notes-item-image[data-v-0bc31fcc]{width:100%;height:%?300?%;object-fit:cover}.note-item .notes-img-wrap-list[data-v-0bc31fcc]{display:flex;justify-content:space-between;flex-wrap:wrap;height:auto}.note-item .notes-img-wrap-list uni-image[data-v-0bc31fcc]{width:calc((100% - %?40?%) / 3);height:%?210?%;margin-top:%?20?%}.note-item .notes-img-wrap-list uni-image[data-v-0bc31fcc]:nth-child(-n + 3){margin-top:0}.note-item .notes-img-wrap-list[data-v-0bc31fcc]:after{content:"";width:calc((100% - %?40?%) / 3)}.note-item .rest-info[data-v-0bc31fcc]{display:flex;justify-content:space-between;align-items:center;margin-top:%?20?%}.note-item .rest-info .time[data-v-0bc31fcc],\r\n.note-item .rest-info .read-info[data-v-0bc31fcc]{color:#b6b6b6;font-size:%?24?%}.note-item .rest-info uni-text[data-v-0bc31fcc]{margin-left:%?10?%}.note-item .rest-info .read-info > uni-text[data-v-0bc31fcc]{margin-left:%?30?%}.empty-box[data-v-0bc31fcc]{margin-top:%?200?%}',""]),t.exports=e},4020:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{display:"none"}},[t._t("default")],2)},a=[]},"5c23":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={pageMeta:i("6d42").default,loadingCover:i("790a").default,nsEmpty:i("2c4c").default,diyBottomNav:i("7932").default,nsLogin:i("2893").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("page-meta",{attrs:{"page-style":t.themeColor}}),i("v-uni-view",[i("v-uni-view",{staticClass:"notes-nav"},[i("v-uni-scroll-view",{staticClass:"notes-list",attrs:{"scroll-x":"true"}},t._l(t.groupInfo.groupList,(function(e,n){return i("v-uni-text",{key:n,staticClass:"notes-item",class:n==t.groupInfo.currIdent?"color-base-text active color-base-border":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tabCut(e.group_id,n)}}},[t._v(t._s(e.group_name))])})),1)],1),0!=t.groupInfo.currId?i("mescroll-uni",{ref:"mescroll",attrs:{top:"94"},on:{getData:function(e){arguments[0]=e=t.$handleEvent(e),t.getNotesList.apply(void 0,arguments)}}},[i("template",{attrs:{slot:"list"},slot:"list"},[i("v-uni-view",{staticClass:"notes-content"},t._l(t.noteListInfo,(function(e,n){return i("v-uni-view",{key:n,staticClass:"note-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.noteDetail(e.note_id)}}},[i("v-uni-text",{staticClass:"note-title"},[t._v(t._s(e.note_title))]),e.goods_highlights?i("v-uni-view",{staticClass:"notes-highlights-list"},t._l(e.label,(function(e,n){return i("v-uni-text",{key:n,staticClass:"color-base-bg"},[t._v(t._s(e))])})),1):t._e(),i("v-uni-view",{staticClass:"note-desc"},[i("v-uni-text",{staticClass:"color-base-text"},[t._v("#"+t._s("goods_item"==e.note_type?"单品介绍":"掌柜说")+"#")]),t._v(t._s(e.note_abstract))],1),i("v-uni-view",{staticClass:"notes-img-wrap",class:{"notes-img-wrap-list":1==e.cover_type}},[0==e.cover_type?i("v-uni-image",{staticClass:"notes-item-image",attrs:{src:t.$util.img(e.cover_img),mode:"aspectFill"}}):t._l(e.img,(function(e,n){return i("v-uni-image",{key:n,staticClass:"notes-item-image-li",attrs:{src:t.$util.img(e),mode:"aspectFit"}})}))],2),i("v-uni-view",{staticClass:"rest-info"},[1==e.is_show_release_time?i("v-uni-view",{staticClass:"time"},[t._v(t._s(t.$util.timeStampTurnTime(e.create_time,"time")))]):t._e(),i("v-uni-view",{staticClass:"read-info"},[1==e.is_show_read_num?i("v-uni-text",[t._v("阅读"),i("v-uni-text",[t._v(t._s(e.initial_read_num+e.read_num))])],1):t._e(),1==e.is_show_dianzan_num?i("v-uni-text",{on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.giveLike(e.note_id,n)}}},[1==e.is_dianzan?i("v-uni-text",{staticClass:"iconfont iconlikefill color-base-text"}):i("v-uni-text",{staticClass:"iconfont icongz"}),i("v-uni-text",[t._v(t._s(e.initial_dianzan_num+e.dianzan_num))])],1):t._e()],1)],1)],1)})),1)],1),i("loading-cover",{ref:"loadingCover"})],2):t._e(),t.showEmpty&&0==t.noteListInfo.length?i("v-uni-view",{staticClass:"empty-box"},[i("ns-empty",{attrs:{isIndex:!1,fixed:!1,text:"暂无店铺笔记"}})],1):t._e(),i("v-uni-view",{staticClass:"page-bottom"},[i("diy-bottom-nav")],1),i("ns-login",{ref:"login"})],1)],1)},a=[]},"6d42":function(t,e,i){"use strict";i.r(e);var n=i("4020"),o=i("8f28");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);var s,r=i("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=c.exports},"7c9a":function(t,e,i){"use strict";i.r(e);var n=i("dcdf"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"8ba2":function(t,e,i){var n=i("3be7");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("345f0c8b",n,!0,{sourceMap:!1,shadowMode:!1})},"8f28":function(t,e,i){"use strict";i.r(e);var n=i("013c"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},cdf0:function(t,e,i){"use strict";var n=i("8ba2"),o=i.n(n);o.a},dcdf:function(t,e,i){"use strict";i("99af"),i("4160"),i("c975"),i("ac1f"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{groupInfo:{groupList:[],currIdent:0,currId:0},noteListInfo:[],giveLikeFlag:!1,showEmpty:!1,memberId:0,mpShareData:null}},onLoad:function(t){var e=this;if(this.$util.getMemberId().then((function(t){e.memberId=t})),t.source_member&&uni.setStorageSync("source_member",t.source_member),t.scene){var i=decodeURIComponent(t.scene);i=i.split("&"),i.length&&i.forEach((function(t){-1!=t.indexOf("sku_id")&&(e.skuId=t.split("-")[1]),-1!=t.indexOf("m")&&uni.setStorageSync("source_member",t.split("-")[1]),-1!=t.indexOf("is_test")&&uni.setStorageSync("is_test",1)}))}},onShow:function(){var t=this;if(uni.getStorageSync("token")&&uni.getStorageSync("source_member")&&this.$util.onSourceMember(uni.getStorageSync("source_member")),!this.addonIsExist.notes)return this.$util.showToast({title:"商家未开启店铺笔记",mask:!0,duration:2e3}),void setTimeout((function(){t.$util.redirectTo("/pages/index/index",{},"redirectTo")}),2e3);this.getGroup(),this.$refs.mescroll&&this.$refs.mescroll.refresh()},onShareAppMessage:function(){return this.mpShareData.appMessage},onShareTimeline:function(){return this.mpShareData.timeLine},methods:{getGroup:function(){var t=this;this.showEmpty=!1,this.$api.sendRequest({url:"/notes/api/notes/group",success:function(e){t.showEmpty=!0,0==e.code?0!=e.data.length&&(t.groupInfo.groupList=e.data,t.groupInfo.currId=e.data[0].group_id):t.$util.showToast({title:e.message})},fail:function(e){mescroll.endErr(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},tabCut:function(t,e){this.groupInfo.currIdent=e,this.groupInfo.currId=t,this.$refs.mescroll.refresh(),this.$refs.loadingCover&&this.$refs.loadingCover.show()},getNotesList:function(t){var e=this;this.showEmpty=!1,this.$api.sendRequest({url:"/notes/api/notes/lists",data:{page:t.num,page_size:t.size,group_id:this.groupInfo.currId},success:function(i){e.showEmpty=!0;var n=[];0==i.code?n=i.data.list:e.$util.showToast({title:i.message}),t.endSuccess(n.length),1==t.num&&(e.noteListInfo=[]),e.noteListInfo=e.noteListInfo.concat(n),e.noteListInfo.forEach((function(t,e){t.img=t.cover_img.split(","),t.label=t.goods_highlights.split(",")})),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(i){t.endErr(),e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},noteDetail:function(t){this.$util.redirectTo("/pages_tool/store_notes/note_detail",{note_id:t})},giveLike:function(t,e){var i=this;if(uni.getStorageSync("token")){if(this.giveLikeFlag)return!1;this.giveLikeFlag=!0;var n=1==this.noteListInfo[e].is_dianzan?"/notes/api/record/delete":"/notes/api/record/add";this.$api.sendRequest({url:n,data:{note_id:t},success:function(t){i.giveLikeFlag=!1,0==t.code&&t.data>0?(i.noteType,i.noteListInfo[e].dianzan_num=1==i.noteListInfo[e].is_dianzan?i.noteListInfo[e].dianzan_num-1:i.noteListInfo[e].dianzan_num+1,i.noteListInfo[e].is_dianzan=1==i.noteListInfo[e].is_dianzan?0:1):i.$util.showToast({title:t.message})}})}else this.$refs.login.open("/pages_tool/store_notes/note_list")}}};e.default=n}}]);