(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherpages-member-pay_password-pay_password"],{"040a":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={mypOne:i("1612").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container",attrs:{"data-theme":t.themeStyle}},[0!=t.step?i("v-uni-view",{staticClass:"tips"},[t._v("请输入6位支付密码，建议不要使用重复或连续数字")]):i("v-uni-view",{staticClass:"tips"},[t._v("验证码已发送至"+t._s(t._f("mobile")(t.memberInfo.mobile))+"请在下方输入4位数字验证码")]),i("v-uni-view",{staticClass:"password-wrap"},[i("myp-one",{ref:"input",attrs:{maxlength:0==t.step?4:6,"is-pwd":0!=t.step,"auto-focus":!0},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.input.apply(void 0,arguments)}}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==t.step,expression:"step == 0"}],staticClass:"dynacode",class:120==t.dynacodeData.seconds?"color-base-text":"color-tip",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMobileCode.apply(void 0,arguments)}}},[t._v(t._s(t.dynacodeData.codeText))]),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==t.step,expression:"step == 0"}],staticClass:"action-tips"},[t._v("输入短信验证码")]),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1==t.step,expression:"step == 1"}],staticClass:"action-tips"},[t._v("请设置支付密码")]),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==t.step,expression:"step == 2"}],staticClass:"action-tips"},[t._v("请再次输入")]),i("v-uni-view",{staticClass:"btn color-base-bg color-base-border",class:{disabled:!t.isClick},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)},s=[]},1612:function(t,e,i){"use strict";i.r(e);var a=i("74a5"),n=i("9f8f");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("c17d");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"f72750c6",null,!1,a["a"],o);e["default"]=c.exports},"3a4b":function(t,e,i){var a=i("b80d");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("603780bc",a,!0,{sourceMap:!1,shadowMode:!1})},"4e63":function(t,e,i){"use strict";i.r(e);var a=i("e379"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},6258:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@-webkit-keyframes twinkling-data-v-f72750c6{0%{opacity:.2}50%{opacity:.5}100%{opacity:.2}}@keyframes twinkling-data-v-f72750c6{0%{opacity:.2}50%{opacity:.5}100%{opacity:.2}}.code-box[data-v-f72750c6]{text-align:center}.flex-box[data-v-f72750c6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-wrap:wrap;flex-wrap:wrap;position:relative}.flex-box .hide-input[data-v-f72750c6]{position:absolute;top:0;left:-100%;width:200%;height:100%;text-align:left;z-index:9;opacity:1}.flex-box .item[data-v-f72750c6]{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-right:%?18?%;font-size:%?70?%;font-weight:700;color:#333;line-height:%?100?%}.flex-box .item[data-v-f72750c6]::before{content:"";padding-top:100%;display:block}.flex-box .item[data-v-f72750c6]:last-child{margin-right:0}.flex-box .middle[data-v-f72750c6]{border:none}.flex-box .box[data-v-f72750c6]{box-sizing:border-box;border:%?2?% solid #ccc;border-width:%?2?% 0 %?2?% %?2?%;margin-right:0}.flex-box .box[data-v-f72750c6]:first-of-type{border-top-left-radius:%?8?%;border-bottom-left-radius:%?8?%}.flex-box .box[data-v-f72750c6]:last-child{border-right:%?2?% solid #ccc;border-top-right-radius:%?8?%;border-bottom-right-radius:%?8?%}.flex-box .bottom[data-v-f72750c6]{box-sizing:border-box;border-bottom:1px solid #ddd}.flex-box .active[data-v-f72750c6]{border-color:#ddd}.flex-box .active .line[data-v-f72750c6]{display:block}.flex-box .line[data-v-f72750c6]{display:none;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?2?%;height:%?40?%;background:#333;-webkit-animation:twinkling-data-v-f72750c6 1s infinite ease;animation:twinkling-data-v-f72750c6 1s infinite ease}.flex-box .dot[data-v-f72750c6],\r\n.flex-box .number[data-v-f72750c6]{line-height:%?40?%;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.flex-box .bottom-line[data-v-f72750c6]{height:4px;background:#000;width:80%;position:absolute;border-radius:2px;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}',""]),t.exports=e},"74a5":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"code-box"},[i("v-uni-view",{staticClass:"flex-box"},[i("v-uni-input",{staticClass:"hide-input",attrs:{value:t.inputValue,type:"number",focus:t.autoFocus,maxlength:t.maxlength},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.getVal.apply(void 0,arguments)}}}),t._l(t.ranges,(function(e,a){return[i("v-uni-view",{key:a+"_0",class:["item",{active:t.codeIndex===e,middle:"middle"===t.type,bottom:"bottom"===t.type,box:"box"===t.type}]},["middle"!==t.type?i("v-uni-view",{staticClass:"line"}):t._e(),"middle"===t.type&&t.codeIndex<=e?i("v-uni-view",{staticClass:"bottom-line"}):t._e(),t.isPwd&&t.codeArr.length>=e?[i("v-uni-text",{staticClass:"dot"},[t._v("●")])]:[i("v-uni-text",{staticClass:"number"},[t._v(t._s(t.codeArr[a]?t.codeArr[a]:""))])]],2)]}))],2)],1)},s=[]},"9f8f":function(t,e,i){"use strict";i.r(e);var a=i("b0e0"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},b0e0:function(t,e,i){"use strict";i("a15b"),i("a9e3"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"mypOneInput",props:{value:{type:String,default:""},maxlength:{type:Number,default:4},autoFocus:{type:Boolean,default:!1},isPwd:{type:Boolean,default:!1},type:{type:String,default:"bottom"}},watch:{maxlength:{immediate:!0,handler:function(t){this.ranges=6===t?[1,2,3,4,5,6]:[1,2,3,4]}},value:{immediate:!0,handler:function(t){t!==this.inputValue&&(this.inputValue=t,this.toMakeAndCheck(t))}}},data:function(){return{inputValue:"",codeIndex:1,codeArr:[],ranges:[1,2,3,4]}},methods:{getVal:function(t){var e=t.detail.value;this.inputValue=e,this.$emit("input",e),this.toMakeAndCheck(e)},toMakeAndCheck:function(t){var e=t.split("");this.codeIndex=e.length+1,this.codeArr=e,this.codeIndex>Number(this.maxlength)&&this.$emit("finish",this.codeArr.join(""))},set:function(t){this.inputValue=t,this.toMakeAndCheck(t)},clear:function(){this.inputValue="",this.codeArr=[],this.codeIndex=1}}};e.default=a},b51c:function(t,e,i){var a=i("6258");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("55b0fac5",a,!0,{sourceMap:!1,shadowMode:!1})},b80d:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.container[data-v-5ce78e0e]{width:100vw;height:100vh;background:#fff}.container .tips[data-v-5ce78e0e]{width:60%;margin:0 auto;text-align:center;padding-top:%?100?%}.container .password-wrap[data-v-5ce78e0e]{width:80%;margin:0 auto;margin-top:%?40?%}.container .password-wrap .action-tips[data-v-5ce78e0e]{text-align:center;font-weight:600;margin-top:%?80?%}.container .password-wrap .dynacode[data-v-5ce78e0e]{line-height:1;margin-top:%?20?%;font-size:%?24?%}.container .password-wrap .btn[data-v-5ce78e0e]{margin:0 auto;margin-top:%?30?%;height:%?80?%;line-height:%?80?%;border-radius:%?80?%;color:#fff;text-align:center}.container .password-wrap .btn.disabled[data-v-5ce78e0e]{background:#ccc!important;border-color:#ccc!important;color:#fff}',""]),t.exports=e},c17d:function(t,e,i){"use strict";var a=i("b51c"),n=i.n(a);n.a},c868:function(t,e,i){"use strict";i.r(e);var a=i("040a"),n=i("4e63");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("e341");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"5ce78e0e",null,!1,a["a"],o);e["default"]=c.exports},e341:function(t,e,i){"use strict";var a=i("3a4b"),n=i.n(a);n.a},e379:function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("1612")),s=a(i("b6ac")),o={components:{mypOne:n.default},data:function(){return{isClick:!1,step:1,key:"",code:"",password:"",repassword:"",isSub:!1,back:"",memberInfo:{},dynacodeData:{seconds:120,timer:null,codeText:"获取验证码",isSend:!1}}},mixins:[s.default],methods:{input:function(t){0==this.step?4==t.length?(this.isClick=!0,this.code=t):this.isClick=!1:1==this.step?6==t.length?(this.isClick=!0,this.password=t):this.isClick=!1:6==t.length?(this.isClick=!0,this.repassword=t):this.isClick=!1},confirm:function(){var t=this;if(this.isClick)if(0==this.step)this.$api.sendRequest({url:"/api/member/verifypaypwdcode",data:{code:this.code,key:this.key},success:function(e){0==e.code?(t.$refs.input.clear(),t.isClick=!1,t.step=1):t.$util.showToast({title:e.message})}});else if(1==this.step)this.$refs.input.clear(),this.isClick=!1,this.step=2;else if(this.password==this.repassword){if(this.isSub)return;this.isSub=!0,this.$api.sendRequest({url:"/api/member/modifypaypassword",data:{key:this.key,code:this.code,password:this.password},success:function(e){e.code>=0?(t.$util.showToast({title:"修改成功"}),setTimeout((function(){t.back?t.$util.redirectTo(t.back,{},"redirectTo"):t.$util.redirectTo("/pages/member/index/index",{},"reLaunch")}),2e3)):(t.initInfo(),t.$util.showToast({title:e.message}))}})}else this.$util.showToast({title:"两次输入的密码不一致",success:function(e){t.initInfo()}})},initInfo:function(){this.isClick=!1,this.step=1,this.password="",this.repassword="",this.oldpassword="",this.isSub=!1,this.$refs.input.clear()},getMemberInfo:function(){var t=this;this.$api.sendRequest({url:"/api/member/info",success:function(e){0==e.code&&(t.memberInfo=e.data,""==t.memberInfo.mobile?uni.showModal({title:"提示",content:"设置支付密码需要先绑定手机号,是否立即绑定?",success:function(e){e.confirm?t.$util.redirectTo("/otherpages/member/info/info",{action:"mobile",back:t.back},"redirectTo"):t.back?t.$util.redirectTo(t.back):t.$util.redirectTo("/pages/member/index/index",{},"redirectTo")}}):(t.step=0,t.sendMobileCode()))}})},sendMobileCode:function(){var t=this;120==this.dynacodeData.seconds&&(this.dynacodeData.isSend||(this.dynacodeData.isSend=!0,this.$api.sendRequest({url:"/api/member/paypwdcode",success:function(e){t.dynacodeData.isSend=!1,e.code>=0?(t.key=e.data.key,120==t.dynacodeData.seconds&&null==t.dynacodeData.timer&&(t.dynacodeData.timer=setInterval((function(){t.dynacodeData.seconds--,t.dynacodeData.codeText=t.dynacodeData.seconds+"s后可重新获取"}),1e3))):t.$util.showToast({title:e.message})},fail:function(){t.$util.showToast({title:"request:fail"}),t.dynacodeData.isSend=!1}})))}},onLoad:function(t){this.$langConfig.refresh(),t.back&&(this.back=t.back),uni.getStorageSync("token")?this.getMemberInfo():this.$util.redirectTo("/otherpages/login/login/login")},filters:{mobile:function(t){return t.substring(0,3)+"****"+t.substring(7)}},watch:{"dynacodeData.seconds":{handler:function(t,e){0==t&&(clearInterval(this.dynacodeData.timer),this.dynacodeData={seconds:120,timer:null,codeText:"获取动态码",isSend:!1})},immediate:!0,deep:!0}}};e.default=o}}]);