(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_promotion-giftcard-detail-detail"],{"013c":function(t,i,a){"use strict";a("c975"),a("a9e3"),a("acd8"),a("ac1f"),a("5319"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={type:"scrolldone",target:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},currentTarget:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},detail:{}},o={props:{backgroundTextStyle:{type:String,default:"dark",validator:function(t){return-1!==["dark","light"].indexOf(t)}},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created:function(){var t=this,i=getCurrentPages()[0];this.$pageVm=i.$vm||i,uni.onWindowResize((function(i){t.$emit("resize",i)})),this.$pageVm.$on("hook:onPageScroll",(function(i){t.$emit("scroll",i)})),this.$watch("backgroundTextStyle",(function(){t.setBackgroundTextStyle()})),this.$watch((function(){return[t.rootFontSize,t.pageStyle]}),(function(){t.setPageMeta()})),this.$watch((function(){return[t.backgroundColor,t.backgroundColorTop,t.backgroundColorBottom]}),(function(){t.setBackgroundColor()})),this.$watch((function(){return[t.scrollTop,t.scrollDuration]}),(function(){t.pageScrollTo()}))},beforeMount:function(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle(),this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh:function(t,i){t.setStyle({pullToRefresh:{support:i,style:"Android"===plus.os.name?"circle":"default"}})},setPageMeta:function(){uni.setPageMeta({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle:function(){},setBackgroundColor:function(){},pageScrollTo:function(){var t=this,i=String(this.scrollTop);if(-1!==i.indexOf("rpx")&&(i=uni.upx2px(i.replace("rpx",""))),i=parseFloat(i),!isNaN(i)){var a=function a(o){o.scrollTop===i&&(t.$pageVm.$off("hook:onPageScroll",a),t.$emit("scrolldone",n))};uni.pageScrollTo({scrollTop:i,duration:this.scrollDuration,success:function(){t.$pageVm.$on("hook:onPageScroll",a)}})}}}};i.default=o},"3ff3":function(t,i,a){"use strict";var n=a("a9b2"),o=a.n(n);o.a},4020:function(t,i,a){"use strict";var n;a.d(i,"b",(function(){return o})),a.d(i,"c",(function(){return e})),a.d(i,"a",(function(){return n}));var o=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticStyle:{display:"none"}},[t._t("default")],2)},e=[]},"6d42":function(t,i,a){"use strict";a.r(i);var n=a("4020"),o=a("8f28");for(var e in o)"default"!==e&&function(t){a.d(i,t,(function(){return o[t]}))}(e);var r,c=a("f0c5"),d=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);i["default"]=d.exports},"78a8":function(t,i,a){"use strict";a.r(i);var n=a("f141"),o=a("98f6");for(var e in o)"default"!==e&&function(t){a.d(i,t,(function(){return o[t]}))}(e);a("3ff3");var r,c=a("f0c5"),d=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"67d3f811",null,!1,n["a"],r);i["default"]=d.exports},"8f28":function(t,i,a){"use strict";a.r(i);var n=a("013c"),o=a.n(n);for(var e in n)"default"!==e&&function(t){a.d(i,t,(function(){return n[t]}))}(e);i["default"]=o.a},"94f7":function(t,i,a){"use strict";var n=a("4ea4");a("4160"),a("d3b7"),a("ac1f"),a("1276"),a("159b"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(a("92aa")),e={components:{uniPopup:o.default},data:function(){return{cardinfo:{},id:"",stort_type:!1}},onLoad:function(t){var i=t.id;this.getData(i),this.id=t.id},onShow:function(){},methods:{goodsImg:function(t){var i=t.split(",");return i[0]?this.$util.img(i[0],{size:"mid"}):this.$util.getDefaultImage().goods},getData:function(t){var i=this;this.$api.sendRequest({url:"/giftcard/api/giftcard/giftcardinfo",data:{id:t},success:function(t){0==t.code&&t.data?(i.cardinfo=t.data,i.cardinfo.goods_list.length>0&&i.cardinfo.goods_list.forEach((function(t){0==t.stock&&(i.stort_type=!0)})),i.$refs.loadingCover&&i.$refs.loadingCover.hide()):i.$refs.loadingCover&&i.$refs.loadingCover.hide()},fail:function(t){}})},gotopresent:function(t){this.$util.redirectTo("/pages_promotion/giftcard/present/present",{id:t})},openusepopup:function(t,i,a){var n=this;if(this.stort_type)return this.$util.showToast({title:"有商品暂无库存"}),!1;var o=this;if(this.cardinfo.goods_list.length>0){var e=[];a.goods_list.forEach((function(t){e.push(t.sku_id)})),uni.setStorage({key:"orderCreateData",data:{sku_id:e.toString(),num:1},success:function(){n.$util.redirectTo("/pages_promotion/giftcard/payment/payment",{giftcard_id:t,id:i})}})}else uni.showModal({title:"提示",content:"确定要使用该礼品卡吗",success:function(a){a.confirm&&n.$api.sendRequest({url:"/giftcard/api/giftcard/use",data:{id:i,giftcard_id:t},success:function(t){o.$util.showToast({title:t.message}),n.$router.go(0)}})}})}}};i.default=e},"98f6":function(t,i,a){"use strict";a.r(i);var n=a("94f7"),o=a.n(n);for(var e in n)"default"!==e&&function(t){a.d(i,t,(function(){return n[t]}))}(e);i["default"]=o.a},a9b2:function(t,i,a){var n=a("cc9f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("4f06").default;o("1c9a7f9a",n,!0,{sourceMap:!1,shadowMode:!1})},cc9f:function(t,i,a){var n=a("24fb");i=n(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.hasuse-card-content[data-v-67d3f811]{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.card-box[data-v-67d3f811]{position:relative;border-radius:%?20?%}.card-box1[data-v-67d3f811]{height:%?296?%}.card-box2[data-v-67d3f811]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#efefef;opacity:.8;border-radius:%?20?%;z-index:200}.card-box3[data-v-67d3f811]{position:absolute;width:85%;top:0;color:grey!important;z-index:300}.card-item[data-v-67d3f811]{padding:%?54?% %?30?% %?34?% %?30?%}.card-item .card-content[data-v-67d3f811]{padding:%?30?% %?50?%;border-radius:%?20?%;-moz-background-size:100% 100%}.card-item .card-content .content-head[data-v-67d3f811]{display:flex;justify-content:space-between;margin-bottom:%?30?%}.card-item .card-content .content-head .card-name[data-v-67d3f811]{font-size:%?48?%;color:#fff;overflow:hidden;max-height:%?160?%;width:85%}.card-item .card-content .content-head .use-orno[data-v-67d3f811]{color:#fff}.card-item .card-content .card-use[data-v-67d3f811]{color:#fff}.card-item .card-content .card-num[data-v-67d3f811]{margin-top:%?20?%;line-height:%?20?%;color:#fff}.card-item .card-content .card-id[data-v-67d3f811]{margin-top:%?40?%;color:#fff}.card-info[data-v-67d3f811]{padding:%?15?% %?30?%;margin:%?10?% %?30?%;background:#fff;border-radius:%?10?%}.card-info .info[data-v-67d3f811]{padding:%?20?% 0;border-bottom:%?1?% solid #f5f5f5}.card-info .aaa uni-text[data-v-67d3f811]{margin-left:%?30?%}.card-info .bbb uni-text[data-v-67d3f811]{margin-left:%?82?%}.card-info .ccc uni-text[data-v-67d3f811]{margin-left:%?52?%}.card-info2[data-v-67d3f811]{padding:%?15?% %?30?%;margin:%?20?% %?30?%;background:#fff;border-radius:%?10?%}.card-info2 .info[data-v-67d3f811]{padding:%?20?% 0;border-bottom:%?1?% solid #f5f5f5}.card-info2 .info3 uni-text[data-v-67d3f811]{margin-left:%?80?%}.card-info2 uni-text[data-v-67d3f811]{margin-left:%?52?%}.bottom[data-v-67d3f811]{position:fixed;bottom:%?0?%;width:%?800?%;height:%?130?%;display:flex;background:#fff;padding:0 %?20?% 0 %?300?%}.bottom .bottom-left[data-v-67d3f811]{margin:%?30?% %?20?% %?30?% 0}.bottom .bottom-left uni-button[data-v-67d3f811]{background:#fff;color:#000;border:%?1?% solid #d9d9d9;border-radius:%?10?%;width:%?200?%;height:%?70?%;line-height:%?70?%}.bottom .bottom-right[data-v-67d3f811]{margin:%?30?% 0}.bottom .bottom-right uni-button[data-v-67d3f811]{width:%?200?%;height:%?70?%;line-height:%?70?%}.giftcard-goods[data-v-67d3f811]{margin:%?20?% %?30?%}.giftcard-goods .giftcard-goods-list[data-v-67d3f811]{padding-bottom:%?120?%}.giftcard-goods .giftcard-goods-item[data-v-67d3f811]{display:flex;margin:%?20?% 0;background-color:#fff;padding:%?26?%;border-radius:%?10?%}.giftcard-goods .giftcard-goods-item uni-image[data-v-67d3f811]{height:%?200?%;width:%?200?%;margin-right:%?20?%}.giftcard-goods .giftcard-goods-item .giftcard-info-wrap[data-v-67d3f811]{display:flex;flex-direction:column;justify-content:space-between}.giftcard-goods .giftcard-goods-item .giftcard-info-wrap .info-title[data-v-67d3f811]{word-break:break-all;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;\r\n  /* 这里是超出几行省略 */overflow:hidden}.giftcard-goods .giftcard-goods-item .giftcard-info-wrap .info-stock[data-v-67d3f811]{font-size:%?24?%}.giftcard-goods .giftcard-goods-item .giftcard-info-wrap .price[data-v-67d3f811],\r\n.giftcard-goods .giftcard-goods-item .giftcard-info-wrap .unit[data-v-67d3f811]{display:inline-block}.giftcard-goods .giftcard-goods-item .giftcard-info-wrap .price[data-v-67d3f811]{font-size:%?32?%;font-weight:700}',""]),t.exports=i},f141:function(t,i,a){"use strict";a.d(i,"b",(function(){return o})),a.d(i,"c",(function(){return e})),a.d(i,"a",(function(){return n}));var n={pageMeta:a("6d42").default,loadingCover:a("790a").default},o=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",[a("page-meta",{attrs:{"page-style":t.themeColor}}),a("v-uni-view",[a("v-uni-view",{staticClass:"card-item margin-bottom",style:{background:"url("+t.$util.img("public/uniapp/giftcard/detail/index.png")+") no-repeat top left/100% 50% "}},[0==t.cardinfo.elect_status?a("v-uni-view",{},[a("v-uni-view",{staticClass:"card-content",style:{background:t.cardinfo.card_cover?"url("+t.$util.img(t.cardinfo.card_cover)+") no-repeat 0 0/100% 100%":"url("+t.$util.img("public/uniapp/giftcard/detail/gitcard_default3.png")+") no-repeat 0 0/100% 100%"}},[a("v-uni-view",{staticClass:"content-head"},[a("v-uni-view",{staticClass:"card-name"},[t._v(t._s(t.cardinfo.card_name))]),0==t.cardinfo.elect_status?a("v-uni-view",{staticClass:"use-orno"},[t._v("待使用")]):1==t.cardinfo.elect_status?a("v-uni-view",{staticClass:"use-orno"},[t._v("已使用")]):2==t.cardinfo.elect_status?a("v-uni-view",{staticClass:"use-orno"},[t._v("已过期")]):t._e()],1),a("v-uni-view",{staticClass:"card-use"},[t._v("礼品卡权益")]),t.cardinfo.balance>0&&t.cardinfo.point>0?a("v-uni-view",{staticClass:"card-num"},[t._v("￥"+t._s(t.cardinfo.balance)+"+"+t._s(t.cardinfo.point)+"积分+商品*"+t._s(t.cardinfo.goods_num))]):t.cardinfo.balance>0&&0==t.cardinfo.point?a("v-uni-view",{staticClass:"card-num"},[t._v("￥"+t._s(t.cardinfo.balance))]):0==t.cardinfo.balance&&t.cardinfo.point>0?a("v-uni-view",{staticClass:"card-num"},[t._v(t._s(t.cardinfo.point)+" 积分")]):0==t.cardinfo.balance&&0==t.cardinfo.point&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"card-num"},[t._v("商品*"+t._s(t.cardinfo.goods_num))]):t.cardinfo.balance>0&&t.cardinfo.point>0&&0==t.cardinfo.goods_num?a("v-uni-view",{staticClass:"card-num"},[t._v("￥"+t._s(t.cardinfo.balance)+"+"+t._s(t.cardinfo.point)+"积分")]):t.cardinfo.balance>0&&0==t.cardinfo.point&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"card-num"},[t._v("￥"+t._s(t.cardinfo.balance)+"+商品*"+t._s(t.cardinfo.goods_num))]):0==t.cardinfo.balance&&t.cardinfo.point>0&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"card-num"},[t._v(t._s(t.cardinfo.point)+"积分+商品*"+t._s(t.cardinfo.goods_num))]):t._e(),a("v-uni-view",{staticClass:"card-id"},[t._v("NO."+t._s(t.cardinfo.number))])],1)],1):a("v-uni-view",{staticClass:"card-box"},[a("v-uni-view",{staticClass:"card-content hasuse-card-content card-box1",style:{background:t.cardinfo.card_cover?"url("+t.$util.img(t.cardinfo.card_cover)+") no-repeat 0 0/100% 100%":"url("+t.$util.img("public/uniapp/giftcard/detail/gitcard_default3.png")+") no-repeat 0 0/100% 100%"}}),a("v-uni-view",{staticClass:"card-box2"}),a("v-uni-view",{staticClass:"card-content card-box3"},[a("v-uni-view",{staticClass:"content-head"},[a("v-uni-view",{staticClass:"card-name"},[t._v(t._s(t.cardinfo.card_name))]),0==t.cardinfo.elect_status?a("v-uni-view",{staticClass:"use-orno"},[t._v("待使用")]):1==t.cardinfo.elect_status?a("v-uni-view",{staticClass:"use-orno"},[t._v("已使用")]):2==t.cardinfo.elect_status?a("v-uni-view",{staticClass:"use-orno"},[t._v("已过期")]):t._e()],1),a("v-uni-view",{staticClass:"card-use"},[t._v("礼品卡权益")]),t.cardinfo.balance>0&&t.cardinfo.point>0&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"card-num"},[t._v("￥"+t._s(t.cardinfo.balance)+"+"+t._s(t.cardinfo.point)+"积分+商品*"+t._s(t.cardinfo.goods_num))]):t.cardinfo.balance>0&&0==t.cardinfo.point?a("v-uni-view",{staticClass:"card-num"},[t._v("￥"+t._s(t.cardinfo.balance))]):0==t.cardinfo.balance&&t.cardinfo.point>0?a("v-uni-view",{staticClass:"card-num"},[t._v(t._s(t.cardinfo.point)+" 积分")]):0==t.cardinfo.balance&&0==t.cardinfo.point&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"card-num"},[t._v("商品*"+t._s(t.cardinfo.goods_num))]):t.cardinfo.balance>0&&t.cardinfo.point>0&&0==t.cardinfo.goods_num?a("v-uni-view",{staticClass:"card-num"},[t._v("￥"+t._s(t.cardinfo.balance)+"+"+t._s(t.cardinfo.point)+"积分")]):t.cardinfo.balance>0&&0==t.cardinfo.point&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"card-num"},[t._v("￥"+t._s(t.cardinfo.balance)+"+商品*"+t._s(t.cardinfo.goods_num))]):0==t.cardinfo.balance&&t.cardinfo.point>0&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"card-num"},[t._v(t._s(t.cardinfo.point)+"积分+商品*"+t._s(t.cardinfo.goods_num))]):t._e(),a("v-uni-view",{staticClass:"card-id"},[t._v("NO."+t._s(t.cardinfo.number))])],1)],1)],1),a("v-uni-view",{staticClass:"card-info"},[a("v-uni-view",{staticClass:"info aaa"},[t._v("礼品卡编号："),a("v-uni-text",[t._v(t._s(t.cardinfo.number))])],1),a("v-uni-view",{staticClass:"info info1 aaa"},[t._v("礼品卡来源："),1==t.cardinfo.source_from?a("v-uni-text",[t._v("购买电子卡")]):a("v-uni-text",[t._v("他人赠送")])],1),a("v-uni-view",{staticClass:"info bbb"},[t._v("持有人："),a("v-uni-text",[t._v(t._s(t.cardinfo.member_name))])],1),t.cardinfo.balance>0&&t.cardinfo.point>0&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"info ccc",staticStyle:{border:"none"}},[t._v("兑换权益："),a("v-uni-text",[t._v("￥"+t._s(t.cardinfo.balance)+"+"+t._s(t.cardinfo.point)+"积分+商品*"+t._s(t.cardinfo.goods_num))])],1):t.cardinfo.balance>0&&0==t.cardinfo.point?a("v-uni-view",{staticClass:"info ccc",staticStyle:{border:"none"}},[t._v("兑换权益："),a("v-uni-text",[t._v("￥"+t._s(t.cardinfo.balance))])],1):0==t.cardinfo.balance&&t.cardinfo.point>0?a("v-uni-view",{staticClass:"info ccc",staticStyle:{border:"none"}},[t._v("兑换权益："),a("v-uni-text",[t._v(t._s(t.cardinfo.point)+" 积分")])],1):0==t.cardinfo.balance&&0==t.cardinfo.point&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"info ccc",staticStyle:{border:"none"}},[t._v("兑换权益："),a("v-uni-text",[t._v("商品*"+t._s(t.cardinfo.goods_num))])],1):t.cardinfo.balance>0&&t.cardinfo.point>0&&0==t.cardinfo.goods_num?a("v-uni-view",{staticClass:"info ccc",staticStyle:{border:"none"}},[t._v("兑换权益："),a("v-uni-text",[t._v("￥"+t._s(t.cardinfo.balance)+"+"+t._s(t.cardinfo.point)+"积分")])],1):t.cardinfo.balance>0&&0==t.cardinfo.point&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"info ccc",staticStyle:{border:"none"}},[t._v("兑换权益："),a("v-uni-text",[t._v("￥"+t._s(t.cardinfo.balance)+"+商品*"+t._s(t.cardinfo.goods_num))])],1):0==t.cardinfo.balance&&t.cardinfo.point>0&&t.cardinfo.goods_num>0?a("v-uni-view",{staticClass:"info ccc",staticStyle:{border:"none"}},[t._v("兑换权益："),a("v-uni-text",[t._v(t._s(t.cardinfo.point)+"积分+商品*"+t._s(t.cardinfo.goods_num))])],1):t._e()],1),a("v-uni-view",{staticClass:"card-info2"},[a("v-uni-view",{staticClass:"info info2"},[t._v("获取时间："),a("v-uni-text",[t._v(t._s(t.$util.timeStampTurnTime(t.cardinfo.create_time)))])],1),a("v-uni-view",{staticClass:"info"},[t._v("使用时间："),0==t.cardinfo.use_time?a("v-uni-text",[t._v("未使用")]):a("v-uni-text",[t._v("已使用")])],1),1==t.cardinfo.time_type?a("v-uni-view",{staticClass:"info",staticStyle:{border:"none"}},[t._v("过期时间："),a("v-uni-text",[t._v("永久有效")])],1):2==t.cardinfo.time_type?a("v-uni-view",{staticClass:"info",staticStyle:{border:"none"}},[t._v("过期时间："),a("v-uni-text",[t._v("有效期至 "+t._s(this.$util.timeStampTurnTime(t.cardinfo.youxiao_time)))])],1):a("v-uni-view",{staticClass:"info",staticStyle:{border:"none"}},[t._v("过期时间："),a("v-uni-text",[t._v("有效期至 "+t._s(this.$util.timeStampTurnTime(t.cardinfo.create_time+24*t.cardinfo.youxiao_day*60*60)))])],1)],1),t.cardinfo.goods_list?a("v-uni-view",{staticClass:"giftcard-goods"},[a("v-uni-view",{staticClass:"giftcard-goods-list"},t._l(t.cardinfo.goods_list,(function(i,n){return a("v-uni-view",{key:n,staticClass:"giftcard-goods-item"},[a("v-uni-view",{staticClass:"giftcart-goods-img"},[a("v-uni-image",{attrs:{src:t.goodsImg(i.sku_image)}})],1),a("v-uni-view",{staticClass:"giftcard-info-wrap"},[a("v-uni-view",{staticClass:"info-title"},[t._v(t._s(i.sku_name))]),a("v-uni-view",{staticClass:"info-stock"},[t._v("库存:"+t._s(i.stock))]),a("v-uni-view",{staticClass:"info-price"},[a("v-uni-view",{staticClass:"unit color-base-text"},[t._v("￥")]),a("v-uni-view",{staticClass:"price color-base-text"},[t._v(t._s(i.price))])],1)],1)],1)})),1)],1):t._e(),0==t.cardinfo.elect_status?a("v-uni-view",{staticClass:"bottom"},[a("v-uni-view",{staticClass:"bottom-left"},[a("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.gotopresent(t.id)}}},[t._v("转赠他人")])],1),a("v-uni-view",{staticClass:"bottom-right"},[a("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openusepopup(t.cardinfo.giftcard_id,t.id,t.cardinfo)}}},[t._v("立即使用")])],1)],1):t._e(),a("loading-cover",{ref:"loadingCover"})],1)],1)},e=[]}}]);