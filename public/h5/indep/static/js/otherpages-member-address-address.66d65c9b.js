(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherpages-member-address-address"],{"193e":function(e,t,s){var a=s("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */[data-v-2bb40aa4] .fixed{position:relative;top:0}.cart-empty[data-v-2bb40aa4]{padding-top:104px!important}.address-list[data-v-2bb40aa4]{width:100%;height:100%}.address-list .local[data-v-2bb40aa4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin:%?20?% %?30?%;background-color:#fff;padding:%?30?%;border-radius:%?10?%}.address-list .local uni-text[data-v-2bb40aa4]{margin-right:%?10?%}.address-list .address-item[data-v-2bb40aa4]{margin:%?20?% %?30?% 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background-color:#fff;padding:%?30?%;box-sizing:border-box;border-radius:%?20?%}.address-list .address-item .address-item-top[data-v-2bb40aa4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;border-bottom:%?1?% solid #eee}.address-list .address-item .address-item-top .address-top-info[data-v-2bb40aa4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;position:relative}.address-list .address-item .address-item-top .address-top-info .address-name[data-v-2bb40aa4]{color:#000;font-size:%?32?%}.address-list .address-item .address-item-top .address-top-info .address-tel[data-v-2bb40aa4]{color:#000;font-size:%?32?%;margin-left:%?26?%}.address-list .address-item .address-item-top .address-top-info .address-status[data-v-2bb40aa4]{color:red;font-size:%?28?%;position:absolute;right:0}.address-list .address-item .address-item-top .address-info[data-v-2bb40aa4]{font-size:%?28?%;color:#909399;margin-top:%?10?%;margin-bottom:%?28?%}.address-list .address-item .address-item-bottom[data-v-2bb40aa4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-top:%?30?%}.address-list .address-item .address-item-bottom .address-default[data-v-2bb40aa4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%;line-height:1}.address-list .address-item .address-item-bottom .address-default .default[data-v-2bb40aa4]{padding-left:%?10?%}.address-list .address-item .address-item-bottom .address-default .iconfont[data-v-2bb40aa4]{line-height:1}.address-list .address-item .address-item-bottom .address-btn[data-v-2bb40aa4]{font-size:%?28?%;line-height:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.address-list .address-item .address-item-bottom .address-btn .edit uni-text[data-v-2bb40aa4]{vertical-align:center;margin-right:%?10?%;font-size:%?30?%}.address-list .address-item .address-item-bottom .address-btn .delete[data-v-2bb40aa4]{padding-left:%?40?%}.address-list .address-item .address-item-bottom .address-btn .delete uni-text[data-v-2bb40aa4]{margin-right:%?10?%;font-size:%?26?%}.address-list .btn-add[data-v-2bb40aa4]{margin-top:%?60?%;bottom:0;margin-left:%?30?%;margin-right:%?30?%;width:calc(100% - %?60?%)}.address-list .btn-add .add-address[data-v-2bb40aa4]{height:%?80?%;line-height:%?80?%;border-radius:%?80?%;margin:%?30?% 0 %?30?%}.address-list .btn-add .add-address uni-text[data-v-2bb40aa4]{margin-right:%?10?%;font-size:%?28?%}.address-list .wx-add[data-v-2bb40aa4]{margin-top:%?30?%;margin-bottom:%?30?%;text-align:center;height:%?80?%;line-height:%?80?%;border:1px solid #ccc;border-radius:%?80?%}.button-wrap[data-v-2bb40aa4]{height:%?250?%;margin:auto;margin-top:%?30?%;width:calc(100% - %?60?%);z-index:9;text-align:center;overflow:hidden}.button-wrap .add-address[data-v-2bb40aa4]{height:%?80?%;line-height:%?80?%;border-radius:%?80?%;margin:%?30?% 0 %?30?%}.button-wrap .add-address uni-text[data-v-2bb40aa4]{margin-right:%?10?%;font-size:%?28?%}.button-wrap .add-wx[data-v-2bb40aa4]{background-color:none;margin-top:%?30?%;margin-bottom:%?30?%;width:100%;text-align:center;height:%?92?%;line-height:%?92?%;border:1px solid #ccc;border-radius:%?92?%}',""]),e.exports=t},"2b64":function(e,t,s){var a=s("193e");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=s("4f06").default;i("85c73718",a,!0,{sourceMap:!1,shadowMode:!1})},4836:function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return a}));var a={nsEmpty:s("90af").default,nsLogin:s("2bc6").default,loadingCover:s("4c1d").default},i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-uni-view",{attrs:{"data-theme":e.themeStyle}},[e.token?s("mescroll-uni",{ref:"mescroll",on:{getData:function(t){arguments[0]=t=e.$handleEvent(t),e.getListData.apply(void 0,arguments)}}},[s("template",{attrs:{slot:"list"},slot:"list"},[s("v-uni-view",{staticClass:"address-list"},[0!==e.addressList.length?[e._l(e.addressList,(function(t,a){return s("v-uni-view",{key:a,staticClass:"address-item"},[2==e.localType&&t.local_data?s("v-uni-view",{staticClass:"address-item-top"},[s("v-uni-view",{staticClass:"address-top-info"},[s("v-uni-view",{staticClass:"address-name"},[e._v(e._s(t.name))]),s("v-uni-view",{staticClass:"address-tel"},[e._v(e._s(t.mobile))]),2==e.localType&&t.local_data?s("v-uni-view",{staticClass:"address-status"},[e._v(e._s(t.local_data))]):e._e()],1),s("v-uni-view",{staticClass:"address-info"},[e._v(e._s(t.full_address)+e._s(t.address))])],1):s("v-uni-view",{staticClass:"address-item-top",on:{click:function(s){arguments[0]=s=e.$handleEvent(s),e.setDefault(t.id)}}},[s("v-uni-view",{staticClass:"address-top-info"},[s("v-uni-view",{staticClass:"address-name"},[e._v(e._s(t.name))]),s("v-uni-view",{staticClass:"address-tel"},[e._v(e._s(t.mobile))])],1),s("v-uni-view",{staticClass:"address-info"},[e._v(e._s(t.full_address)+e._s(t.address))])],1),s("v-uni-view",{staticClass:"address-item-bottom"},[s("v-uni-view",{staticClass:"address-default"},[s("v-uni-view",{staticClass:"iconfont",class:1==t.is_default?"iconyuan_checked color-base-text":"iconyuan_checkbox"}),2==e.localType&&t.local_data?s("v-uni-text",{staticClass:"default",class:{"color-base-text":1==t.is_default}},[e._v("默认地址")]):s("v-uni-text",{staticClass:"default",class:{"color-base-text":1==t.is_default},on:{click:function(s){arguments[0]=s=e.$handleEvent(s),e.setDefault(t.id)}}},[e._v("默认地址")])],1),s("v-uni-view",{staticClass:"address-btn"},[s("v-uni-text",{staticClass:"edit",on:{click:function(s){arguments[0]=s=e.$handleEvent(s),e.addAddress("edit",t.id)}}},[s("v-uni-text",{staticClass:"iconfont iconbianji"}),e._v(e._s(e.$lang("modify")))],1),1!=t.is_default?s("v-uni-text",{staticClass:"delete",on:{click:function(s){arguments[0]=s=e.$handleEvent(s),e.deleteAddress(t.id,t.is_default)}}},[s("v-uni-text",{staticClass:"iconfont iconicon7"}),e._v(e._s(e.$lang("del")))],1):e._e()],1)],1)],1)})),s("v-uni-view",{staticClass:"btn-add"},[e.$util.isWeiXin()&&1!=e.local?s("v-uni-button",{staticClass:"add-address",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getChooseAddress()}}},[e._v(e._s(e.$lang("getAddress")))]):e._e(),s("v-uni-button",{staticClass:"add-address",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addAddress("add")}}},[s("v-uni-text",{staticClass:"iconfont iconadd1"}),e._v(e._s(e.$lang("newAddAddress")))],1)],1)]:e._e(),0==e.addressList.length&&e.showEmpty?s("v-uni-view",{staticClass:"empty-box cart-empty"},[s("ns-empty",{attrs:{text:"暂无可用地址",isIndex:e.isIndex,fixed:!1}})],1):e._e(),0==e.addressList.length&&e.showEmpty?s("v-uni-view",{staticClass:"button-wrap"},[e.$util.isWeiXin()&&1!=e.local?s("v-uni-button",{staticClass:"add-address",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getChooseAddress()}}},[e._v(e._s(e.$lang("getAddress")))]):e._e(),s("v-uni-button",{staticClass:"add-address",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addAddress("add")}}},[s("v-uni-text",{staticClass:"iconfont iconadd1"}),e._v(e._s(e.$lang("newAddAddress")))],1)],1):e._e()],2)],1)],2):e._e(),s("ns-login",{ref:"login"}),s("loading-cover",{ref:"loadingCover"})],1)},d=[]},"99ef":function(e,t,s){"use strict";var a=s("2b64"),i=s.n(a);i.a},a6bf:function(e,t,s){"use strict";var a=s("4ea4");s("99af"),s("c975"),s("26e9"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(s("b6ac")),d=s("319c"),n={data:function(){return{addressList:[],back:"",redirect:"redirectTo",isIndex:!1,showEmpty:!1,local:0,localType:1,token:null}},mixins:[i.default],onLoad:function(e){e.back&&(this.back=e.back,uni.setStorageSync("addressBack",e.back)),e.redirect&&(this.redirect=e.redirect),e.local&&(this.local=e.local),e.type&&(this.localType=e.type),uni.getStorageSync("addressBack")&&(this.back=uni.getStorageSync("addressBack"))},onShow:function(){var e=this;this.$langConfig.refresh(),uni.removeStorageSync("addressInfo"),uni.getStorageSync("token")?(this.token=uni.getStorageSync("token"),this.$refs.mescroll&&this.$refs.mescroll.refresh()):setTimeout((function(){e.$refs.login.open("/otherpages/member/address/address")}))},methods:{getListData:function(e){var t=this;this.showEmpty=!1,this.$api.sendRequest({url:"/api/memberaddress/page",data:{page:e.num,page_size:e.size,type:this.localType},success:function(s){t.showEmpty=!0;var a=[],i=s.message;0==s.code&&s.data?a=s.data.list:t.$util.showToast({title:i}),e.endSuccess(a.length),1==e.num&&(t.addressList=[]),t.addressList=t.addressList.concat(a),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(s){e.endErr(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},addAddress:function(e,t){var s={type:this.localType};"edit"==e&&(s.id=t),this.back&&(s.back=this.back),this.$util.redirectTo("/otherpages/member/address_edit/address_edit",s)},deleteAddress:function(e,t){var s=this;uni.showModal({title:"操作提示",content:"确定要删除该地址吗？",success:function(a){if(a.confirm){if(1==t)return void s.$util.showToast({title:"默认地址，不能删除"});s.$api.sendRequest({url:"/api/memberaddress/delete",data:{id:e},success:function(e){0==e.code?s.$util.showToast({title:"删除成功"}):s.$util.showToast({title:"删除失败"}),s.$refs.mescroll.refresh()},fail:function(e){mescroll.endErr()}})}}})},setDefault:function(e){var t=this;this.$api.sendRequest({url:"/api/memberaddress/setdefault",data:{id:e},success:function(e){if(e.data>0)if(t.$refs.mescroll.refresh(),""!=t.back){for(var s=!0,a=getCurrentPages().reverse(),i=0;i<a.length;i++)if(-1!=t.back.indexOf(a[i].route)){s=!1,uni.navigateBack({delta:i});break}s&&t.$util.redirectTo(t.back,{},"redirectTo")}else t.$refs.mescroll.refresh(),t.$util.showToast({title:"修改默认地址成功"});else t.$util.showToast({title:e.message})}})},getChooseAddress:function(){var e=this;if(this.$util.isWeiXin()){if("ios"==uni.getSystemInfoSync().platform)var t=uni.getStorageSync("initUrl");else t=location.href;this.$api.sendRequest({url:"/wechat/api/wechat/jssdkconfig",data:{url:t},success:function(t){if(0==t.code){var s=new d.Weixin;s.init(t.data),s.openAddress((function(t){"openAddress:ok"==t.errMsg?e.saveAddress({name:t.userName,mobile:t.telNumber,province:t.provinceName,city:t.cityName,district:t.countryName,address:t.detailInfo,full_address:t.provinceName+"-"+t.cityName+"-"+t.countryName}):e.$util.showToast({title:t.errMsg})}))}else e.$util.showToast({title:t.message})}})}},saveAddress:function(e){var t=this;this.$api.sendRequest({url:"/api/memberaddress/addthreeparties",data:e,success:function(e){e.code>=0?t.$refs.mescroll.refresh():t.$util.showToast({title:e.message})}})}},watch:{storeToken:function(e,t){e&&(this.token=e,this.$refs.mescroll.refresh())}},computed:{storeToken:function(){return this.$store.state.token}}};t.default=n},c0b1:function(e,t,s){"use strict";s.r(t);var a=s("a6bf"),i=s.n(a);for(var d in a)"default"!==d&&function(e){s.d(t,e,(function(){return a[e]}))}(d);t["default"]=i.a},d297:function(e,t,s){"use strict";s.r(t);var a=s("4836"),i=s("c0b1");for(var d in i)"default"!==d&&function(e){s.d(t,e,(function(){return i[e]}))}(d);s("99ef");var n,r=s("f0c5"),o=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"2bb40aa4",null,!1,a["a"],n);t["default"]=o.exports}}]);