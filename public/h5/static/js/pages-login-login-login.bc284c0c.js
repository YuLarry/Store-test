(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login-login"],{"0daf":function(e,a,t){"use strict";t.r(a);var i=t("c3ca"),o=t.n(i);for(var n in i)"default"!==n&&function(e){t.d(a,e,(function(){return i[e]}))}(n);a["default"]=o.a},"12df":function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,"[data-v-abfa05e4] .reward-popup .uni-popup__wrapper-box{background:none!important;max-width:unset!important;max-height:unset!important;overflow:unset!important}[data-v-abfa05e4] uni-toast .uni-simple-toast__text{background:red!important}",""]),e.exports=a},"15c1":function(e,a,t){"use strict";t.r(a);var i=t("9d40"),o=t("0daf");for(var n in o)"default"!==n&&function(e){t.d(a,e,(function(){return o[e]}))}(n);t("ae7b"),t("5614");var r,s=t("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"abfa05e4",null,!1,i["a"],r);a["default"]=c.exports},5614:function(e,a,t){"use strict";var i=t("bdc1"),o=t.n(i);o.a},"9d40":function(e,a,t){"use strict";t.d(a,"b",(function(){return o})),t.d(a,"c",(function(){return n})),t.d(a,"a",(function(){return i}));var i={loadingCover:t("30be").default,registerReward:t("8ab8").default},o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-scroll-view",{staticClass:"container",attrs:{"scroll-y":"true","data-theme":e.themeStyle}},[t("v-uni-view",{staticClass:"header-wrap"},[t("v-uni-view",{staticClass:"title"},[e._v("登录")]),""!=e.registerConfig.register?t("v-uni-view",{staticClass:"regisiter-agreement"},[t("v-uni-text",{staticClass:"color-tip"},[e._v("还没有账号,")]),t("v-uni-text",{staticClass:"color-base-text",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.toRegister.apply(void 0,arguments)}}},[e._v("立即注册")])],1):e._e()],1),t("v-uni-view",{staticClass:"body-wrap"},[t("v-uni-view",{staticClass:"form-wrap"},[t("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"mobile"==e.loginMode,expression:"loginMode == 'mobile'"}],staticClass:"input-wrap"},[t("v-uni-view",{staticClass:"content"},[t("v-uni-view",{staticClass:"area-code"},[e._v("+86")]),t("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:"仅限中国大陆手机号登录","placeholder-class":"input-placeholder",maxlength:"11"},model:{value:e.formData.mobile,callback:function(a){e.$set(e.formData,"mobile",a)},expression:"formData.mobile"}})],1)],1),t("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"account"==e.loginMode,expression:"loginMode == 'account'"}],staticClass:"input-wrap"},[t("v-uni-view",{staticClass:"content"},[t("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入账号","placeholder-class":"input-placeholder"},model:{value:e.formData.account,callback:function(a){e.$set(e.formData,"account",a)},expression:"formData.account"}})],1)],1),t("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"account"==e.loginMode,expression:"loginMode == 'account'"}],staticClass:"input-wrap"},[t("v-uni-view",{staticClass:"content"},[t("v-uni-input",{staticClass:"input",attrs:{type:"password",placeholder:"请输入密码","placeholder-class":"input-placeholder"},model:{value:e.formData.password,callback:function(a){e.$set(e.formData,"password",a)},expression:"formData.password"}}),t("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"account"==e.loginMode,expression:"loginMode == 'account'"}],staticClass:"align-right"},[t("v-uni-text",{on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.forgetPassword.apply(void 0,arguments)}}},[e._v("忘记密码?")])],1)],1)],1),1==e.captchaConfig?t("v-uni-view",{staticClass:"input-wrap"},[t("v-uni-view",{staticClass:"content"},[t("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入验证码","placeholder-class":"input-placeholder"},model:{value:e.formData.vercode,callback:function(a){e.$set(e.formData,"vercode",a)},expression:"formData.vercode"}}),t("v-uni-image",{staticClass:"captcha",attrs:{src:e.captcha.img},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.getCaptcha.apply(void 0,arguments)}}})],1)],1):e._e(),t("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"mobile"==e.loginMode,expression:"loginMode == 'mobile'"}],staticClass:"input-wrap"},[t("v-uni-view",{staticClass:"content"},[t("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入动态码","placeholder-class":"input-placeholder"},model:{value:e.formData.dynacode,callback:function(a){e.$set(e.formData,"dynacode",a)},expression:"formData.dynacode"}}),t("v-uni-view",{staticClass:"dynacode",class:120==e.dynacodeData.seconds?"color-base-text":"color-tip",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.sendMobileCode.apply(void 0,arguments)}}},[e._v(e._s(e.dynacodeData.codeText))])],1)],1)],1),t("v-uni-view",{staticClass:"login-mode-box"},[t("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:"mobile"==e.loginMode&&-1!=e.registerConfig.login.indexOf("username"),expression:"loginMode == 'mobile' && registerConfig.login.indexOf('username') != -1"}],on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.switchLoginMode.apply(void 0,arguments)}}},[e._v("使用账号登录")]),t("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:"account"==e.loginMode&&-1!=e.registerConfig.login.indexOf("mobile"),expression:"loginMode == 'account' && registerConfig.login.indexOf('mobile') != -1"}],on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.switchLoginMode.apply(void 0,arguments)}}},[e._v("使用手机号登录")])],1),t("v-uni-view",{staticClass:"btn_view"},[t("v-uni-button",{staticClass:"login-btn color-base-border color-base-bg",attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.login.apply(void 0,arguments)}}},[e._v("登录")]),e.isBind?t("v-uni-view",{staticClass:"auth-login color-base-border",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.authLogin.apply(void 0,arguments)}}},[t("v-uni-text",{staticClass:"color-base-text color-base-border"},[e._v("一键授权登录")])],1):e._e()],1)],1),t("loading-cover",{ref:"loadingCover"}),t("register-reward",{ref:"registerReward"})],1)},n=[]},ac0c:function(e,a,t){var i=t("f21a");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=t("4f06").default;o("ab688586",i,!0,{sourceMap:!1,shadowMode:!1})},ae7b:function(e,a,t){"use strict";var i=t("ac0c"),o=t.n(i);o.a},bdc1:function(e,a,t){var i=t("12df");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=t("4f06").default;o("491a91f8",i,!0,{sourceMap:!1,shadowMode:!1})},c3ca:function(e,a,t){"use strict";var i=t("4ea4");t("c975"),t("b64b"),t("ac1f"),t("5319"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=i(t("d5e1")),n=i(t("946a")),r=i(t("ccd8")),s=i(t("8ab8")),c={data:function(){return{loginMode:"mobile",formData:{mobile:"",account:"",password:"",vercode:"",dynacode:"",key:""},captcha:{id:"",img:""},isSub:!1,back:"",redirect:"redirectTo",openidIsExits:!1,isBind:!1,dynacodeData:{seconds:120,timer:null,codeText:"获取动态码",isSend:!1},registerConfig:{register:"",login:""},captchaConfig:1}},mixins:[n.default,r.default],components:{registerReward:s.default},onLoad:function(e){if(e.back&&(this.back=e.back),this.getRegisterConfig(),this.getCaptchaConfig(),this.$util.isWeiXin()&&!e.code){var a=this.$config.h5Domain+"/pages/login/login/login";this.back&&(a+="?back="+encodeURIComponent(this.back)),this.$api.sendRequest({url:"/wechat/api/wechat/authcode",data:{redirect_url:a},success:function(e){e.code>=0&&(location.href=e.data)}})}uni.getStorageSync("authInfo")&&(this.authInfo=uni.getStorageSync("authInfo"),this.checkOpenidIsExits())},onShow:function(){this.$langConfig.refresh()},onReady:function(){this.$refs.loadingCover&&this.$refs.loadingCover.hide()},methods:{getCaptchaConfig:function(){var e=this;this.$api.sendRequest({url:"/api/config/getCaptchaConfig",success:function(a){a.code>=0&&(e.captchaConfig=a.data.data.value.shop_reception_login,1==e.captchaConfig&&e.getCaptcha())}})},getRegisterConfig:function(){var e=this;this.$api.sendRequest({url:"/api/register/config",success:function(a){a.code>=0&&(e.registerConfig=a.data.value,-1!=e.registerConfig.login.indexOf("mobile")?e.loginMode="mobile":e.loginMode="account",e.$refs.loadingCover&&e.$refs.loadingCover.hide())}})},switchLoginMode:function(){this.loginMode="mobile"==this.loginMode?"account":"mobile"},getCaptcha:function(){var e=this;this.$api.sendRequest({url:"/api/captcha/captcha",data:{captcha_id:this.captcha.id},success:function(a){a.code>=0&&(e.captcha=a.data,e.captcha.img=e.captcha.img.replace(/\r\n/g,""))}})},toRegister:function(){this.back?this.$util.redirectTo("/pages/login/register/register",{back:this.back}):this.$util.redirectTo("/pages/login/register/register")},forgetPassword:function(){this.back?this.$util.redirectTo("/otherpages/login/find/find",{back:this.back}):this.$util.redirectTo("/otherpages/login/find/find")},login:function(){var e=this;if("account"==this.loginMode){var a="/api/login/login";t={username:this.formData.account,password:this.formData.password}}else{a="/api/login/mobile";var t={mobile:this.formData.mobile,key:this.formData.key,code:this.formData.dynacode}}if(""!=this.captcha.id&&(t.captcha_id=this.captcha.id,t.captcha_code=this.formData.vercode),Object.keys(this.authInfo).length&&Object.assign(t,this.authInfo),this.authInfo.avatarUrl&&(t.headimg=this.authInfo.avatarUrl),this.authInfo.nickName&&(t.nickname=this.authInfo.nickName),uni.getStorageSync("source_member")&&(t.source_member=uni.getStorageSync("source_member")),this.verify(t)){if(this.isSub)return;this.isSub=!0,this.$api.sendRequest({url:a,data:t,success:function(a){a.code>=0?uni.setStorage({key:"token",data:a.data.token,success:function(){uni.removeStorageSync("loginLock"),uni.removeStorageSync("unbound"),uni.removeStorageSync("authInfo"),""!=e.back?e.$util.redirectTo(decodeURIComponent(e.back),{},e.redirect):e.$util.redirectTo("/pages/member/index/index",{},e.redirect)}}):(e.isSub=!1,e.getCaptcha(),e.$util.showToast({title:a.message}))},fail:function(a){e.isSub=!1,e.getCaptcha()}})}},verify:function(e){var a=[];"mobile"==this.loginMode&&(a=[{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"}],1==this.captchaConfig&&""!=this.captcha.id&&a.push({name:"captcha_code",checkType:"required",errorMsg:this.$lang("captchaPlaceholder")}),a.push({name:"code",checkType:"required",errorMsg:this.$lang("dynacodePlaceholder")})),"account"==this.loginMode&&(a=[{name:"username",checkType:"required",errorMsg:this.$lang("accountPlaceholder")},{name:"password",checkType:"required",errorMsg:this.$lang("passwordPlaceholder")}],1==this.captchaConfig&&""!=this.captcha.id&&a.push({name:"captcha_code",checkType:"required",errorMsg:this.$lang("captchaPlaceholder")}));var t=o.default.check(e,a);return!!t||(this.$util.showToast({title:o.default.error}),!1)},authLogin:function(){var e=this;this.isSub||(this.isSub=!0,this.$api.sendRequest({url:"/api/login/auth",data:this.authInfo,success:function(a){a.code>=0?uni.setStorage({key:"token",data:a.data.token,success:function(){uni.removeStorageSync("loginLock"),uni.removeStorageSync("unbound"),uni.removeStorageSync("authInfo"),a.data.is_register&&e.$refs.registerReward.getReward()?e.$refs.registerReward.open():""!=e.back?e.$util.redirectTo(decodeURIComponent(e.back),{},e.redirect):e.$util.redirectTo("/pages/member/index/index",{},e.redirect)}}):(e.isSub=!1,e.$util.showToast({title:a.message}))},fail:function(a){e.isSub=!1,e.$util.showToast({title:"request:fail"})}}))},mobileAuthLogin:function(e){var a=this;if("getPhoneNumber:ok"==e.detail.errMsg){var t={iv:e.detail.iv,encryptedData:e.detail.encryptedData};if(Object.keys(this.authInfo).length&&Object.assign(t,this.authInfo),this.authInfo.avatarUrl&&(t.headimg=this.authInfo.avatarUrl),this.authInfo.nickName&&(t.nickname=this.authInfo.nickName),uni.getStorageSync("source_member")&&(t.source_member=uni.getStorageSync("source_member")),this.isSub)return;this.isSub=!0,this.$api.sendRequest({url:"/api/tripartite/mobileauth",data:t,success:function(e){e.code>=0?uni.setStorage({key:"token",data:e.data.token,success:function(){uni.removeStorageSync("loginLock"),uni.removeStorageSync("unbound"),uni.removeStorageSync("authInfo"),e.data.is_register&&a.$refs.registerReward.getReward()?a.$refs.registerReward.open():""!=a.back?a.$util.redirectTo(decodeURIComponent(a.back),{},a.redirect):a.$util.redirectTo("/pages/member/index/index",{},a.redirect)}}):(a.isSub=!1,a.$util.showToast({title:e.message}))},fail:function(e){a.isSub=!1,a.$util.showToast({title:"request:fail"})}})}},sendMobileCode:function(){var e=this;if(120==this.dynacodeData.seconds){var a={mobile:this.formData.mobile,captcha_id:this.captcha.id,captcha_code:this.formData.vercode},t=[{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"}];1==this.captchaConfig&&t.push({name:"captcha_code",checkType:"required",errorMsg:"请输入验证码"});var i=o.default.check(a,t);i?this.dynacodeData.isSend||(this.dynacodeData.isSend=!0,this.$api.sendRequest({url:"/api/login/mobileCode",data:a,success:function(a){e.dynacodeData.isSend=!1,a.code>=0?(e.formData.key=a.data.key,120==e.dynacodeData.seconds&&null==e.dynacodeData.timer&&(e.dynacodeData.timer=setInterval((function(){e.dynacodeData.seconds--,e.dynacodeData.codeText=e.dynacodeData.seconds+"s后可重新获取"}),1e3))):e.$util.showToast({title:a.message})},fail:function(){e.$util.showToast({title:"request:fail"}),e.dynacodeData.isSend=!1}})):this.$util.showToast({title:o.default.error})}},checkOpenidIsExits:function(){var e=this;Object.keys(this.authInfo).length&&(uni.setStorage({key:"authInfo",data:this.authInfo}),this.$api.sendRequest({url:"/api/login/openidisexits",data:this.authInfo,success:function(a){a.code>=0&&a.data>0&&(e.isBind=!0)}}))}},watch:{"dynacodeData.seconds":{handler:function(e,a){0==e&&(clearInterval(this.dynacodeData.timer),this.dynacodeData={seconds:120,timer:null,codeText:"获取动态码",isSend:!1})},immediate:!0,deep:!0}}};a.default=c},f21a:function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */[data-v-abfa05e4] .uni-scroll-view{background-color:#fff}[data-v-abfa05e4] .uni-scroll-view::-webkit-scrollbar{\r\n  /* 隐藏滚动条，但依旧具备可以滚动的功能 */display:none}uni-page-body[data-v-abfa05e4]{width:100%;background:#fff!important}.align-right[data-v-abfa05e4]{color:#838383}.container[data-v-abfa05e4]{width:100vw;height:100vh}.header-wrap[data-v-abfa05e4]{width:80%;margin:calc(%?120?% + 44px) auto 0;background-repeat:no-repeat;background-size:contain;background-position:bottom;position:relative}.header-wrap .title[data-v-abfa05e4]{font-size:%?60?%;font-weight:700}.body-wrap[data-v-abfa05e4]{margin-top:%?100?%;padding-bottom:%?100?%}.body-wrap .form-wrap[data-v-abfa05e4]{width:80%;margin:0 auto}.body-wrap .form-wrap .input-wrap[data-v-abfa05e4]{position:relative;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;height:%?60?%;margin-top:%?60?%}.body-wrap .form-wrap .input-wrap .iconfont[data-v-abfa05e4]{width:%?60?%;height:%?60?%;position:absolute;left:0;right:0;line-height:%?60?%;font-size:%?32?%;color:#303133;font-weight:600}.body-wrap .form-wrap .input-wrap .content[data-v-abfa05e4]{display:-webkit-box;display:-webkit-flex;display:flex;height:%?60?%;border-bottom:1px solid #eee;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.body-wrap .form-wrap .input-wrap .content .input[data-v-abfa05e4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:%?60?%;line-height:%?60?%;font-size:%?28?%}.body-wrap .form-wrap .input-wrap .content .input-placeholder[data-v-abfa05e4]{font-size:%?28?%;color:#bfbfbf;line-height:%?60?%}.body-wrap .form-wrap .input-wrap .content .captcha[data-v-abfa05e4]{margin:%?4?%;height:%?52?%;width:%?140?%}.body-wrap .form-wrap .input-wrap .content .dynacode[data-v-abfa05e4]{line-height:%?60?%;font-size:%?24?%}.body-wrap .form-wrap .input-wrap .content .area-code[data-v-abfa05e4]{line-height:%?60?%;margin-right:%?20?%;font-size:%?28?%}.body-wrap .forget-section[data-v-abfa05e4]{display:-webkit-box;display:-webkit-flex;display:flex;width:80%;margin:%?40?% auto}.body-wrap .forget-section uni-view[data-v-abfa05e4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?24?%;line-height:1}.body-wrap .btn_view[data-v-abfa05e4]{width:80%;margin:%?94?% auto auto}.body-wrap .login-btn[data-v-abfa05e4]{height:%?90?%;line-height:%?90?%;-webkit-border-radius:%?90?%;border-radius:%?90?%;color:#fff;text-align:center;border:1px solid;width:100%;margin:0}.body-wrap .auth-login[data-v-abfa05e4]{margin-top:%?20?%;width:calc(100% - 2px);height:%?82?%;-webkit-border-radius:%?82?%;border-radius:%?82?%;line-height:%?82?%;border:1px solid;color:#fff;text-align:center;margin-left:0;background-color:#fff}.body-wrap .auth-login uni-text[data-v-abfa05e4]{color:#d0d0d0}.body-wrap .auth-login .iconfont[data-v-abfa05e4]{font-size:%?70?%}.body-wrap .auth-login .iconweixin[data-v-abfa05e4]{color:#1aad19}.body-wrap .regisiter-agreement[data-v-abfa05e4]{text-align:center;margin-top:%?30?%;line-height:1;color:#838383;line-height:%?60?%}.body-wrap .regisiter-agreement[data-v-abfa05e4]{font-size:%?24?%}.login-btn-box[data-v-abfa05e4]{margin-top:%?50?%}.login-btn-box.active[data-v-abfa05e4]{margin:%?30?% 0 %?50?%}.back-btn[data-v-abfa05e4]{font-size:%?52?%;position:fixed;left:%?24?%;top:%?72?%;z-index:9;color:#000}.login-mode-box[data-v-abfa05e4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;color:#909399;margin:auto;margin-top:%?44?%;font-size:%?26?%;width:80%}body.?%PAGE?%[data-v-abfa05e4]{background:#fff!important}',""]),e.exports=a}}]);