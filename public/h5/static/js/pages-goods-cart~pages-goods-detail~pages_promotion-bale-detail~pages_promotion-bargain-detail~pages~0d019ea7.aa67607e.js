(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-cart~pages-goods-detail~pages_promotion-bale-detail~pages_promotion-bargain-detail~pages~0d019ea7"],{"013c":function(t,i,e){"use strict";e("c975"),e("a9e3"),e("acd8"),e("ac1f"),e("5319"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o={type:"scrolldone",target:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},currentTarget:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},detail:{}},a={props:{backgroundTextStyle:{type:String,default:"dark",validator:function(t){return-1!==["dark","light"].indexOf(t)}},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created:function(){var t=this,i=getCurrentPages()[0];this.$pageVm=i.$vm||i,uni.onWindowResize((function(i){t.$emit("resize",i)})),this.$pageVm.$on("hook:onPageScroll",(function(i){t.$emit("scroll",i)})),this.$watch("backgroundTextStyle",(function(){t.setBackgroundTextStyle()})),this.$watch((function(){return[t.rootFontSize,t.pageStyle]}),(function(){t.setPageMeta()})),this.$watch((function(){return[t.backgroundColor,t.backgroundColorTop,t.backgroundColorBottom]}),(function(){t.setBackgroundColor()})),this.$watch((function(){return[t.scrollTop,t.scrollDuration]}),(function(){t.pageScrollTo()}))},beforeMount:function(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle(),this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh:function(t,i){t.setStyle({pullToRefresh:{support:i,style:"Android"===plus.os.name?"circle":"default"}})},setPageMeta:function(){uni.setPageMeta({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle:function(){},setBackgroundColor:function(){},pageScrollTo:function(){var t=this,i=String(this.scrollTop);if(-1!==i.indexOf("rpx")&&(i=uni.upx2px(i.replace("rpx",""))),i=parseFloat(i),!isNaN(i)){var e=function e(a){a.scrollTop===i&&(t.$pageVm.$off("hook:onPageScroll",e),t.$emit("scrolldone",o))};uni.pageScrollTo({scrollTop:i,duration:this.scrollDuration,success:function(){t.$pageVm.$on("hook:onPageScroll",e)}})}}}};i.default=a},2493:function(t,i,e){var o=e("24fb");i=o(!1),i.push([t.i,'@charset "UTF-8";.uni-popup[data-v-f6696a84]{position:fixed;top:0;top:0;bottom:0;left:0;right:0;z-index:999;overflow:hidden}.uni-popup__mask[data-v-f6696a84]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:998;background:rgba(0,0,0,.4);opacity:0}.uni-popup__mask.ani[data-v-f6696a84]{transition:all .3s}.uni-popup__mask.uni-bottom[data-v-f6696a84],\r\n.uni-popup__mask.uni-center[data-v-f6696a84],\r\n.uni-popup__mask.uni-right[data-v-f6696a84],\r\n.uni-popup__mask.uni-left[data-v-f6696a84],\r\n.uni-popup__mask.uni-top[data-v-f6696a84]{opacity:1}.uni-popup__wrapper[data-v-f6696a84]{position:absolute;z-index:999;box-sizing:border-box;background:#fff}.uni-popup__wrapper.ani[data-v-f6696a84]{transition:all .3s}.uni-popup__wrapper.top[data-v-f6696a84]{top:0;left:0;width:100%;-webkit-transform:translateY(-100%);transform:translateY(-100%)}.uni-popup__wrapper.bottom[data-v-f6696a84]{bottom:0;left:0;width:100%;-webkit-transform:translateY(100%);transform:translateY(100%)}.uni-popup__wrapper.right[data-v-f6696a84]{bottom:0;left:0;width:100%;-webkit-transform:translateX(100%);transform:translateX(100%)}.uni-popup__wrapper.left[data-v-f6696a84]{bottom:0;left:0;width:100%;-webkit-transform:translateX(-100%);transform:translateX(-100%)}.uni-popup__wrapper.center[data-v-f6696a84]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0}.uni-popup__wrapper-box[data-v-f6696a84]{position:relative;box-sizing:border-box}.uni-popup__wrapper.uni-custom .uni-popup__wrapper-box[data-v-f6696a84]{background:#fff}.uni-popup__wrapper.uni-custom.center .uni-popup__wrapper-box[data-v-f6696a84]{position:relative;max-width:80%;max-height:80%;overflow-y:scroll}.uni-popup__wrapper.uni-custom.bottom .uni-popup__wrapper-box[data-v-f6696a84],\r\n.uni-popup__wrapper.uni-custom.top .uni-popup__wrapper-box[data-v-f6696a84]{width:100%;max-height:500px;overflow-y:scroll}.uni-popup__wrapper.uni-bottom[data-v-f6696a84],\r\n.uni-popup__wrapper.uni-top[data-v-f6696a84]{-webkit-transform:translateY(0);transform:translateY(0)}.uni-popup__wrapper.uni-left[data-v-f6696a84],\r\n.uni-popup__wrapper.uni-right[data-v-f6696a84]{-webkit-transform:translateX(0);transform:translateX(0)}.uni-popup__wrapper.uni-center[data-v-f6696a84]{-webkit-transform:scale(1);transform:scale(1);opacity:1}\r\n\r\n/* isIphoneX系列手机底部安全距离 */.bottom.safe-area[data-v-f6696a84]{padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}',""]),t.exports=i},"252c":function(t,i,e){var o=e("c9758");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=e("4f06").default;a("5c63e358",o,!0,{sourceMap:!1,shadowMode:!1})},3275:function(t,i,e){"use strict";var o=e("252c"),a=e.n(o);a.a},4020:function(t,i,e){"use strict";var o;e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return o}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticStyle:{display:"none"}},[t._t("default")],2)},s=[]},"4b3d":function(t,i,e){"use strict";var o=e("aea5"),a=e.n(o);a.a},"56b1":function(t,i,e){"use strict";e.r(i);var o=e("8d90"),a=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=a.a},"6d42":function(t,i,e){"use strict";e.r(i);var o=e("4020"),a=e("8f28");for(var s in a)"default"!==s&&function(t){e.d(i,t,(function(){return a[t]}))}(s);var n,u=e("f0c5"),r=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],n);i["default"]=r.exports},"6ffd":function(t,i,e){"use strict";e.r(i);var o=e("7c7b"),a=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=a.a},"7c7b":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o={name:"UniPopup",props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},custom:{type:Boolean,default:!1},maskClick:{type:Boolean,default:!0},show:{type:Boolean,default:!0}},data:function(){return{ani:"",showPopup:!1,callback:null,isIphoneX:!1}},watch:{show:function(t){t?this.open():this.close()}},created:function(){this.isIphoneX=this.$util.uniappIsIPhoneX()},methods:{clear:function(){},open:function(t){var i=this;t&&(this.callback=t),this.$emit("change",{show:!0}),this.showPopup=!0,this.$nextTick((function(){setTimeout((function(){i.ani="uni-"+i.type}),30)}))},close:function(t,i){var e=this;!this.maskClick&&t||(this.$emit("change",{show:!1}),this.ani="",this.$nextTick((function(){setTimeout((function(){e.showPopup=!1}),300)})),i&&i(),this.callback&&this.callback.call(this))}}};i.default=o},"8d90":function(t,i,e){"use strict";var o=e("4ea4");e("99af"),e("a9e3"),e("acd8"),e("e25e"),e("ac1f"),e("1276"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=o(e("dba3")),s=o(e("ce70")),n={name:"ns-goods-sku",components:{uniPopup:a.default},props:{goodsDetail:{type:Object,default:null},disabled:{type:Boolean,default:!1},pointLimit:{type:[Number,String]},maxBuy:{type:Number,default:0},minBuy:{type:Number,default:0}},data:function(){return{isIphoneX:!1,systemInfo:{},number:1,btnSwitch:!1,type:"",callback:null,skuId:0,pintuanId:0,limitNumber:0,minNumber:0,preview:0,cartNumber:0,goodsSkuDetail:{}}},created:function(){this.isIphoneX=this.$util.uniappIsIPhoneX(),this.systemInfo=uni.getSystemInfoSync()},watch:{pointLimit:function(t,i){this.limitNumber=Number(t)},goodsDetail:function(t,i){this.skuId=t.sku_id},minBuy:function(t,i){this.minBuy>1&&(this.number=Number(this.minBuy))}},computed:{balance:function(){var t=this.goodsDetail.member_price&&this.goodsDetail.member_price>0?this.goodsDetail.member_price:this.goodsDetail.price,i=parseFloat(t)-parseFloat(this.goodsDetail.presale_price);return i=i<0?0:i,i.toFixed(2)},decreaseDisabled:function(){var t=this.minBuy>0?this.minBuy:1;return this.number<=t},increaseDisabled:function(){var t=this.maxBuy>0&&this.maxBuy<this.goodsDetail.stock?this.maxBuy:this.goodsDetail.stock;return this.number>=t}},methods:{show:function(t,i){this.callback=i,this.$refs.skuPopup.open(),this.type=t,this.skuId=this.goodsDetail.sku_id,this.preview=this.goodsDetail.preview||0,"pintuan"==this.type&&this.goodsDetail.pintuan_id||"pinfan"==this.type&&this.goodsDetail.pinfan_id?this.limitNumber=this.goodsDetail.buy_num:"groupbuy"==this.type&&this.goodsDetail.groupbuy_id?this.goodsDetail.stock>this.goodsDetail.buy_num&&(this.number=this.goodsDetail.buy_num,this.minNumber=this.goodsDetail.buy_num):"bargain"==this.type&&this.goodsDetail.bargain_id&&(this.number=1,this.minNumber=1),"join_cart"==this.type&&this.getCartData(),"point"==this.type&&-1==this.goodsDetail.stock&&(this.goodsDetail.pointCoupon=1,this.goodsDetail.stock=99999),"bale"==this.type&&(this.number=1,-1==this.$util.inArray(this.skuId+"",this.goodsDetail.activity_sku_ids)?(this.confirmDisabled=!0,this.$util.showToast({title:"该规格未参与打包一口价活动"})):this.confirmDisabled=!1),this.$forceUpdate()},hide:function(){this.$refs.skuPopup.close()},previewMedia:function(){var t=[];t.push(this.$util.img(this.goodsDetail.sku_image,{size:"big"})),uni.previewImage({current:1,urls:t})},change:function(t,i){if(!this.disabled){this.btnSwitch=!1,this.skuId=t;for(var e=0;e<this.goodsDetail.goods_spec_format.length;e++)for(var o=this.goodsDetail.goods_spec_format[e],a=0;a<o.value.length;a++)i==this.goodsDetail.goods_spec_format[e].value[a].spec_id&&(this.goodsDetail.goods_spec_format[e].value[a].selected=!1);this.goodsDetail.pintuan_id?this.getPintuanGoodsSkuInfo():this.goodsDetail.pinfan_id?this.getPinfanGoodsSkuInfo():this.goodsDetail.groupbuy_id?this.getGroupbuyGoodsSkuInfo():this.goodsDetail.bargain_id?this.getBargainGoodsSkuInfo():this.goodsDetail.seckill_id?this.getSeckillGoodsSkuInfo():this.goodsDetail.topic_id?this.getTopicsGoodsSkuInfo():this.goodsDetail.exchange_id?this.getPointGoodsSkuInfo():"presale"==this.type&&this.goodsDetail.presale_id?this.getPresaleGoodsSkuInfo():this.goodsDetail.bale_id?(this.getGoodsSkuInfo(),-1==this.$util.inArray(t+"",this.goodsDetail.activity_sku_ids)?(this.confirmDisabled=!0,this.$util.showToast({title:"该规格未参与打包一口价活动"})):this.confirmDisabled=!1):this.getGoodsSkuInfo()}},showPrice:function(t){return parseFloat(t)},getFenxiaoGoodsDetail:function(){var t=this;this.$api.sendRequest({url:"/fenxiao/api/goods/detail",data:{sku_id:this.skuId},success:function(i){0==i.code&&i.data&&(t.levelInfo=i.data)}})},getGoodsSkuInfo:function(){var t=this;this.getFenxiaoGoodsDetail();this.$api.sendRequest({url:"/api/goodssku/info",data:{sku_id:this.skuId},success:function(i){var e=i.data;if(null!=e){if("presale"==e.promotion_type)return void t.$util.redirectTo("/pages_promotion/presale/detail",{id:e.presale_id,sku_id:t.skuId},"reLaunch");e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),1==t.goodsSkuDetail.promotion_type&&(t.goodsSkuDetail.discountTimeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp)),1==t.goodsSkuDetail.promotion_type&&t.goodsSkuDetail.discountTimeMachine?t.goodsSkuDetail.member_price>0&&Number(t.goodsSkuDetail.member_price)<=Number(t.goodsSkuDetail.discount_price)?t.goodsSkuDetail.show_price=t.goodsSkuDetail.member_price:t.goodsSkuDetail.show_price=t.goodsSkuDetail.discount_price:t.goodsSkuDetail.member_price>0?t.goodsSkuDetail.show_price=t.goodsSkuDetail.member_price:t.goodsSkuDetail.show_price=t.goodsSkuDetail.price,t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail),t.$emit("GetSkuid",t.skuId),t.$emit("levelInfo",t.levelInfo),t.$forceUpdate()}else t.$util.redirectTo("/pages/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index",{},"reLaunch")}})},getPintuanGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/pintuan/api/goods/info",data:{sku_id:this.skuId,pintuan_id:this.goodsDetail.pintuan_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getPintuanGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),t.goodsSkuDetail.show_price=0==t.goodsDetail.group_id?t.goodsSkuDetail.promotion_price:t.goodsSkuDetail.pintuan_price,t.goodsSkuDetail.save_price=t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0?(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2):0,t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail",{goods_id:t.goodsSkuDetail.goods_id},"redirectTo")}),1e3)),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index",{},"reLaunch")}})},getPinfanGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/pinfan/api/goods/info",data:{sku_id:this.skuId,pintuan_id:this.goodsDetail.pinfan_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getPinfanGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),t.goodsSkuDetail.show_price=0==t.goodsDetail.group_id?t.goodsSkuDetail.promotion_price:t.goodsSkuDetail.pintuan_price,t.goodsSkuDetail.save_price=t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0?(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2):0,t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail",{goods_id:t.goodsSkuDetail.goods_id},"redirectTo")}),1e3)),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index",{},"reLaunch")}})},getBargainGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/bargain/api/goods/info",data:{sku_id:this.skuId,bargain_id:this.goodsDetail.bargain_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getBargainGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),t.goodsSkuDetail.show_price=t.goodsDetail.bargain_id>0?t.goodsSkuDetail.floor_price:t.goodsSkuDetail.price,t.goodsSkuDetail.stock=t.goodsSkuDetail.bargain_stock,t.goodsSkuDetail.save_price=t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0?(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2):0,t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail",{goods_id:t.goodsSkuDetail.goods_id},"redirectTo")}),1e3)),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index",{},"reLaunch")}})},getTopicsGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/topic/api/topicgoods/info",data:{sku_id:this.skuId,topic_id:this.goodsDetail.topic_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getTopicsGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e.goods_sku_detail,t.dealData(),t.goodsSkuDetail.show_price=t.goodsDetail.topic_id>0?t.goodsSkuDetail.topic_price:t.goodsSkuDetail.price,t.goodsSkuDetail.save_price=t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0?(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2):0,t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail",{sku_id:t.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index",{},"reLaunch")}})},getGroupbuyGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/groupbuy/api/goods/info",data:{sku_id:this.skuId,groupbuy_id:this.goodsDetail.groupbuy_id},success:function(i){var e=i.data;null!=e?(e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),t.goodsSkuDetail.show_price=t.goodsDetail.groupbuy_price,t.goodsSkuDetail.save_price=t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0?(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2):0,t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail",{goods_id:t.goodsSkuDetail.goods_id},"redirectTo")}),1e3)),t.btnSwitch=!1,e.stock>e.buy_num&&(t.number=t.goodsDetail.buy_num,t.minNumber=t.goodsDetail.buy_num),t.$emit("refresh",t.goodsSkuDetail)):t.$util.redirectTo("/pages/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index",{},"reLaunch")}})},getSeckillGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/seckill/api/seckillgoods/info",data:{sku_id:this.skuId,seckill_id:this.goodsDetail.seckill_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getSeckillGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e.goods_sku_detail,t.dealData(),t.goodsSkuDetail.show_price=t.goodsSkuDetail.seckill_price,t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0&&(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2),t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail",{goods_id:t.goodsSkuDetail.goods_id},"redirectTo")}),1e3)),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index",{},"reLaunch")}})},getPointGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/pointexchange/api/goods/info",data:{sku_id:this.skuId,exchange_id:this.goodsDetail.exchange_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getPointGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages_promotion/point/list",{},"redirectTo")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index",{},"reLaunch")}})},getPresaleGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/presale/api/goods/info",data:{sku_id:this.skuId,id:this.goodsDetail.presale_id},success:function(i){var e=i.data;if(e){if("again"==e.type)return t.skuId=e.sku_id,void t.getPresaleGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages/goods/detail",{sku_id:t.skuId},"redirectTo")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index",{},"reLaunch")}})},dealData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goodsSkuDetail;if(t.sku_images?t.sku_images=t.sku_images.split(","):t.sku_images=[],t.goods_spec_format&&t.goods_image&&(t.goods_image=t.goods_image.split(","),t.sku_images=t.goods_image.concat(t.sku_images)),t.sku_spec_format&&(t.sku_spec_format=JSON.parse(t.sku_spec_format)),t.goods_attr_format){var i=JSON.parse(t.goods_attr_format);t.goods_attr_format=this.$util.unique(i,"attr_id");for(var e=0;e<t.goods_attr_format.length;e++)for(var o=0;o<i.length;o++)t.goods_attr_format[e].attr_id==i[o].attr_id&&t.goods_attr_format[e].attr_value_id!=i[o].attr_value_id&&(t.goods_attr_format[e].attr_value_name+="、"+i[o].attr_value_name)}t.goods_spec_format&&(t.goods_spec_format=JSON.parse(t.goods_spec_format)),t.goods_content&&"point"!=this.type&&(t.goods_content=(0,s.default)(t.goods_content)),t.content&&"point"==this.type&&(t.content=(0,s.default)(t.content)),this.goodsDetail.unit=this.goodsDetail.unit||"件",this.keyInput(!0),"confirm"!=this.type&&this.$langConfig.title(t.goods_name)},changeNum:function(t){if(0!=this.goodsDetail.stock){var i=1,e=this.goodsDetail.stock;if(1==this.maxBuy&&(e=1),1==this.goodsDetail.is_limit&&this.maxBuy>0&&this.maxBuy<e&&(e=this.maxBuy),1==this.goodsDetail.is_limit&&2==this.goodsDetail.limit_type&&this.maxBuy>0&&this.goodsDetail.purchased_num>0){var o=this.maxBuy-this.goodsDetail.purchased_num;e=o<this.goodsDetail.stock?o:this.goodsDetail.stock}if(this.minBuy>1&&(i=this.minBuy),"pintuan"==this.type&&this.goodsDetail.pintuan_id?e=this.goodsDetail.buy_num>this.goodsDetail.stock?this.goodsDetail.stock:this.goodsDetail.buy_num:"groupbuy"==this.type&&this.goodsDetail.groupbuy_id?(e=(this.goodsDetail.buy_num,this.goodsDetail.stock,this.goodsDetail.stock),i=this.goodsDetail.buy_num):"seckill"==this.type&&this.goodsDetail.seckill_id&&this.goodsDetail.num>0&&this.goodsDetail.num<this.goodsDetail.stock?e=this.goodsDetail.num:"bargain"==this.type&&this.goodsDetail.bargain_id?e=1:"presale"==this.type&&this.goodsDetail.presale_id&&(e=this.goodsDetail.presale_num>this.goodsDetail.stock?this.goodsDetail.stock:this.goodsDetail.presale_num),"+"==t)if(this.number<e)this.number++;else{if(this.number>=this.goodsDetail.stock)return void this.$util.showToast({title:"库存不足"});if(1==this.goodsDetail.is_limit&&this.maxBuy>0){if(1==this.goodsDetail.limit_type)return void this.$util.showToast({title:"该商品每次最多购买"+this.maxBuy+this.goodsDetail.unit});if(2==this.goodsDetail.limit_type){var a="该商品每人限购"+this.maxBuy+this.goodsDetail.unit;return a+=this.goodsDetail.purchased_num>0?"，您已购买了"+this.goodsDetail.purchased_num+this.goodsDetail.unit:"",void this.$util.showToast({title:a})}}if("seckill"==this.type&&this.goodsDetail.seckill_id&&this.goodsDetail.num>0)return void this.$util.showToast({title:"该商品每人限购"+this.goodsDetail.num+this.goodsDetail.unit});if("presale"==this.type&&this.goodsDetail.presale_id&&this.goodsDetail.presale_num>0)return void this.$util.showToast({title:"该商品每人限购"+this.goodsDetail.presale_num+this.goodsDetail.unit})}else if("-"==t){if(!(this.number>i))return void(this.minBuy>1&&this.$util.showToast({title:"该商品"+this.minBuy+this.goodsDetail.unit+"起售"}));this.number-=1}this.number>this.limitNumber&&this.limitNumber&&(this.number=this.limitNumber)}},blur:function(){if(this.number||(this.number=0),this.number>this.limitNumber&&this.limitNumber&&(this.number=this.limitNumber),this.number<this.minNumber&&this.minNumber&&(this.number=this.minNumber),1==this.goodsDetail.is_limit&&this.maxBuy>0&&this.number>this.maxBuy&&(this.number=this.maxBuy),1==this.goodsDetail.is_limit&&this.maxBuy>0&&this.goodsDetail.purchased_num>0){var t=this.maxBuy-this.goodsDetail.purchased_num;this.number>t&&(this.number=t)}this.number<this.minBuy&&this.minBuy>0&&(this.number=this.minBuy),this.number<=0&&(this.number=1)},keyInput:function(t,i){var e=this;setTimeout((function(){var o=e.goodsDetail.stock;0!=e.goodsDetail.stock?(t&&0==e.number.length&&(e.number=1),t&&(e.number<=0||isNaN(e.number))&&(e.number=1),"pintuan"==e.type&&e.goodsDetail.pintuan_id&&e.number>e.goodsDetail.buy_num?e.number=e.goodsDetail.buy_num:"groupbuy"==e.type&&e.goodsDetail.groupbuy_id&&e.number<e.goodsDetail.buy_num?e.number=1:"seckill"==e.type&&e.goodsDetail.seckill_id&&e.goodsDetail.max_buy>0&&e.number>e.goodsDetail.max_buy?e.number=e.goodsDetail.max_buy:"bargain"==e.type&&e.goodsDetail.bargain_id?e.number=1:"presale"==e.type&&e.goodsDetail.presale_id&&e.goodsDetail.presale_num>0&&e.number>e.goodsDetail.presale_num?e.number=e.goodsDetail.presale_num:e.number>o&&(e.number=o),e.minBuy>1&&e.number<e.minBuy&&(e.number=e.minBuy),t&&(e.number=parseInt(e.number)),i&&i()):e.number=0}),0)},confirm:function(){var t=this;uni.removeStorageSync("delivery"),this.preview?this.$util.showToast({title:"预览商品无法购买"}):uni.getStorageSync("token")?this.keyInput(!0,(function(){if(0!=t.goodsDetail.stock)if(0==t.number.length||t.number<=0)t.$util.showToast({title:"购买数量不能小于等于0"});else if(t.goodsDetail.buy_num>t.goodsDetail.stock)t.$util.showToast({title:"库存小于最低购买数量"});else if(t.number>t.goodsDetail.stock)t.$util.showToast({title:"库存不足"});else if(1==t.goodsDetail.is_limit&&1==t.goodsDetail.limit_type&&t.maxBuy>0&&t.number>t.maxBuy)t.$util.showToast({title:"该商品每次最多购买"+t.maxBuy+t.goodsDetail.unit});else{if(1==t.goodsDetail.is_limit&&2==t.goodsDetail.limit_type&&t.maxBuy>0&&t.number+t.goodsDetail.purchased_num>t.maxBuy){var i="该商品每人限购"+t.maxBuy+t.goodsDetail.unit;return i+=t.goodsDetail.purchased_num>0?"，您已购买了"+t.goodsDetail.purchased_num+t.goodsDetail.unit:"",void t.$util.showToast({title:i})}if("join_cart"==t.type&&1==t.goodsDetail.is_limit&&t.maxBuy>0&&t.cartNumber+t.number>t.maxBuy)t.$util.showToast({title:"该商品每人限购"+t.maxBuy+t.goodsDetail.unit});else if(!t.btnSwitch)if(t.btnSwitch=!0,"join_cart"==t.type)t.$api.sendRequest({url:"/api/cart/add",data:{sku_id:t.skuId,num:t.number},success:function(i){var e=i.data;e>0&&(t.$util.showToast({title:"加入购物车成功"}),t.cartNumber+=t.number,t.callback&&t.callback()),t.$refs.skuPopup.close(),t.btnSwitch=!1},fail:function(i){t.$refs.skuPopup.close(),t.btnSwitch=!1}});else if("buy_now"==t.type){var e={sku_id:t.skuId,num:t.number};uni.setStorage({key:"orderCreateData",data:e,success:function(){t.$util.redirectTo("/pages/order/payment"),t.btnSwitch=!1}})}else if("seckill"==t.type){e={seckill_id:t.goodsDetail.seckill_id,num:t.number,sku_id:t.skuId};uni.setStorage({key:"seckillOrderCreateData",data:e,success:function(){t.$util.redirectTo("/pages_promotion/seckill/payment"),t.btnSwitch=!1}})}else if("pintuan"==t.type){e={pintuan_goods_id:t.goodsDetail.id,group_id:t.goodsDetail.group_id,num:t.number};uni.setStorage({key:"pintuanOrderCreateData",data:e,success:function(){t.$util.redirectTo("/pages_promotion/pintuan/payment"),t.btnSwitch=!1}})}else if("pinfan"==t.type){e={pintuan_goods_id:t.goodsDetail.id,group_id:t.goodsDetail.group_id,num:t.number};uni.setStorage({key:"pinfanOrderCreateData",data:e,success:function(){t.$util.redirectTo("/pages_promotion/pinfan/payment"),t.btnSwitch=!1}})}else if("topic"==t.type){e={topic_goods_id:t.goodsDetail.id,num:t.number};uni.setStorage({key:"topicOrderCreateData",data:e,success:function(){t.$util.redirectTo("/pages_promotion/topics/payment"),t.btnSwitch=!1}})}else if("groupbuy"==t.type){e={groupbuy_id:t.goodsDetail.groupbuy_id,sku_id:t.skuId,num:t.number};uni.setStorage({key:"groupbuyOrderCreateData",data:e,success:function(){t.$util.redirectTo("/pages_promotion/groupbuy/payment"),t.btnSwitch=!1}})}else if("presale"==t.type){e={presale_id:t.goodsDetail.presale_id,sku_id:t.skuId,num:t.number};uni.setStorage({key:"presaleOrderCreateData",data:e,success:function(){t.$util.redirectTo("/pages_promotion/presale/payment"),t.btnSwitch=!1}})}else if("bargain"==t.type)t.$api.sendRequest({url:"/bargain/api/bargain/launch",data:{id:t.goodsDetail.id},success:function(i){t.btnSwitch=!1,0==i.code?t.$util.redirectTo("/pages_promotion/bargain/launch",{id:i.data},"redirectTo"):t.$util.showToast({title:i.message})}});else if("point"==t.type){e={id:t.goodsDetail.exchange_id,sku_id:t.skuId,num:t.number};uni.setStorage({key:"exchangeOrderCreateData",data:e,success:function(){t.$util.redirectTo("/pages_promotion/point/payment"),t.btnSwitch=!1}})}else"bale"==t.type?t.confirmDisabled||(t.btnSwitch=!1,t.goodsSkuDetail?t.$emit("confirm",{detail:t.goodsSkuDetail,goods_id:t.goodsSkuDetail.goods_id,sku_id:t.skuId,num:t.number}):t.$emit("confirm",{detail:t.goodsDetail,goods_id:t.goodsDetail.goods_id,sku_id:t.goodsDetail.sku_id,num:t.number})):"confirm"==t.type&&(t.btnSwitch=!1,t.$refs.skuPopup.close(),t.callback&&t.callback(t.skuId,t.number))}else t.$util.showToast({title:"商品已售罄"})})):this.$refs.login.open()},closeSkuPopup:function(){this.$refs.skuPopup.close()},imageError:function(){this.goodsDetail.sku_image=this.$util.getDefaultImage().goods,this.$forceUpdate()},valueImageError:function(t,i){this.goodsDetail.goods_spec_format[t].value[i].image=this.$util.getDefaultImage().goods,this.$forceUpdate()},getCartData:function(){var t=this;this.$api.sendRequest({url:"/api/cart/goodsnum",data:{goods_id:this.goodsDetail.goods_id},success:function(i){i.code>=0&&(t.cartNumber=i.data)}})}}};i.default=n},"8f28":function(t,i,e){"use strict";e.r(i);var o=e("013c"),a=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=a.a},ac46:function(t,i,e){"use strict";e.r(i);var o=e("d3b22"),a=e("56b1");for(var s in a)"default"!==s&&function(t){e.d(i,t,(function(){return a[t]}))}(s);e("3275");var n,u=e("f0c5"),r=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,"47aef19a",null,!1,o["a"],n);i["default"]=r.exports},aea5:function(t,i,e){var o=e("2493");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=e("4f06").default;a("841af72e",o,!0,{sourceMap:!1,shadowMode:!1})},c9758:function(t,i,e){var o=e("24fb");i=o(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.sku-layer .sku-info[data-v-47aef19a]{max-height:75vh;height:45vh;position:relative;z-index:999}.sku-layer .sku-info .header[data-v-47aef19a]{padding:%?30?% %?30?% %?20?% %?210?%;position:relative;border-bottom:%?2?% solid #eee;min-height:%?170?%}.sku-layer .sku-info .header .img-wrap[data-v-47aef19a]{width:%?160?%;height:%?160?%;position:absolute;left:%?20?%;border-radius:%?10?%;overflow:hidden;padding:%?2?%;background-color:#fff;line-height:%?208?%}.sku-layer .sku-info .header .img-wrap uni-image[data-v-47aef19a]{width:100%;height:100%}.sku-layer .sku-info .main[data-v-47aef19a]{font-size:%?24?%;line-height:%?40?%;padding-right:%?40?%}.sku-layer .sku-info .main .price-wrap[data-v-47aef19a]{font-weight:700}.sku-layer .sku-info .main .price-wrap .unit[data-v-47aef19a]{margin-right:%?4?%}.sku-layer .sku-info .main .stock[data-v-47aef19a]{font-size:%?24?%;color:#909399;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;height:%?70?%;overflow:hidden}.sku-layer .sku-info .main .price[data-v-47aef19a]{word-wrap:break-word}.sku-layer .sku-info .main .sku-name[data-v-47aef19a]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;height:%?42?%}.sku-layer .sku-info .main .sku-name .spec-value[data-v-47aef19a]::after{content:"/"}.sku-layer .sku-info .main .sku-name .spec-value[data-v-47aef19a]:last-child::after{content:""}.sku-layer .sku-info .sku-close[data-v-47aef19a]{position:absolute;top:%?20?%;right:%?40?%;width:%?40?%;height:%?80?%;font-size:%?40?%}.sku-layer .body-item[data-v-47aef19a]{padding:0 %?30?%;height:calc(100% - %?360?%);box-sizing:border-box;overflow:scroll}.sku-layer .body-item .wrap[data-v-47aef19a]{height:calc(100% - %?60?%)}.sku-layer .body-item .sku-list-wrap[data-v-47aef19a]{padding-bottom:%?0?%}.sku-layer .body-item .sku-list-wrap .title[data-v-47aef19a]{padding:%?20?% 0;display:block}.sku-layer .body-item .sku-list-wrap .items[data-v-47aef19a]{position:relative;display:inline-block;border:%?2?% solid #eee;padding:%?4?% %?30?%;border-radius:%?8?%;margin:0 %?20?% %?20?% 0;background-color:#fff;font-size:%?24?%}.sku-layer .body-item .sku-list-wrap .items.disabled[data-v-47aef19a]{border:%?2?% dashed}.sku-layer .body-item .sku-list-wrap .items uni-image[data-v-47aef19a]{height:%?44?%;width:%?44?%;border-radius:%?10?%;margin-right:%?10?%;display:inline-block;vertical-align:middle}.sku-layer .body-item .number-wrap .number-line[data-v-47aef19a]{padding:%?20?% 0;line-height:%?72?%}.sku-layer .body-item .number-wrap .title[data-v-47aef19a]{font-weight:400}.sku-layer .body-item .number-wrap .number[data-v-47aef19a]{display:flex;height:%?72?%;border-radius:%?6?%;float:right}.sku-layer .body-item .number-wrap .number uni-button[data-v-47aef19a]{display:inline-block;line-height:%?64?%;height:%?68?%;width:%?60?%;font-size:%?48?%;box-sizing:initial;border:%?2?% solid #eee;padding:0;margin:0;border-radius:0;background-color:#fff!important}.sku-layer .body-item .number-wrap .number uni-button.disabled[data-v-47aef19a]{background:#f7f7f7!important}.sku-layer .body-item .number-wrap .number uni-button.decrease[data-v-47aef19a]{border-right-width:0!important}.sku-layer .body-item .number-wrap .number uni-button.increase[data-v-47aef19a]{border-left:0!important}.sku-layer .body-item .number-wrap .number uni-button[data-v-47aef19a]:after{border-radius:0;border:none}.sku-layer .body-item .number-wrap .number uni-input[data-v-47aef19a]{display:inline-block;line-height:%?64?%;height:%?68?%;width:%?72?%;text-align:center;font-weight:700;border:%?2?% solid;margin:0;padding:0;vertical-align:top;background-color:#f8f8f8!important}.sku-layer .footer[data-v-47aef19a]{height:%?100?%;width:100%;position:absolute;bottom:%?30?%;bottom:calc(%?30?% + constant(safe-area-inset-bottom));bottom:calc(%?30?% + env(safe-area-inset-bottom));color:#fff;z-index:1;display:flex;justify-content:center;align-items:flex-start}.sku-layer .footer uni-button[data-v-47aef19a]{width:100%;height:%?80?%;background-color:var(--goods-btn-color);font-weight:700}.presale-stock[data-v-47aef19a]{height:auto!important}.balance[data-v-47aef19a]{margin-left:%?10?%;display:inline-block;line-height:1.3;font-size:%?24?%}.balance uni-text[data-v-47aef19a]{font-weight:400}.balance .unit[data-v-47aef19a]{margin-right:0!important}',""]),t.exports=i},ce70:function(t,i,e){"use strict";var o=e("4ea4");e("c975"),e("13d5"),e("4d63"),e("ac1f"),e("25f0"),e("466d"),e("5319"),e("1276"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=o(e("ec6f")),s=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,n=/^<\/([-A-Za-z0-9_]+)[^>]*>/,u=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,r=m("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),l=m("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),d=m("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),c=m("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),p=m("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),g=m("script,style");function f(t,i){var e,o,a,f=[],m=t;f.last=function(){return this[this.length-1]};while(t){if(o=!0,f.last()&&g[f.last()])t=t.replace(new RegExp("([\\s\\S]*?)</"+f.last()+"[^>]*>"),(function(t,e){return e=e.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),i.chars&&i.chars(e),""})),b("",f.last());else if(0==t.indexOf("\x3c!--")?(e=t.indexOf("--\x3e"),e>=0&&(i.comment&&i.comment(t.substring(4,e)),t=t.substring(e+3),o=!1)):0==t.indexOf("</")?(a=t.match(n),a&&(t=t.substring(a[0].length),a[0].replace(n,b),o=!1)):0==t.indexOf("<")&&(a=t.match(s),a&&(t=t.substring(a[0].length),a[0].replace(s,_),o=!1)),o){e=t.indexOf("<");var h=e<0?t:t.substring(0,e);t=e<0?"":t.substring(e),i.chars&&i.chars(h)}if(t==m)throw"Parse Error: "+t;m=t}function _(t,e,o,a){if(e=e.toLowerCase(),l[e])while(f.last()&&d[f.last()])b("",f.last());if(c[e]&&f.last()==e&&b("",e),a=r[e]||!!a,a||f.push(e),i.start){var s=[];o.replace(u,(function(t,i){var e=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:p[i]?i:"";s.push({name:i,value:e,escaped:e.replace(/(^|[^\\])"/g,'$1\\"')})})),i.start&&i.start(e,s,a)}}function b(t,e){if(e){for(o=f.length-1;o>=0;o--)if(f[o]==e)break}else var o=0;if(o>=0){for(var a=f.length-1;a>=o;a--)i.end&&i.end(f[a]);f.length=o}}b()}function m(t){for(var i={},e=t.split(","),o=0;o<e.length;o++)i[e[o]]=!0;return i}function h(t){return t.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"")}function _(t){t=t.replace(/<!--[\s\S]*-->/gi,"");return t}function b(t){var i="100%",e='<img style="width:100% !important;display:block;max-width: '.concat(i,' !important;"');t=t.replace(/\\/g,"").replace(/<img/g,e);return t=t.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,(function(t,i){return e+' src="'+a.default.img(i)+'"/>'})),t}function k(t){t=t.replace(/style\s*=\s*["][^>]*;[^"]?/gi,(function(t,i){return t=t.replace(/[:](\s?)[\s\S]*/gi,(function(t,i){return t.replace(/"/g,"'")})),t}));return t}function v(t){return t.reduce((function(t,i){var e=i.value,o=i.name;return t[o]?t[o]=t[o]+" "+e:t[o]=e,t}),{})}function D(t){t=h(t),t=_(t),t=b(t),t=k(t);var i=[],e={node:"root",children:[]};return f(t,{start:function(t,o,a){var s={name:t};if(0!==o.length&&(s.attrs=v(o)),a){var n=i[0]||e;n.children||(n.children=[]),n.children.push(s)}else i.unshift(s)},end:function(t){var o=i.shift();if(o.name!==t&&console.error("invalid state: mismatch end tag"),0===i.length)e.children.push(o);else{var a=i[0];a.children||(a.children=[]),a.children.push(o)}},chars:function(t){var o={type:"text",text:t};if(0===i.length)e.children.push(o);else{var a=i[0];a.children||(a.children=[]),a.children.push(o)}},comment:function(t){var e={node:"comment",text:t},o=i[0];o.children||(o.children=[]),o.children.push(e)}}),e.children}var y=D;i.default=y},d3b22:function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return o}));var o={uniPopup:e("92aa").default,nsLogin:e("2893").default},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"goods-sku",on:{touchmove:function(i){i.preventDefault(),i.stopPropagation(),arguments[0]=i=t.$handleEvent(i)}}},[e("uni-popup",{ref:"skuPopup",staticClass:"sku-layer",attrs:{type:"bottom"}},[e("v-uni-view",{staticClass:"sku-info",style:{height:t.goodsDetail.goods_spec_format?48+9.5*t.goodsDetail.goods_spec_format.length+"vh":"48vh"}},[e("v-uni-view",{staticClass:"header"},["point"==t.type&&t.goodsDetail.type&&1!=t.goodsDetail.type?[2==t.goodsDetail.type?e("v-uni-view",{staticClass:"img-wrap"},[e("v-uni-image",{attrs:{src:t.goodsDetail.image?t.$util.img(t.goodsDetail.image):t.$util.img("public/uniapp/point/coupon.png"),mode:"aspectFit"}})],1):t._e(),3==t.goodsDetail.type?e("v-uni-view",{staticClass:"img-wrap"},[e("v-uni-image",{attrs:{src:t.goodsDetail.image?t.$util.img(t.goodsDetail.image):t.$util.img("public/uniapp/point/hongbao.png"),mode:"aspectFit"}})],1):t._e()]:e("v-uni-view",{staticClass:"img-wrap",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewMedia()}}},[e("v-uni-image",{attrs:{src:t.$util.img(t.goodsDetail.sku_image,{size:"mid"}),mode:"aspectFit"},on:{error:function(i){arguments[0]=i=t.$handleEvent(i),t.imageError()}}})],1),e("v-uni-view",{staticClass:"main"},["point"==t.type?[1==t.goodsDetail.type?[e("v-uni-view",{staticClass:"price-wrap"},[e("v-uni-text",{staticClass:"price price-color font-size-toolbar"},[t._v(t._s(t.goodsDetail.point)+"积分")]),"0.00"!=t.goodsDetail.exchange_price&&t.goodsDetail.pay_type>0?[e("v-uni-text",{staticClass:"unit price-color font-size-tag"},[t._v("+")]),e("v-uni-text",{staticClass:"price price-color font-size-toolbar price-font"},[t._v(t._s(t.$lang("common.currencySymbol"))+t._s(t.goodsDetail.exchange_price))])]:t._e()],2),t.goodsDetail.stock_show?e("v-uni-view",{staticClass:"stock"},[t._v("库存"+t._s(t.goodsDetail.stock)+t._s(t.goodsDetail.unit))]):t._e()]:[e("v-uni-view",{staticClass:"price-wrap"},[e("v-uni-view",{staticClass:"price font-size-toolbar"},[t._v(t._s(t.goodsDetail.name))])],1),e("v-uni-view",{staticClass:"stock",staticStyle:{height:"auto"}},[t._v("积分："),e("v-uni-text",{staticClass:"price-color"},[t._v(t._s(t.goodsDetail.point))])],1),e("v-uni-view",{staticClass:"stock"},[t._v("库存："),e("v-uni-text",{staticClass:"color-base-text"},[t._v(t._s(t.goodsDetail.stock)+t._s(t.goodsDetail.unit))])],1)]]:"presale"==t.type?[e("v-uni-view",{staticClass:"price-wrap"},[e("v-uni-text",{staticClass:"unit price-style small"},[t._v("￥")]),e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.presale_deposit).toFixed(2).split(".")[0]))]),e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.presale_deposit).toFixed(2).split(".")[1]))]),t.balance>0?e("v-uni-view",{staticClass:"balance"},[e("v-uni-text",[t._v("尾款")]),e("v-uni-text",{staticClass:"unit price-color font-size-tag price-font"},[t._v("￥")]),e("v-uni-text",{staticClass:"price-color price-font"},[t._v(t._s(t.balance))])],1):t._e()],1),e("v-uni-view",{staticClass:"stock presale-stock"},[t.goodsDetail.stock_show?[t._v("库存"+t._s(t.goodsDetail.stock)+t._s(t.goodsDetail.unit))]:t._e()],2)]:["pintuan"==t.type?e("v-uni-view",{staticClass:"price-wrap"},[e("v-uni-text",{staticClass:"unit price-style small"},[t._v("￥")]),e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.pintuan_price).toFixed(2).split(".")[0]))]),e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.pintuan_price).toFixed(2).split(".")[1]))])],1):"groupbuy"==t.type?e("v-uni-view",{staticClass:"price-wrap"},[e("v-uni-text",{staticClass:"unit price-style small"},[t._v("￥")]),e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.groupbuy_price).toFixed(2).split(".")[0]))]),e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.groupbuy_price).toFixed(2).split(".")[1]))])],1):"seckill"==t.type?e("v-uni-view",{staticClass:"price-wrap"},[e("v-uni-text",{staticClass:"unit price-style small"},[t._v("￥")]),e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.seckill_price).toFixed(2).split(".")[0]))]),e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.seckill_price).toFixed(2).split(".")[1]))])],1):e("v-uni-view",{staticClass:"price-wrap"},[e("v-uni-text",{staticClass:"unit price-style small"},[t._v("￥")]),t.goodsDetail.discount_price>0?[t.goodsDetail.member_price?[t.showPrice(t.goodsDetail.discount_price)<t.showPrice(t.goodsDetail.member_price)?e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.discount_price).toFixed(2).split(".")[0]))]):e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.member_price).toFixed(2).split(".")[0]))]),t.showPrice(t.goodsDetail.discount_price)<t.showPrice(t.goodsDetail.member_price)?e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.discount_price).toFixed(2).split(".")[1]))]):e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.member_price).toFixed(2).split(".")[1]))])]:[t.showPrice(t.goodsDetail.discount_price)<t.showPrice(t.goodsDetail.price)?e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.discount_price).toFixed(2).split(".")[0]))]):e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.price).toFixed(2).split(".")[0]))]),t.showPrice(t.goodsDetail.discount_price)<t.showPrice(t.goodsDetail.price)?e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.discount_price).toFixed(2).split(".")[1]))]):e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.price).toFixed(2).split(".")[1]))])]]:[t.goodsDetail.member_price?e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.member_price).toFixed(2).split(".")[0]))]):e("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.price).toFixed(2).split(".")[0]))]),t.goodsDetail.member_price?e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.member_price).toFixed(2).split(".")[1]))]):e("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.price).toFixed(2).split(".")[1]))])]],2),e("v-uni-view",{staticClass:"stock"},[t.goodsDetail.stock_show?[t._v("库存"+t._s(t.goodsDetail.stock)+t._s(t.goodsDetail.unit))]:t._e()],2)],t.goodsDetail.sku_spec_format?e("v-uni-view",{staticClass:"sku-name font-size-tag"},[e("v-uni-text",{staticClass:"color-tip"},[t._v("已选规格：")]),t._l(t.goodsDetail.sku_spec_format,(function(i,o){return e("v-uni-text",{key:o,staticClass:"spec-value"},[t._v(t._s(i.spec_value_name))])}))],2):t._e()],2),e("v-uni-view",{staticClass:"sku-close iconfont iconclose",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.closeSkuPopup()}}})],2),e("v-uni-view",{staticClass:"body-item"},[e("v-uni-scroll-view",{staticClass:"wrap",attrs:{"scroll-y":!0}},[t._l(t.goodsDetail.goods_spec_format,(function(i,o){return e("v-uni-view",{key:o,staticClass:"sku-list-wrap"},[e("v-uni-text",{staticClass:"title font-size-base"},[t._v(t._s(i.spec_name))]),t._l(i.value,(function(i,a){return e("v-uni-view",{key:a,staticClass:"items",class:{selected:i["selected"]||t.skuId==i.sku_id,disabled:i["disabled"]||!i["selected"]&&t.disabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.change(i.sku_id,i.spec_id)}}},[i.image?e("v-uni-image",{attrs:{src:t.$util.img(i.image,{size:"small"})},on:{error:function(i){arguments[0]=i=t.$handleEvent(i),t.valueImageError(o,a)}}}):t._e(),e("v-uni-text",[t._v(t._s(i.spec_value_name))])],1)}))],2)})),e("v-uni-view",{staticClass:"number-wrap"},[e("v-uni-view",{staticClass:"number-line"},["point"==t.type?e("v-uni-text",{staticClass:"title font-size-base"},[t._v("兑换数量")]):e("v-uni-text",{staticClass:"title font-size-base"},[t._v("购买数量")]),t.limitNumber>0?e("v-uni-text",{staticClass:"limit-txt color-base-text"},[t._v("(每人限购"+t._s(t.limitNumber)+t._s(t.goodsDetail.unit)+")")]):t._e(),t.maxBuy>0&&t.minBuy>1?e("v-uni-text",{staticClass:"limit-txt color-base-text"},[t._v("("+t._s(t.minBuy)+t._s(t.goodsDetail.unit)+"起售，限购"+t._s(t.maxBuy)+t._s(t.goodsDetail.unit)+")")]):t.maxBuy>0?e("v-uni-text",{staticClass:"limit-txt color-base-text"},[t._v("(限购"+t._s(t.maxBuy)+t._s(t.goodsDetail.unit)+")")]):t.minBuy>1?e("v-uni-text",{staticClass:"limit-txt color-base-text"},[t._v("("+t._s(t.minBuy)+t._s(t.goodsDetail.unit)+"起售)")]):t._e(),e("v-uni-view",{staticClass:"number"},[e("v-uni-button",{staticClass:"decrease color-line-border",class:{disabled:t.decreaseDisabled},attrs:{type:"default"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeNum("-")}}},[t._v("-")]),e("v-uni-input",{staticClass:"uni-input color-line-border font-size-goods-tag",attrs:{type:"number",placeholder:"0"},on:{blur:function(i){arguments[0]=i=t.$handleEvent(i),t.blur.apply(void 0,arguments)},input:function(i){arguments[0]=i=t.$handleEvent(i),t.keyInput(!1)}},model:{value:t.number,callback:function(i){t.number=i},expression:"number"}}),e("v-uni-button",{staticClass:"increase color-line-border",class:{disabled:t.increaseDisabled},attrs:{type:"default"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeNum("+")}}},[t._v("+")])],1)],1)],1)],2)],1),e("v-uni-view",{staticClass:"footer",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.confirm()}}},[t.goodsDetail.stock&&0!=t.goodsDetail.stock&&"join_cart"==t.type?e("v-uni-button",{attrs:{type:"primary"}},[t._v("加入购物车")]):t.goodsDetail.stock&&0!=t.goodsDetail.stock&&"buy_now"==t.type?e("v-uni-button",{attrs:{type:"primary"}},[t._v("立即购买")]):t.goodsDetail.stock&&0!=t.goodsDetail.stock&&"confirm"==t.type?e("v-uni-button",{attrs:{type:"primary"}},[t._v("确认")]):t.goodsDetail.stock&&0!=t.goodsDetail.stock?[t.goodsDetail.buy_num?[t.goodsDetail.buy_num<=t.goodsDetail.stock?e("v-uni-button",{attrs:{type:"primary"}},[t._v("立即抢购")]):e("v-uni-button",{attrs:{type:"primary",disabled:"true"}},[t._v("库存不足")])]:[e("v-uni-button",{attrs:{type:"primary"}},[t._v("立即抢购")])]]:e("v-uni-button",{attrs:{type:"primary",disabled:"true"}},[t._v("库存不足")])],2)],1)],1),e("ns-login",{ref:"login"})],1)},s=[]},dba3:function(t,i,e){"use strict";e.r(i);var o=e("f95a"),a=e("6ffd");for(var s in a)"default"!==s&&function(t){e.d(i,t,(function(){return a[t]}))}(s);e("4b3d");var n,u=e("f0c5"),r=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,"f6696a84",null,!1,o["a"],n);i["default"]=r.exports},f95a:function(t,i,e){"use strict";var o;e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return o}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.showPopup?e("v-uni-view",{staticClass:"uni-popup"},[e("v-uni-view",{staticClass:"uni-popup__mask",class:[t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.close(!0)}}}),t.isIphoneX?e("v-uni-view",{staticClass:"uni-popup__wrapper safe-area",class:[t.type,t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.close(!0)}}},[e("v-uni-view",{staticClass:"uni-popup__wrapper-box",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.clear.apply(void 0,arguments)}}},[t._t("default")],2)],1):e("v-uni-view",{staticClass:"uni-popup__wrapper",class:[t.type,t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.close(!0)}}},[e("v-uni-view",{staticClass:"uni-popup__wrapper-box",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.clear.apply(void 0,arguments)}}},[t._t("default")],2)],1)],1):t._e()},s=[]}}]);