(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherpages-chat-room-room"],{"0b10":function(e,t,i){"use strict";var o;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return o}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"message"},[e.goodsInfo.goods_name?i("v-uni-view",{staticClass:"goods-item"},[i("v-uni-image",{attrs:{src:e.$util.img(e.goodsInfo.sku_image),mode:"aspectFill"}}),i("v-uni-view",{staticClass:"goods-info"},[i("v-uni-view",{staticClass:"goods-name"},[e._v(e._s(e.goodsInfo.sku_name?e.goodsInfo.sku_name:e.goodsInfo.goods_name))]),i("v-uni-view",{staticClass:"goods-bottom"},[i("v-uni-view",{staticClass:"goods-price"},[i("v-uni-text",{staticClass:"goods-price-sign color-base-text"},[e._v("￥")]),i("v-uni-text",{staticClass:"color-base-text"},[e._v(e._s(e.goodsInfo.price))])],1),e.isCanSend?i("v-uni-view",{staticClass:"goods-option font-size-goods-tag color-base-bg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMsg("goods")}}},[e._v("发送")]):i("v-uni-view",{staticClass:"goods-option font-size-goods-tag disabled"},[e._v("已发送")])],1)],1)],1):e._e()],1)},s=[]},"0f42":function(e,t,i){var o=i("1465");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=i("4f06").default;n("5e310701",o,!0,{sourceMap:!1,shadowMode:!1})},1284:function(e,t,i){"use strict";var o=i("bdbf"),n=i.n(o);n.a},1465:function(e,t,i){var o=i("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.message[data-v-82735ee6]{padding:%?13?% %?20?%;-webkit-box-sizing:border-box;box-sizing:border-box;width:100vw;position:relative}.message .goods-item[data-v-82735ee6]{width:100%;height:%?220?%;background:#fff;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-border-radius:%?20?%;border-radius:%?20?%;margin:0 auto;padding:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.message .goods-item uni-image[data-v-82735ee6]{width:%?180?%;height:%?180?%;min-width:%?180?%}.message .goods-item .goods-info[data-v-82735ee6]{width:100%;height:%?180?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-left:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.message .goods-item .goods-info .goods-name[data-v-82735ee6]{width:100%;line-height:1.4;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.message .goods-item .goods-info .goods-bottom[data-v-82735ee6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.message .goods-item .goods-info .goods-bottom uni-text[data-v-82735ee6]{line-height:1}.message .goods-item .goods-info .goods-bottom .goods-price[data-v-82735ee6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;padding-bottom:%?10?%;font-weight:500}.message .goods-item .goods-info .goods-bottom .goods-price .goods-price-sign[data-v-82735ee6]{font-size:%?20?%}.message .goods-item .goods-info .goods-bottom .goods-option[data-v-82735ee6]{width:%?150?%;height:%?50?%;line-height:%?50?%;text-align:center;-webkit-border-radius:%?50?%;border-radius:%?50?%;color:#fff}.message .goods-item .disabled[data-v-82735ee6]{background:#e5e5e5}',""]),e.exports=t},"1ebb":function(e,t,i){"use strict";(function(e){var o=i("4ea4");i("a434"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(i("f27e")),s={data:function(){return{timeoutObj:null,servicer_id:null,pingInterval:n.default.pingInterval}},onLoad:function(){uni.onSocketClose((function(t){e.log("WebSocket 已关闭！")}))},methods:{checkOpenSocket:function(){e.log("判断是否已连接");var t=this;uni.sendSocketMessage({data:"ping",success:function(t){e.log("连接成功,检查")},fail:function(i){e.log("连接失败"),t.openConnection()}})},openConnection:function(){e.log("打开连接"),uni.closeSocket(),uni.connectSocket({url:n.default.webSocket,method:"POST",success:function(t){e.log("连接成功 connectSocket=",t)},fail:function(t){e.log("连接失败 connectSocket=",t)}}),uni.onSocketOpen((function(t){e.log("连接成功",t)})),this.onSocketMessage()},onSocketMessage:function(){var t=this;e.log("开始监听");var i=this;this.pingInterval=n.default.pingInterval,this.timeoutObj=null,uni.onSocketMessage((function(o){var n=JSON.parse(o.data);if(e.log("监听该服务器消息",o),"close"==n.type)return clearInterval(i.timeoutObj),i.timeoutObj=null,void uni.closeSocket();t.reset(),t.getSocketMsg(o.data)}))},getSocketMsg:function(e){var t=this,i=this,o=JSON.parse(e),n={isItMe:!1};if(n.contentType=o.type,"init"==o.type)i.$api.sendRequest({url:"/servicer/api/chat/bind",data:{client_id:o.data.client_id,site_id:i.siteId},success:function(e){0==e.code?i.servicer_id=e.data.servicer_id:i.servicer_id=0,i.getChatList()}});else if("connect"==o.type){i.servicer_id=o.data.servicer_id;for(var s=i.messageList,a=null,r=0;r<s.length;r++)"online"!=s[r].contentType&&"noline"!=s[r].contentType||(a=r);s.splice(a,1),i.messageList=s;var d={};i.servicer_id>0?d.contentType="online":0==i.servicer_id&&(d.contentType="noline"),i.messageList.push(d)}else"string"==o.type?n.content=o.data.servicer_say:"image"==o.type?n.image=o.data.servicer_say:"order"==o.type?n.order_id=o.data.order_id:"goodssku"==o.type&&(n.sku_id=o.data.goods_sku_id);"init"!=o.type&&(i.messageList.push(n),this.$nextTick((function(){t.setPageScrollTo()})))},reset:function(){e.log("检测心跳"),clearInterval(this.timeoutObj),this.start()},start:function(){e.log("启动心跳");var t=this;this.timeoutObj=setInterval((function(){uni.sendSocketMessage({data:"ping",success:function(t){e.log("连接中....")},fail:function(i){e.log("连接失败重新连接...."),t.openConnection()}})}),this.pingInterval)}},onHide:function(){clearInterval(this.timeoutObj),this.timeoutObj=null,this.$api.sendRequest({url:"/servicer/api/chat/bye",data:{servicer_id:this.servicer_id,site_id:this.siteId},success:function(e){uni.closeSocket()},fail:function(e){uni.closeSocket()}})},onUnload:function(){clearInterval(this.timeoutObj),this.timeoutObj=null,this.$api.sendRequest({url:"/servicer/api/chat/bye",data:{servicer_id:this.servicer_id,site_id:this.siteId},success:function(e){uni.closeSocket()},fail:function(e){uni.closeSocket()}})}};t.default=s}).call(this,i("5a52")["default"])},2611:function(e,t,i){var o=i("8c82");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=i("4f06").default;n("f6384fd8",o,!0,{sourceMap:!1,shadowMode:!1})},"270b":function(e,t,i){"use strict";var o;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return o}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"message"},[e.orderInfo.order_goods?i("v-uni-view",{staticClass:"goods-item"},[i("v-uni-image",{attrs:{src:e.$util.img(e.orderInfo.order_goods?e.orderInfo.order_goods[0].sku_image:""),mode:"aspectFill"}}),i("v-uni-view",{staticClass:"goods-info"},[i("v-uni-view",{staticClass:"goods-name"},[e._v(e._s(e.orderInfo.order_goods?e.orderInfo.order_goods[0].sku_name:""))]),i("v-uni-view",{staticClass:"font-size-goods-tag"},[e._v("订单状态:"+e._s(e.orderInfo.order_status_name))]),i("v-uni-view",{staticClass:"font-size-goods-tag"},[e._v("配送方式:"+e._s(e.orderInfo.delivery_type_name))]),i("v-uni-view",{staticClass:"goods-bottom"},[i("v-uni-view",{staticClass:"goods-price color-base-text"},[i("v-uni-text",{staticClass:"goods-price-sign"},[e._v("￥")]),i("v-uni-text",{},[e._v(e._s(e.orderInfo.order_goods?e.orderInfo.order_goods[0].price:""))])],1),e.isCanSend?i("v-uni-view",{staticClass:"goods-option font-size-goods-tag color-base-bg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMsg("order")}}},[e._v("发送")]):i("v-uni-view",{staticClass:"goods-option font-size-goods-tag disabled"},[e._v("已发送")])],1)],1)],1):e._e()],1)},s=[]},"283b":function(e,t,i){"use strict";i.r(t);var o=i("270b"),n=i("3d34");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("c1f0");var a,r=i("f0c5"),d=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"35c68a7b",null,!1,o["a"],a);t["default"]=d.exports},"350f":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return o}));var o={uniPopup:i("92aa").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"chat-message",attrs:{"data-theme":e.themeStyle}},["sendGood"==e.message.contentType?[i("ns-chat-goods",{attrs:{isCanSend:e.send,skuId:e.message.sku_id},on:{sendMsg:function(t){arguments[0]=t=e.$handleEvent(t),e.sendGood.apply(void 0,arguments)}}})]:e._e(),"sendOrder"==e.message.contentType?[i("ns-chat-order",{attrs:{isCanSend:e.send,orderId:e.message.order_id},on:{sendMsg:function(t){arguments[0]=t=e.$handleEvent(t),e.sendOrder.apply(void 0,arguments)}}})]:e._e(),"string"==e.message.contentType?i("v-uni-view",{staticClass:"message"},[i("v-uni-view",{staticClass:"message-item ",class:e.message.isItMe?"right":"left"},[e.message.isItMe?[i("v-uni-view",{staticClass:"head_img"},[e.myHeadImg?i("v-uni-image",{staticClass:"img",attrs:{src:e.myHeadImg,mode:"aspectFill"},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.myHeadImg=e.defaultHead}}}):i("v-uni-image",{staticClass:"img",attrs:{src:e.defaultHead,mode:"aspectFill"}})],1)]:[i("v-uni-view",{staticClass:"head_img"},[e.avatar?i("v-uni-image",{staticClass:"img",attrs:{src:e.avatar,mode:"aspectFill"},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.avatar=e.defaultAvatar}}}):i("v-uni-image",{staticClass:"img",attrs:{src:e.defaultAvatar,mode:"aspectFill"}})],1)],i("v-uni-view",{staticClass:"chat_text"},[e.message.isItMe&&!e.message.sendStatus?i("v-uni-text",{staticClass:"iconfont iconwarn margin-right"}):e._e(),i("v-uni-view",{staticClass:"content"},[i("v-uni-rich-text",{attrs:{nodes:e.stringToEmjoy(e.message.content)}})],1)],1)],2)],1):e._e(),"image"==e.message.contentType?i("v-uni-view",{staticClass:"message"},[i("v-uni-view",{staticClass:"message-item ",class:e.message.isItMe?"right":"left"},[e.message.isItMe?[i("v-uni-view",{staticClass:"head_img"},[e.myHeadImg?i("v-uni-image",{staticClass:"img",attrs:{src:e.myHeadImg,mode:"aspectFill"},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.myHeadImg=e.defaultHead}}}):i("v-uni-image",{staticClass:"img",attrs:{src:e.defaultHead,mode:"aspectFill"}})],1)]:[i("v-uni-view",{staticClass:"head_img"},[e.avatar?i("v-uni-image",{staticClass:"img",attrs:{src:e.avatar,mode:"aspectFill"},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.avatar=e.defaultAvatar}}}):i("v-uni-image",{staticClass:"img",attrs:{src:e.defaultAvatar,mode:"aspectFill"}})],1)],i("v-uni-view",{staticClass:"chat_img"},[e.message.isItMe&&!e.message.sendStatus?i("v-uni-text",{staticClass:"iconfont iconwarn margin-right color-base-text"}):e._e(),i("v-uni-view",{staticClass:"content_img",style:{backgroundImage:"url("+e.$util.img(e.message.image)+")",backgroundPosition:e.message.isItMe?"center right":"center left"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewMedia(e.$util.img(e.message.image))}}})],1)],2)],1):"goods"==e.message.contentType?i("v-uni-view",[i("ns-chat-goods",{attrs:{isCanSend:!1,skuId:e.message.sku_id}})],1):"order"==e.message.contentType?i("v-uni-view",[i("ns-chat-order",{attrs:{isCanSend:!1,orderId:e.message.order_id}})],1):e._e(),"noline"==e.message.contentType?i("v-uni-view",{staticClass:"no-connect-box"},[i("v-uni-view",{staticClass:"no-connect"},[e._v("客服不在线")])],1):e._e(),"online"==e.message.contentType?i("v-uni-view",{staticClass:"no-connect-box"},[i("v-uni-view",{staticClass:"no-connect"},[e._v("客服在线")])],1):e._e(),i("uni-popup",{ref:"imgPopup",attrs:{type:"center"}},[i("v-uni-view",{staticClass:"imagePop"},[i("v-uni-image",{attrs:{src:e.$util.img(e.currImg),mode:"aspectFit"}})],1)],1)],2)},s=[]},3703:function(e,t,i){"use strict";i.r(t);var o=i("0b10"),n=i("f985");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("be68");var a,r=i("f0c5"),d=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"82735ee6",null,!1,o["a"],a);t["default"]=d.exports},"39d7":function(e,t,i){var o=i("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.message[data-v-35c68a7b]{padding:%?13?% %?20?%;-webkit-box-sizing:border-box;box-sizing:border-box;width:100vw;position:relative}.message .goods-item[data-v-35c68a7b]{width:100%;height:%?220?%;background:#fff;position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-border-radius:%?20?%;border-radius:%?20?%;margin:0 auto;padding:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.message .goods-item uni-image[data-v-35c68a7b]{width:%?180?%;height:%?180?%}.message .goods-item .goods-info[data-v-35c68a7b]{width:100%;height:%?180?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-left:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.message .goods-item .goods-info .goods-name[data-v-35c68a7b]{width:100%;line-height:1.4;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;overflow:hidden;margin-bottom:%?10?%}.message .goods-item .goods-info .goods-bottom[data-v-35c68a7b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.message .goods-item .goods-info .goods-bottom uni-text[data-v-35c68a7b]{line-height:1}.message .goods-item .goods-info .goods-bottom .goods-price[data-v-35c68a7b]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;padding-bottom:%?10?%;font-weight:500}.message .goods-item .goods-info .goods-bottom .goods-price .goods-price-sign[data-v-35c68a7b]{font-size:%?20?%}.message .goods-item .goods-info .goods-bottom .goods-option[data-v-35c68a7b]{width:%?150?%;height:%?50?%;line-height:%?50?%;text-align:center;-webkit-border-radius:%?50?%;border-radius:%?50?%;color:#fff}.message .goods-item .disabled[data-v-35c68a7b]{background:#e5e5e5}',""]),e.exports=t},"3d34":function(e,t,i){"use strict";i.r(t);var o=i("9ee1"),n=i.n(o);for(var s in o)"default"!==s&&function(e){i.d(t,e,(function(){return o[e]}))}(s);t["default"]=n.a},5471:function(e,t,i){"use strict";var o=i("4ea4");i("99af"),i("fb6a"),i("a434"),i("ac1f"),i("498a"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var n=o(i("1da1")),s=o(i("1ebb")),a=o(i("f1d0")),r=o(i("ef59")),d=o(i("c409")),c={components:{chatMessage:a.default},data:function(){return{emjoyList:r.default.emjoyList,emjoyShow:!1,chatMore:!1,formData:{content:"",goods_id:0,order_id:0,image:""},isNetWork:!1,send:!1,messageList:[],page:1,isAll:!1,isLoading:0,showLoading:!1,jumpBottom:null,scrollTop:0,scrollPosition:0,siteId:0,skuId:0,orderId:0,siteName:"",shopInfo:{},userInfo:{},style:{},focus:!0,inputFirst:0,inputShow:!1,inputOffsetBottom:0,mescroll:null}},mixins:[s.default,d.default],computed:{chatBottom:function(){return this.emjoyShow||this.chatMore}},onLoad:function(e){var t=this;if(!this.addonIsExit.live)return this.$util.showToast({title:"商家未开启小程序直播",mask:!0,duration:2e3}),void setTimeout((function(){t.$util.redirectTo("/pages/index/index/index",{},"redirectTo")}),2e3);uni.getStorageSync("token")?(this.getUserInfo(),this.getShopInfo(),this.skuId=e.skuId?e.skuId:0,this.orderId=e.orderId?e.orderId:0,(this.skuId||this.orderId)&&(this.send=!0)):this.$util.redirectTo("/pages/login/login/login")},onShow:function(){this.inputFirst=0,this.inputShow=!1,this.inputOffsetBottom=0},onReady:function(){var e=this;uni.onKeyboardHeightChange((function(t){e.inputOffsetBottom=t.height,0===t.height&&(e.focus=!1)}))},methods:{mescrollInit:function(e){this.mescroll=e,this.checkOpenSocket()},downCallback:function(){this.getChatList()},onPullDownRefresh:function(){this.getChatList(),setTimeout((function(){uni.stopPullDownRefresh()}),1e3)},isAndroid:function(){var e=uni.getSystemInfoSync().platform;return"ios"!=e&&("android"==e||void 0)},openChatMore:function(){var e=this;this.isAndroid&&(this.inputShow=!1,this.inputFirst=1),this.chatMore=!this.chatMore,this.emjoyShow=!1,this.$nextTick((function(){e.setPageScrollTo()}))},getShopInfo:function(){var e=this;0==this.siteId?(this.siteName="平台客服",this.$langConfig.title(this.siteName)):this.$api.sendRequest({url:"/api/site/info",success:function(t){0==t.code&&(e.shopInfo=t.data,e.siteName=t.data.site_name,e.$langConfig.title(e.siteName))}})},getUserInfo:function(){var e=this;this.$api.sendRequest({url:"/api/member/info",success:function(t){0==t.code&&(e.userInfo=t.data)}})},getChatList:function(){var e=this,t=this;this.isAll?t.mescroll.endSuccess():this.isLoading||(this.isLoading=!0,1==this.page&&(this.messageList=[]),this.$api.sendRequest({url:"/servicer/api/chat/dialogs",data:{servicer_id:this.servicer_id,page:this.page,limit:5,site_id:t.siteId},success:function(e){if(t.page+=1,e.code>=0&&e.data){e.data.list&&e.data.list.length<5&&(t.isAll=!0);var i=0;this.messageList&&(i=this.messageList.slice(-1).id+1);var o=[];if(2==t.page){if(t.skuId){var n={id:i,isItMe:!0,contentType:"sendGood",sku_id:t.skuId};o.push(n),i+=1}if(t.orderId){var s={id:i,isItMe:!0,contentType:"sendOrder",order_id:t.orderId};o.push(s),i+=1}}var a=e.data.list;if(a.length)for(var r=0;r<a.length;r++){var d={};0==a[r].content_type?(d.id=i,d.content=0==a[r].type?a[r].consumer_say:a[r].servicer_say,d.isItMe=0==a[r].type,d.contentType="string",d.sendStatus=!0):1==a[r].content_type?(d.id=i,d.isItMe=0==a[r].type,d.contentType="goods",d.sku_id=a[r].goods_sku_id,d.send=!1,d.sendStatus=!0):2==a[r].content_type?(d.id=i,d.isItMe=0==a[r].type,d.contentType="order",d.order_id=a[r].order_id,d.send=!1,d.sendStatus=!0):3==a[r].content_type&&(d.id=i,d.isItMe=0==a[r].type,d.contentType="image",d.id=i,d.image=0==a[r].type?a[r].consumer_say:a[r].servicer_say,d.sendStatus=!0),o.push(d),i+=1}if(2==t.page){var c={};c.id=i,t.servicer_id>0?c.contentType="online":0==t.servicer_id&&(c.contentType="noline"),o.push(c),i+=1}t.isLoading=!1,o.length&&(t.messageList=o.concat(t.messageList),t.$nextTick((function(){if(2==t.page)t.setPageScrollTo();else{var e="#chat"+o.length;t.setPageScrollTo(e)}})))}else this.isLoading=!1,this.$util.showToast({title:e.message});t.mescroll.endSuccess()},fail:function(){e.mescroll.endErr()}}))},setPageScrollTo:function(e){if(e){var t=uni.createSelectorQuery().in(this).select(e);t.boundingClientRect((function(e){return!1})).exec()}else{var i=uni.createSelectorQuery().in(this);i.select(".room-content-box").boundingClientRect((function(e){uni.pageScrollTo({scrollTop:e.height-30,duration:0})})).exec()}},sendGood:function(e,t){this.sendMsg("goods"),this.messageList.splice(t,1,1)},sendOrder:function(e,t){this.sendMsg("order"),this.messageList.splice(t,1,1)},sendMsg:function(e){if(!this.isNetWork){this.isNetWork=!0;var t=this;if("goods"==e)this.$api.sendRequest({url:"/servicer/api/chat/say",data:{goods_id:this.skuId,servicer_id:this.servicer_id,content_type:1,site_id:this.siteId},success:function(e){t.send=!1,t.joinData("send","goods")},complete:function(){t.isNetWork=!1,uni.hideKeyboard()}});else if("order"==e)this.$api.sendRequest({url:"/servicer/api/chat/say",data:{order_id:this.orderId,servicer_id:this.servicer_id,site_id:this.siteId,content_type:2},success:function(e){t.send=!1,t.joinData("send","order")},complete:function(){t.isNetWork=!1,uni.hideKeyboard()}});else if("image"==e)t.joinData("send","image"),this.$api.sendRequest({url:"/servicer/api/chat/say",data:{message:this.formData.image.trim(),servicer_id:this.servicer_id,site_id:this.siteId,content_type:3},success:function(e){t.formData.content=""},error:function(){t.messageList[t.messageList.length-1].sendStatus=!1,t.formData.content=""},complete:function(){t.isNetWork=!1,uni.hideKeyboard()}});else{if(!this.formData.content.trim())return t.$util.showToast({title:"发送内容不能为空"}),void(t.isNetWork=!1);t.joinData("send","string"),t.$api.sendRequest({url:"/servicer/api/chat/say",data:{message:t.formData.content.trim(),servicer_id:t.servicer_id,content_type:0},success:function(e){t.formData.content=""},error:function(){t.messageList[t.messageList.length-1].sendStatus=!1,t.formData.content=""},complete:function(){t.isNetWork=!1,uni.hideKeyboard()}})}}},joinData:function(e,t){var i=this;return(0,n.default)(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:"send"==e&&(n={isItMe:!0,contentType:t,sendStatus:!0},"string"==t?n.content=i.formData.content:"order"==t?n.order_id=i.orderId:"goods"==t?n.sku_id=i.skuId:"image"==t&&(n.image=i.formData.image),i.messageList.push(n),i.$nextTick((function(){i.setPageScrollTo()})));case 1:case"end":return o.stop()}}),o)})))()},hideLoadTips:function(e){var t=this;e?(this.ajax.loadText="消息获取成功",setTimeout((function(){t.ajax.loading=!1}),300)):(this.ajax.loading=!0,this.ajax.loadText="正在获取消息")},onPageScroll:function(e){e.scrollTop<5&&e.scrollTop>=0&&this.getChatList()},inputFocus:function(e){var t=this;this.isAndroid()&&this.inputFirst&&(this.inputShow=!0),this.emjoyShow=!1,this.chatMore=!1,this.$nextTick((function(){t.setPageScrollTo()}))},closePopWindow:function(){this.inputFirst=0,this.emjoyShow=!1,this.chatMore=!1,this.inputShow=!1,uni.hideKeyboard()},openEmjoy:function(){var e=this;this.isAndroid()&&(this.inputFirst=1,this.inputShow=!1),uni.hideKeyboard(),this.chatMore=!1,this.emjoyShow=!this.emjoyShow,this.$nextTick((function(){e.setPageScrollTo()}))},addEmjoy:function(e,t){this.formData.content=this.formData.content+t},addImg:function(){var e=this;this.$util.upload(1,{path:"chatimg"},(function(t){e.formData.image=t[0],e.sendMsg("image")}),"/servicer/api/chat/chatimg")}},beforeDestroy:function(){clearInterval(this.timeoutObj),this.timeoutObj=null,this.$api.sendRequest({url:"/servicer/api/chat/bye",data:{servicer_id:this.servicer_id,site_id:this.siteId},success:function(e){uni.closeSocket()}})}};t.default=c},"5d51":function(e,t,i){var o=i("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.more_send[data-v-9f8d3d30]{display:-webkit-box;display:-webkit-flex;display:flex;border-top:%?2?% solid #e5e5e5;height:%?390?%;-webkit-flex-wrap:wrap;flex-wrap:wrap}.more_send > uni-view[data-v-9f8d3d30]{padding-top:%?16?%;width:25%;height:%?156?%;text-align:center}.more_send > uni-view .iconfont[data-v-9f8d3d30]{display:inline;font-size:%?60?%;color:#333;background-color:#fff;-webkit-border-radius:%?20?%;border-radius:%?20?%;padding:%?20?%}.more_send > uni-view > uni-view[data-v-9f8d3d30]{color:#909399;font-size:%?22?%}.chat_send[data-v-9f8d3d30]{display:-webkit-box;display:-webkit-flex;display:flex;height:45px;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;position:relative}.chat_send .send[data-v-9f8d3d30]{position:absolute;right:%?30?%;bottom:%?30?%;color:#fff;-webkit-align-self:flex-end;align-self:flex-end;font-size:%?28?%;padding:%?10?% %?20?%;-webkit-border-radius:%?8?%;border-radius:%?8?%}.chat_send .emjoy_list[data-v-9f8d3d30]{-webkit-box-flex:1;-webkit-flex:1;flex:1}\r\n/* 加载数据提示 */.tips[data-v-9f8d3d30]{position:fixed;left:0;top:var(--window-top);width:100%;z-index:9;background-color:transparent;height:%?72?%;line-height:%?72?%;-webkit-transform:translateY(%?-80?%);transform:translateY(%?-80?%);-webkit-transition:-webkit-transform .3s ease-in-out 0s;transition:-webkit-transform .3s ease-in-out 0s;transition:transform .3s ease-in-out 0s;transition:transform .3s ease-in-out 0s,-webkit-transform .3s ease-in-out 0s;font-size:%?24?%;text-align:center;line-height:%?72?%}.tips.show[data-v-9f8d3d30]{-webkit-transform:translateY(0);transform:translateY(0)}.room[data-v-9f8d3d30]{width:100%;min-height:calc(100vh - 24px);padding-bottom:calc(%?110?% + 44px);padding-bottom:calc(%?110?% + 44px + constant(safe-area-inset-bottom));padding-bottom:calc(%?110?% + 44px + env(safe-area-inset-bottom));-webkit-box-sizing:border-box;box-sizing:border-box}.room .room-content-box[data-v-9f8d3d30]{width:100%;min-height:calc(100% + 10px);padding-top:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.paddingbottom[data-v-9f8d3d30]{height:calc(%?470?% + 44px)}.emjoy-box[data-v-9f8d3d30]{width:100%;height:%?300?%;padding:%?20?% %?25?%;-webkit-box-sizing:border-box;box-sizing:border-box;background:#f4f4f4;border-top:%?1?% solid #e5e5e5}.emjoy-box .emjoy-content[data-v-9f8d3d30]{width:100%;height:100%}.emjoy-box .emjoy-content .emjoy-item[data-v-9f8d3d30]{display:inline-block;width:%?100?%;height:%?70?%;text-align:center;line-height:%?70?%}.emjoy-box .emjoy-content .emjoy-item uni-image[data-v-9f8d3d30]{display:inline-block;width:%?40?%;height:%?40?%}.input-content[data-v-9f8d3d30]{background:#f4f4f4;width:100%;min-height:%?110?%;position:fixed;left:0;bottom:0;padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.input-content .input-box[data-v-9f8d3d30]{width:100%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.input-content .input-box .iconfont[data-v-9f8d3d30]{line-height:1;font-size:%?52?%;padding:%?15?%}.input-content .input-box .iconfont.send_btn[data-v-9f8d3d30]{font-size:%?24?%;min-width:%?60?%;text-align:center;background-color:#e8e8e8;color:#fff;-webkit-border-radius:%?8?%;border-radius:%?8?%;height:%?32?%;line-height:%?32?%}.input-content .input-box uni-input[data-v-9f8d3d30]{margin-left:%?20?%;margin-right:%?20?%;width:%?630?%;height:100%;height:%?72?%;padding:0 %?20?%;font-size:%?24?%;background-color:#fff;-webkit-border-radius:%?8?%;border-radius:%?8?%}',""]),e.exports=t},6879:function(e,t,i){"use strict";var o=i("4ea4");i("4160"),i("4d63"),i("ac1f"),i("25f0"),i("5319"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(i("c409")),s=o(i("3703")),a=o(i("283b")),r=o(i("ce70")),d=o(i("92aa")),c=o(i("ef59")),l={name:"diy-pintuan",props:{message:{type:Object},shopInfo:{type:Object},userInfo:{type:Object},send:{type:Boolean}},data:function(){return{avatar:"",defaultAvatar:this.$util.getDefaultImage().default_shop_img,myHeadImg:"",defaultHead:this.$util.getDefaultImage().default_headimg,emjoyList:c.default.emjoyList,currImg:""}},components:{nsChatGoods:s.default,nsChatOrder:a.default,uniPopup:d.default},mixins:[n.default],mounted:function(){this.avatar=this.$util.img(this.shopInfo.logo),this.myHeadImg=this.$util.img(this.userInfo.headimg)},methods:{previewMedia:function(e){var t=[e];uni.previewImage({current:0,urls:t})},sendGood:function(){this.$emit("sendGood","goods")},sendOrder:function(){this.$emit("sendOrder","order")},stringToEmjoy:function(e){var t=this;if(e){var i=e,o=new RegExp("\\[emjoy_(.+?)\\]","g"),n=i.replace(o,(function(e){var i="";for(var o in t.emjoyList)if(e==o){i="<img class='message-img' src='"+t.emjoyList[o]+"'/>";break}return i||e})),s=(0,r.default)(n);return s.forEach((function(e){"img"==e.name&&(e.attrs.style="display: inline-block;width: 18px !important;height: 18px !important;padding:0 1px;")})),s}}}};t.default=l},"6a6c":function(e,t,i){"use strict";i("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"ns-chat-goods",props:{skuId:{type:[Number,String]},isCanSend:Boolean},data:function(){return{goodsInfo:{}}},mounted:function(){this.getGoodsInfo()},methods:{getGoodsInfo:function(){var e=this;this.$api.sendRequest({url:"/api/goodssku/detail",data:{sku_id:this.skuId},success:function(t){t.code>=0&&(e.goodsInfo=t.data.goods_sku_detail)}})},sendMsg:function(){this.$emit("sendMsg","goods")}}};t.default=o},"6ef7":function(e,t,i){"use strict";i.r(t);var o=i("de11"),n=i("b26c");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("1284");var a,r=i("f0c5"),d=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"9f8d3d30",null,!1,o["a"],a);t["default"]=d.exports},"8c1f":function(e,t,i){"use strict";i.r(t);var o=i("6879"),n=i.n(o);for(var s in o)"default"!==s&&function(e){i.d(t,e,(function(){return o[e]}))}(s);t["default"]=n.a},"8c82":function(e,t,i){var o=i("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */[data-v-70a6010e] .uni-popup__wrapper.uni-custom .uni-popup__wrapper-box{background-color:#000}[data-v-70a6010e] .uni-popup__wrapper.uni-custom.center .uni-popup__wrapper-box{max-width:100%;width:100%}.imagePop[data-v-70a6010e]{height:50vh;width:100vw;text-align:center}.imagePop uni-image[data-v-70a6010e]{width:100%;height:100%}.chat-message[data-v-70a6010e]{width:100%;height:100%}.chat-message .message[data-v-70a6010e]{padding:%?13?% %?30?%;position:relative}.chat-message .left .content[data-v-70a6010e]{padding:%?20?%;max-width:%?450?%;-webkit-border-radius:%?10?%;border-radius:%?10?%;font-size:%?30?%}.chat-message .right .content[data-v-70a6010e]{padding:%?20?%;max-width:%?450?%;-webkit-border-radius:%?10?%;border-radius:%?10?%;font-size:%?30?%}.chat-message .content_img[data-v-70a6010e]{height:%?200?%;width:100%;overflow:hidden;text-align:right;margin-left:%?28?%;background-repeat:no-repeat;background-size:contain}.chat-message .content_img uni-image[data-v-70a6010e]{min-height:%?80?%;min-width:%?80?%;height:100%;width:100%}.chat-message .right .content_img[data-v-70a6010e]{margin-right:%?28?%;margin-left:0}.chat-message .message-item[data-v-70a6010e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;-webkit-align-content:flex-start;align-content:flex-start;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.chat-message .message-item .head_img[data-v-70a6010e]{width:%?80?%;height:%?80?%;-webkit-border-radius:50%;border-radius:50%;overflow:hidden;position:relative}.chat-message .message-item .head_img .img[data-v-70a6010e]{width:100%;height:100%}.chat-message .message-item .contentType3[data-v-70a6010e]{padding:0;-webkit-border-radius:%?2?%;border-radius:%?2?%;background-color:transparent!important}.chat-message .message-item .contentType3 .img[data-v-70a6010e]{width:%?200?%;height:auto;max-width:%?300?%;max-height:%?400?%}.chat-message .message-item .contentType3[data-v-70a6010e]::after{border:none!important;display:none!important}.chat-message .message-item .content-type-right[data-v-70a6010e]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.chat-message .message-item.right[data-v-70a6010e]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.chat-message .message-item.right .content[data-v-70a6010e]{background-color:#4cd964;margin-right:%?28?%;word-break:break-all;line-height:%?36?%;position:relative}.chat-message .message-item.left .content[data-v-70a6010e]{background-color:#fff;margin-left:%?28?%;word-break:break-all;line-height:%?36?%;position:relative}.chat-message .next[data-v-70a6010e]{width:100%;height:%?20?%}.no-connect-box[data-v-70a6010e]{width:100%;text-align:center;margin:%?20?% 0 %?50?%}.no-connect-box .no-connect[data-v-70a6010e]{display:inline-block;padding:0 %?20?%;height:%?40?%;background:red;margin:0 auto;background:rgba(0,0,0,.5);-webkit-border-radius:%?9?%;border-radius:%?9?%;text-align:center;line-height:%?40?%;font-size:%?22?%;color:#fff}.chat_text[data-v-70a6010e],\r\n.chat_img[data-v-70a6010e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.chat_text .iconfont[data-v-70a6010e],\r\n.chat_img .iconfont[data-v-70a6010e]{font-size:%?36?%}.chat_img[data-v-70a6010e]{width:30%;height:%?200?%}',""]),e.exports=t},9266:function(e,t,i){var o=i("39d7");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=i("4f06").default;n("c4ec2b1a",o,!0,{sourceMap:!1,shadowMode:!1})},"9ee1":function(e,t,i){"use strict";i("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={name:"ns-chat-order",props:{orderId:{type:[Number,String]},isCanSend:Boolean},data:function(){return{orderInfo:{}}},mounted:function(){this.getGoodsInfo()},methods:{getGoodsInfo:function(){var e=this;this.$api.sendRequest({url:"/api/order/detail",data:{order_id:this.orderId},success:function(t){t.code>=0&&(e.orderInfo=t.data)}})},sendMsg:function(){this.$emit("sendMsg","order")}}};t.default=o},b26c:function(e,t,i){"use strict";i.r(t);var o=i("5471"),n=i.n(o);for(var s in o)"default"!==s&&function(e){i.d(t,e,(function(){return o[e]}))}(s);t["default"]=n.a},bdbf:function(e,t,i){var o=i("5d51");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=i("4f06").default;n("000047aa",o,!0,{sourceMap:!1,shadowMode:!1})},be68:function(e,t,i){"use strict";var o=i("0f42"),n=i.n(o);n.a},c1f0:function(e,t,i){"use strict";var o=i("9266"),n=i.n(o);n.a},ce70:function(e,t,i){"use strict";(function(e){var o=i("4ea4");i("c975"),i("13d5"),i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("5319"),i("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(i("ec6f")),s=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,a=/^<\/([-A-Za-z0-9_]+)[^>]*>/,r=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,d=h("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),c=h("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),l=h("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),u=h("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),g=h("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),m=h("script,style");function f(e,t){var i,o,n,f=[],h=e;f.last=function(){return this[this.length-1]};while(e){if(o=!0,f.last()&&m[f.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+f.last()+"[^>]*>"),(function(e,i){return i=i.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(i),""})),v("",f.last());else if(0==e.indexOf("\x3c!--")?(i=e.indexOf("--\x3e"),i>=0&&(t.comment&&t.comment(e.substring(4,i)),e=e.substring(i+3),o=!1)):0==e.indexOf("</")?(n=e.match(a),n&&(e=e.substring(n[0].length),n[0].replace(a,v),o=!1)):0==e.indexOf("<")&&(n=e.match(s),n&&(e=e.substring(n[0].length),n[0].replace(s,b),o=!1)),o){i=e.indexOf("<");var p=i<0?e:e.substring(0,i);e=i<0?"":e.substring(i),t.chars&&t.chars(p)}if(e==h)throw"Parse Error: "+e;h=e}function b(e,i,o,n){if(i=i.toLowerCase(),c[i])while(f.last()&&l[f.last()])v("",f.last());if(u[i]&&f.last()==i&&v("",i),n=d[i]||!!n,n||f.push(i),t.start){var s=[];o.replace(r,(function(e,t){var i=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:g[t]?t:"";s.push({name:t,value:i,escaped:i.replace(/(^|[^\\])"/g,'$1\\"')})})),t.start&&t.start(i,s,n)}}function v(e,i){if(i){for(o=f.length-1;o>=0;o--)if(f[o]==i)break}else var o=0;if(o>=0){for(var n=f.length-1;n>=o;n--)t.end&&t.end(f[n]);f.length=o}}v()}function h(e){for(var t={},i=e.split(","),o=0;o<i.length;o++)t[i[o]]=!0;return t}function p(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"")}function b(e){e=e.replace(/<!--[\s\S]*-->/gi,"");return e}function v(e){e=e.replace(/\\/g,"").replace(/<img/g,'<img style="width:100% !important;display:block;"');return e=e.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,(function(e,t){return'<img style="width:100% !important;display:block;" src="'+n.default.img(t)+'"/>'})),e}function y(e){e=e.replace(/style\s*=\s*["][^>]*;[^"]?/gi,(function(e,t){return e=e.replace(/[:](\s?)[\s\S]*/gi,(function(e,t){return e.replace(/"/g,"'")})),e}));return e}function w(e){return e.reduce((function(e,t){var i=t.value,o=t.name;return e[o]?e[o]=e[o]+" "+i:e[o]=i,e}),{})}function _(t){t=p(t),t=b(t),t=v(t),t=y(t);var i=[],o={node:"root",children:[]};return f(t,{start:function(e,t,n){var s={name:e};if(0!==t.length&&(s.attrs=w(t)),n){var a=i[0]||o;a.children||(a.children=[]),a.children.push(s)}else i.unshift(s)},end:function(t){var n=i.shift();if(n.name!==t&&e.error("invalid state: mismatch end tag"),0===i.length)o.children.push(n);else{var s=i[0];s.children||(s.children=[]),s.children.push(n)}},chars:function(e){var t={type:"text",text:e};if(0===i.length)o.children.push(t);else{var n=i[0];n.children||(n.children=[]),n.children.push(t)}},comment:function(e){var t={node:"comment",text:e},o=i[0];o.children||(o.children=[]),o.children.push(t)}}),o.children}var x=_;t.default=x}).call(this,i("5a52")["default"])},de11:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return o}));var o={chatMessage:i("f1d0").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"container",attrs:{id:"container","data-theme":e.themeStyle}},[i("mescroll-body",{ref:"mescrollRef",attrs:{down:{auto:!1},up:{use:!1}},on:{init:function(t){arguments[0]=t=e.$handleEvent(t),e.mescrollInit.apply(void 0,arguments)},down:function(t){arguments[0]=t=e.$handleEvent(t),e.downCallback.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"room",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closePopWindow.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"room-content-box"},e._l(e.messageList,(function(t,o){return i("v-uni-view",{key:o,attrs:{id:"chat"+o}},[i("chat-message",{attrs:{message:t,shopInfo:e.shopInfo,userInfo:e.userInfo,send:e.send},on:{sendGood:function(t){arguments[0]=t=e.$handleEvent(t),e.sendGood(t,o)},sendOrder:function(t){arguments[0]=t=e.$handleEvent(t),e.sendOrder(t,o)}}})],1)})),1),e.chatBottom?i("v-uni-view",{staticClass:"paddingbottom",attrs:{id:"paddingbottom"}}):e._e()],1),i("v-uni-view",{staticClass:"input-content"},[i("v-uni-view",{staticClass:"input-box"},[i("v-uni-view",{staticClass:"iconfont iconbiaoqing1 padding-right ",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openEmjoy()}}}),i("v-uni-input",{staticClass:"message",attrs:{type:"text",placeholder:"点此提问客服",id:"input","confirm-type":"send","placeholder-style":"color:#DDDDDD;","cursor-spacing":"10","selection-end":"-1","selection-start":"-1","confirm-type":"send"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMsg("message")},focus:function(t){arguments[0]=t=e.$handleEvent(t),e.inputFocus.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.closePopWindow()},keyboardHeightChange:function(t){arguments[0]=t=e.$handleEvent(t),e.onKeyboardHeightChange.apply(void 0,arguments)}},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}}),i("v-uni-view",{staticClass:"iconfont iconjiahao01 padding-right",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openChatMore()}}}),i("v-uni-view",{staticClass:"iconfont send_btn color-base-bg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMsg("message")}}},[e._v("发送")])],1),e.inputShow&&e.inputFirst?i("v-uni-view",{staticClass:"inputShow"}):e._e(),e.emjoyShow?i("v-uni-view",{on:{touchmove:function(t){t.preventDefault(),t.stopPropagation(),arguments[0]=t=e.$handleEvent(t)}}},[i("v-uni-view",{staticClass:"emjoy-box"},[i("v-uni-scroll-view",{staticClass:"emjoy-content",attrs:{"scroll-y":"true"}},e._l(e.emjoyList,(function(t,o){return i("v-uni-view",{key:o,staticClass:"emjoy-item",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.addEmjoy(t,o)}}},[i("v-uni-image",{attrs:{src:e.$util.img(t)}})],1)})),1)],1)],1):e._e(),e.chatMore?i("v-uni-view",{staticClass:"more_send"},[i("v-uni-view",{staticClass:"more_send-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addImg()}}},[i("i",{staticClass:"iconfont icontupian "}),i("v-uni-view",[e._v("图片")])],1)],1):e._e()],1)],1)],1)},s=[]},ee27:function(e,t,i){"use strict";var o=i("2611"),n=i.n(o);n.a},ef59:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={emjoyList:{"[emjoy_01]":"public/static/img/emjoy/emjoy_01.gif","[emjoy_02]":"public/static/img/emjoy/emjoy_02.gif","[emjoy_03]":"public/static/img/emjoy/emjoy_03.gif","[emjoy_04]":"public/static/img/emjoy/emjoy_04.gif","[emjoy_05]":"public/static/img/emjoy/emjoy_05.gif","[emjoy_06]":"public/static/img/emjoy/emjoy_06.gif","[emjoy_07]":"public/static/img/emjoy/emjoy_07.gif","[emjoy_08]":"public/static/img/emjoy/emjoy_08.gif","[emjoy_09]":"public/static/img/emjoy/emjoy_09.gif","[emjoy_10]":"public/static/img/emjoy/emjoy_10.gif","[emjoy_11]":"public/static/img/emjoy/emjoy_11.gif","[emjoy_12]":"public/static/img/emjoy/emjoy_12.gif","[emjoy_13]":"public/static/img/emjoy/emjoy_13.gif","[emjoy_14]":"public/static/img/emjoy/emjoy_14.gif","[emjoy_15]":"public/static/img/emjoy/emjoy_15.gif","[emjoy_16]":"public/static/img/emjoy/emjoy_16.gif","[emjoy_17]":"public/static/img/emjoy/emjoy_17.gif","[emjoy_18]":"public/static/img/emjoy/emjoy_18.gif","[emjoy_19]":"public/static/img/emjoy/emjoy_19.gif","[emjoy_20]":"public/static/img/emjoy/emjoy_20.gif","[emjoy_21]":"public/static/img/emjoy/emjoy_21.gif","[emjoy_22]":"public/static/img/emjoy/emjoy_22.gif","[emjoy_23]":"public/static/img/emjoy/emjoy_23.gif","[emjoy_24]":"public/static/img/emjoy/emjoy_24.gif","[emjoy_25]":"public/static/img/emjoy/emjoy_25.gif","[emjoy_26]":"public/static/img/emjoy/emjoy_26.gif","[emjoy_27]":"public/static/img/emjoy/emjoy_27.gif","[emjoy_28]":"public/static/img/emjoy/emjoy_28.gif","[emjoy_29]":"public/static/img/emjoy/emjoy_29.gif","[emjoy_30]":"public/static/img/emjoy/emjoy_30.gif","[emjoy_31]":"public/static/img/emjoy/emjoy_31.gif","[emjoy_32]":"public/static/img/emjoy/emjoy_32.gif","[emjoy_33]":"public/static/img/emjoy/emjoy_33.gif","[emjoy_34]":"public/static/img/emjoy/emjoy_34.gif","[emjoy_35]":"public/static/img/emjoy/emjoy_35.gif","[emjoy_36]":"public/static/img/emjoy/emjoy_36.gif","[emjoy_37]":"public/static/img/emjoy/emjoy_37.gif","[emjoy_38]":"public/static/img/emjoy/emjoy_38.gif","[emjoy_39]":"public/static/img/emjoy/emjoy_39.gif","[emjoy_40]":"public/static/img/emjoy/emjoy_40.gif","[emjoy_41]":"public/static/img/emjoy/emjoy_41.gif","[emjoy_42]":"public/static/img/emjoy/emjoy_42.gif","[emjoy_43]":"public/static/img/emjoy/emjoy_43.gif","[emjoy_44]":"public/static/img/emjoy/emjoy_44.gif","[emjoy_45]":"public/static/img/emjoy/emjoy_45.gif","[emjoy_46]":"public/static/img/emjoy/emjoy_46.gif","[emjoy_47]":"public/static/img/emjoy/emjoy_47.gif"}};t.default=o},f1d0:function(e,t,i){"use strict";i.r(t);var o=i("350f"),n=i("8c1f");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("ee27");var a,r=i("f0c5"),d=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"70a6010e",null,!1,o["a"],a);t["default"]=d.exports},f985:function(e,t,i){"use strict";i.r(t);var o=i("6a6c"),n=i.n(o);for(var s in o)"default"!==s&&function(e){i.d(t,e,(function(){return o[e]}))}(s);t["default"]=n.a}}]);