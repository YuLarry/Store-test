(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherpages-game-turntable-turntable"],{"02aa":function(t,a,e){"use strict";var i=e("2111"),n=e.n(i);n.a},"0fd6":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,"[data-v-b3c1a0a0] .uni-popup__wrapper.uni-custom .uni-popup__wrapper-box{background:none!important}[data-v-b3c1a0a0] .uni-popup__wrapper.uni-custom.center .uni-popup__wrapper-box{overflow:unset}[data-v-b3c1a0a0] .reward-popup .uni-popup__wrapper-box{background:none!important;max-width:unset!important;max-height:unset!important}",""]),t.exports=a},2111:function(t,a,e){var i=e("0fd6");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("ed4803e0",i,!0,{sourceMap:!1,shadowMode:!1})},"23e79":function(t,a,e){"use strict";e.r(a);var i=e("ac2c"),n=e("6461");for(var r in n)"default"!==r&&function(t){e.d(a,t,(function(){return n[t]}))}(r);e("b1b0"),e("02aa");var o,s=e("f0c5"),d=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"b3c1a0a0",null,!1,i["a"],o);a["default"]=d.exports},"3b27":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.container[data-v-b3c1a0a0]{width:100vw;height:100vh;background-image:-webkit-gradient(linear,left top,left bottom,from(#f3623f),to(#f74222));background-image:-webkit-linear-gradient(#f3623f,#f74222);background-image:linear-gradient(#f3623f,#f74222)}.head-wrap[data-v-b3c1a0a0]{position:relative}.head-wrap uni-image[data-v-b3c1a0a0]{width:90%;margin:0 auto;display:block}.head-wrap .rule-mark[data-v-b3c1a0a0]{position:absolute;right:0;top:%?60?%;background-color:#ffe854;color:#ff7908;height:%?60?%;line-height:%?60?%;padding:0 %?30?%;-webkit-border-top-left-radius:%?60?%;border-top-left-radius:%?60?%;-webkit-border-bottom-left-radius:%?60?%;border-bottom-left-radius:%?60?%}.turntable-wrap[data-v-b3c1a0a0]{margin:%?30?%;padding:%?70?% %?50?% %?70?% %?70?%;background-size:100% 100%;-webkit-border-radius:%?16?%;border-radius:%?16?%;-webkit-transform:translateY(%?-200?%);transform:translateY(%?-200?%)}.turntable-wrap .wrap[data-v-b3c1a0a0]{width:100%;position:relative;overflow:hidden;height:%?536?%}.turntable-wrap .star-box[data-v-b3c1a0a0]{position:absolute;width:calc(33.33333333% - %?20?%);height:%?100?%;background:-webkit-gradient(linear,left top,left bottom,from(#ffe1ac),to(#fec965));background:-webkit-linear-gradient(#ffe1ac,#fec965);background:linear-gradient(#ffe1ac,#fec965);top:%?182?%;left:33.33333333%;height:%?162?%;-webkit-border-radius:%?8?%;border-radius:%?8?%;-webkit-box-shadow:0 .25em 0 #e19d1f;box-shadow:0 .25em 0 #e19d1f;text-align:center}.turntable-wrap .star-box .text[data-v-b3c1a0a0]{font-size:%?34?%;margin:%?30?% 0 0 0;line-height:%?60?%;font-weight:600;color:#ff3301;text-align:center}.turntable-wrap .star-box .text.no-tips[data-v-b3c1a0a0]{margin-top:%?50?%}.turntable-wrap .star-box .tips[data-v-b3c1a0a0]{font-size:%?24?%;display:inline-block;margin:0 auto;background:#f0a71d;line-height:1;color:#ff3301;padding:%?6?% %?12?%;-webkit-border-radius:%?24?%;border-radius:%?24?%}.turntable-wrap .star-box.disabled[data-v-b3c1a0a0]{-webkit-box-shadow:0 .25em 0 #999;box-shadow:0 .25em 0 #999;background:-webkit-gradient(linear,left top,left bottom,from(#ccc),to(#aaa));background:-webkit-linear-gradient(#ccc,#aaa);background:linear-gradient(#ccc,#aaa)}.turntable-wrap .star-box.disabled .text[data-v-b3c1a0a0]{color:#888}.turntable-wrap .star-box.disabled .tips[data-v-b3c1a0a0]{color:#777;background:#aaa}.turntable-wrap .status-box[data-v-b3c1a0a0]{position:absolute;width:calc(33.33333333% - %?20?%);height:%?100?%;background:#ed9580;top:%?182?%;left:33.33333333%;height:%?168?%;-webkit-border-radius:%?8?%;border-radius:%?8?%;text-align:center;padding:0 10px;-webkit-box-sizing:border-box;box-sizing:border-box}.turntable-wrap .status-box uni-view[data-v-b3c1a0a0]{color:#fff;font-size:%?32?%;letter-spacing:%?4?%;margin-top:%?30?%}.turntable-wrap .award-wrap[data-v-b3c1a0a0]{width:33.33333333%;padding-right:%?20?%;position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box}.turntable-wrap .award-wrap .box[data-v-b3c1a0a0]{width:100%;background:#fff;-webkit-border-radius:%?8?%;border-radius:%?8?%;padding:%?20?% 0;-webkit-box-shadow:inset 0 0 %?48?% 0 #ffd6ab,0 .25em 0 rgba(248,166,131,.96);box-shadow:inset 0 0 %?48?% 0 #ffd6ab,0 .25em 0 rgba(248,166,131,.96)}.turntable-wrap .award-wrap .box.on[data-v-b3c1a0a0]{background:-webkit-gradient(linear,left top,left bottom,from(#ffe1ac),to(#fec965));background:-webkit-linear-gradient(#ffe1ac,#fec965);background:linear-gradient(#ffe1ac,#fec965);-webkit-box-shadow:0 .25em 0 #e19d1f;box-shadow:0 .25em 0 #e19d1f}.turntable-wrap .award-wrap .box.on .award-text[data-v-b3c1a0a0]{color:#ff3301}.turntable-wrap .award-wrap .box .award-img[data-v-b3c1a0a0]{width:%?70?%;height:%?70?%;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.turntable-wrap .award-wrap .box .award-img uni-image[data-v-b3c1a0a0]{width:%?70?%;height:auto}.turntable-wrap .award-wrap .box .award-text[data-v-b3c1a0a0]{text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-top:%?10?%;font-size:%?24?%;padding:0 %?20?%;color:#666}.turntable-wrap .award-wrap[data-v-b3c1a0a0]:nth-child(1){top:0}.turntable-wrap .award-wrap[data-v-b3c1a0a0]:nth-child(2){top:0;left:33.33333333%}.turntable-wrap .award-wrap[data-v-b3c1a0a0]:nth-child(3){top:0;left:66.66666666%}.turntable-wrap .award-wrap[data-v-b3c1a0a0]:nth-child(4){top:%?182?%;left:66.66666666%}.turntable-wrap .award-wrap[data-v-b3c1a0a0]:nth-child(5){top:%?364?%;left:66.66666666%}.turntable-wrap .award-wrap[data-v-b3c1a0a0]:nth-child(6){top:%?364?%;left:33.33333333%}.turntable-wrap .award-wrap[data-v-b3c1a0a0]:nth-child(7){top:%?364?%;left:0}.turntable-wrap .award-wrap[data-v-b3c1a0a0]:nth-child(8){top:%?182?%;left:0}.action-text[data-v-b3c1a0a0]{margin:0 %?50?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-transform:translateY(%?-200?%);transform:translateY(%?-200?%)}.action-text > uni-view[data-v-b3c1a0a0]{-webkit-box-flex:1;-webkit-flex:1;flex:1;line-height:1}.action-text .point[data-v-b3c1a0a0]{color:#fee331}.action-text .record[data-v-b3c1a0a0]{color:#fff;text-align:right}.record-wrap[data-v-b3c1a0a0]{-webkit-transform:translateY(%?-200?%);transform:translateY(%?-200?%);margin:%?80?% %?50?% %?30?% %?50?%;-webkit-border-radius:%?10?%;border-radius:%?10?%;background-color:#ff6e43;padding:%?12?%;-webkit-box-shadow:0 .45em 0 #d92a00;box-shadow:0 .45em 0 #d92a00;position:relative;height:%?430?%}.record-wrap .body-shade[data-v-b3c1a0a0]{width:calc(100% - %?24?%);height:%?60?%;top:%?12?%;left:%?12?%;background-color:#da2b00;z-index:5;position:absolute;z-index:2;-webkit-border-radius:%?8?%;border-radius:%?8?%}.record-wrap .head[data-v-b3c1a0a0]{border:%?6?% solid #ff6e43;-webkit-box-shadow:inset 0 0 %?10?% 0 #d92a00,0 .45em 0 #d92a00;box-shadow:inset 0 0 %?10?% 0 #d92a00,0 .45em 0 #d92a00;background-color:#da2b00;position:absolute;z-index:5;text-align:center;width:%?300?%;height:%?70?%;line-height:%?70?%;-webkit-border-radius:%?70?%;border-radius:%?70?%;top:0;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#fff;font-weight:600;letter-spacing:%?4?%}.record-wrap .body[data-v-b3c1a0a0]{background-color:#da2b00;-webkit-border-radius:%?8?%;border-radius:%?8?%;height:%?340?%;-webkit-box-shadow:inset 0 0 %?10?% 0 #d92a00;box-shadow:inset 0 0 %?10?% 0 #d92a00;padding:%?60?% %?30?% %?30?% %?30?%;overflow:hidden}.record-wrap .body .wrap > uni-view[data-v-b3c1a0a0]{display:-webkit-box;display:-webkit-flex;display:flex}.record-wrap .body .wrap.animate[data-v-b3c1a0a0]{-webkit-transition:all 1s ease-in-out;transition:all 1s ease-in-out;-webkit-transform:translateY(%?-60?%);transform:translateY(%?-60?%)}.record-wrap .body .tit[data-v-b3c1a0a0]{line-height:%?60?%;width:%?220?%;color:#fff}.record-wrap .body .txt[data-v-b3c1a0a0]{line-height:%?60?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#fee331}.result-wrap[data-v-b3c1a0a0]{position:relative}.result-wrap .bg-img[data-v-b3c1a0a0]{width:80vw}.result-wrap .content-wrap[data-v-b3c1a0a0]{position:absolute;z-index:5;width:100%;height:100%;top:0;left:0;text-align:center}.result-wrap .content-wrap .look[data-v-b3c1a0a0]{margin:%?70?% auto 0 auto;display:block;width:%?120?%}.result-wrap .content-wrap .msg[data-v-b3c1a0a0]{margin:%?10?% auto 0 auto;padding:0 %?20?%;color:#da2b00;width:70%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.result-wrap .content-wrap .btn[data-v-b3c1a0a0]{width:50%;height:%?70?%;line-height:%?70?%;-webkit-border-radius:%?70?%;border-radius:%?70?%;text-align:center;color:#da2b00;background:-webkit-gradient(linear,left top,left bottom,from(#ffe1ac),to(#fec965));background:-webkit-linear-gradient(#ffe1ac,#fec965);background:linear-gradient(#ffe1ac,#fec965);margin:%?146?% auto 0 auto}.result-wrap .content-wrap .iconroundclose[data-v-b3c1a0a0]{position:absolute;color:#fff;font-size:%?70?%;top:%?-120?%;right:%?0?%}.result-wrap .yes .look[data-v-b3c1a0a0]{width:%?80?%;height:%?80?%;margin-top:30px}.result-wrap .yes .btn[data-v-b3c1a0a0]{margin-top:%?214?%}.rule-wrap[data-v-b3c1a0a0]{-webkit-border-radius:%?10?%;border-radius:%?10?%;background-color:#ffd697;width:80vw;padding:%?12?%;-webkit-box-sizing:border-box;box-sizing:border-box}.rule-wrap .content-wrap[data-v-b3c1a0a0]{background-color:#fff2dd;width:100%;-webkit-border-radius:%?8?%;border-radius:%?8?%;position:relative}.rule-wrap .content-wrap .rule-head[data-v-b3c1a0a0]{width:100%;position:absolute;-webkit-transform:translateY(-50%);transform:translateY(-50%);left:0;top:0}.rule-wrap .content-wrap .rule[data-v-b3c1a0a0]{height:%?560?%;padding:%?80?% %?30?% 0 %?30?%;-webkit-box-sizing:border-box;box-sizing:border-box}.rule-wrap .content-wrap .rule .tit[data-v-b3c1a0a0]{font-weight:600;color:#da2b00;margin-top:%?10?%}.rule-wrap .content-wrap .rule .text[data-v-b3c1a0a0]{font-size:%?26?%;color:#da2b00}.rule-wrap .content-wrap .iconroundclose[data-v-b3c1a0a0]{color:#fff;text-align:center;position:absolute;bottom:%?-150?%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);font-size:%?70?%}',""]),t.exports=a},"4dea":function(t,a,e){var i=e("3b27");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("3ef727e3",i,!0,{sourceMap:!1,shadowMode:!1})},6461:function(t,a,e){"use strict";e.r(a);var i=e("dd49"),n=e.n(i);for(var r in i)"default"!==r&&function(t){e.d(a,t,(function(){return i[t]}))}(r);a["default"]=n.a},"722a":function(t,a,e){"use strict";var i=e("4ea4");e("a9e3"),e("8a79"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("8eac")),r={name:"l-time",props:{text:{type:[String,Number,Date],default:""},maxDate:{type:Boolean,default:!1}},data:function(){return{textVal:this.text}},watch:{text:function(){this.textVal=this.text}},computed:{temp:function(){return this.getText()}},methods:{getText:function(){var t=this,a=n.default.getFormatTime(t.textVal,t.maxDate);return a&&(a.endsWith("刚刚")||a.endsWith("分钟前"))&&setTimeout((function(){var a=t.textVal;t.textVal="",t.textVal=a}),6e4),this.textVal?a:""},onClick:function(){this.$emit("on-tap",this.textVal)}}};a.default=r},"8eac":function(t,a,e){"use strict";e("99af"),e("d3b7"),e("4d63"),e("ac1f"),e("25f0"),e("5319"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,Function.prototype.asyAfter=function(t){var a=this;return function(){var e=a.apply(this,arguments);return"next"===e?t.apply(this,arguments):e}},Date.prototype.pattern=function(t){var a={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},e={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+e[this.getDay()+""])),a)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return t};var i=function(t){return/^\[object\s(.*)\]$/.exec(Object.prototype.toString.call(t))[1]},n=function(){},r=n.prototype;r.getUnix=function(){return(new Date).getTime()},r.getTodayUnix=function(){var t=new Date,a="".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate()," 00:00:00");return new Date(a).getTime()},r.getYearUnix=function(){var t=new Date;return t.setMonth(0),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()},r.getLastDate=function(t){if(t){var a=new Date(t);if(a.pattern)return a.pattern("yyyy-MM-dd");var e=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,i=a.getDate()<10?"0"+a.getDate():a.getDate();return a.getFullYear()+"-"+e+"-"+i}};var o=function(t,a){var e=function(t){return t<=0||Math.floor(t/60)<=0?"刚刚":"next"},i=function(t){return t<3600?Math.floor(t/60)+"分钟前":"next"},n=function(t,a){var e=d.getTodayUnix();return t>=3600&&a-e>=0?Math.floor(t/60/60)+"小时前":"next"},r=function(t,a){var e=d.getTodayUnix();return t=(e-a)/1e3,t/86400<=31?Math.ceil(t/86400)+"天前":"next"},o=function(t,a){return d.getLastDate(a)},s=e.asyAfter(i).asyAfter(n).asyAfter(r).asyAfter(o);return s(t,a)},s=new RegExp("-","g");r.getFormatTime=function(t,a){if(!t)return"";switch(i(t)){case"Date":t=t.getTime();break;case"String":t=t.replace(s,"/");default:t=new Date(t).getTime();break}var e=this.getUnix(),n=(this.getYearUnix(),(e-t)/1e3);if(t>e&&a)return this.getLastDate(t);return o(n,t)};var d=new n,u=d;a.default=u},9050:function(t,a,e){"use strict";e.r(a);var i=e("fa63"),n=e("f232");for(var r in n)"default"!==r&&function(t){e.d(a,t,(function(){return n[t]}))}(r);var o,s=e("f0c5"),d=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"64b03e1a",null,!1,i["a"],o);a["default"]=d.exports},ac2c:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return r})),e.d(a,"a",(function(){return i}));var i={lTime:e("9050").default,uniPopup:e("92aa").default,loadingCover:e("790a").default,nsLogin:e("2893").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-scroll-view",{staticClass:"container",attrs:{"scroll-y":"true","data-theme":t.themeStyle}},[e("v-uni-view",[e("v-uni-view",{staticClass:"head-wrap"},[e("v-uni-image",{attrs:{src:t.$util.img("upload/uniapp/game/turntable_head.png"),mode:"widthFix"}}),e("v-uni-view",{staticClass:"rule-mark",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.openRulePopup.apply(void 0,arguments)}}},[t._v("规则")])],1),e("v-uni-view",{staticClass:"turntable-wrap",style:{backgroundImage:"url("+t.$util.img("/upload/uniapp/game/turntable_bg.png")+")"}},[e("v-uni-view",{staticClass:"wrap"},[t._l(t.gameInfo.award,(function(a,i){return e("v-uni-view",{key:i,staticClass:"award-wrap"},[e("v-uni-view",{staticClass:"box",class:{on:i==t.currentIndex}},[e("v-uni-view",{staticClass:"award-img"},[e("v-uni-image",{attrs:{src:t.$util.img(a.award_img),mode:"widthFix"}})],1),e("v-uni-view",{staticClass:"award-text"},[t._v(t._s(a.award_name))])],1)],1)})),1==t.gameInfo.status?[t.gameInfo.surplus_num>0||!t.token?[e("v-uni-view",{staticClass:"star-box",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.lottery.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text"},[t._v("立即抽奖")]),e("v-uni-view",{staticClass:"tips"},[t._v("剩余"+t._s(t.gameInfo.surplus_num)+"次")])],1)]:[e("v-uni-view",{staticClass:"star-box disabled"},[e("v-uni-view",{staticClass:"text"},[t._v("立即抽奖")]),e("v-uni-view",{staticClass:"tips"},[t._v("剩余"+t._s(t.gameInfo.surplus_num)+"次")])],1)]]:0==t.gameInfo.status?[e("v-uni-view",{staticClass:"status-box"},[e("v-uni-view",[t._v("活动尚未开始")])],1)]:[e("v-uni-view",{staticClass:"status-box"},[e("v-uni-view",[t._v("活动已经结束")])],1)]],2)],1),e("v-uni-view",{staticClass:"action-text"},[e("v-uni-view",{staticClass:"point"},[t._v("我的积分："+t._s(t.point))]),e("v-uni-view",{staticClass:"record",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.$util.redirectTo("/otherpages/game/record/record",{id:t.id})}}},[t._v("我的中奖记录")])],1),t.gameInfo.is_show_winner&&t.gameInfo.draw_record.length?e("v-uni-view",{staticClass:"record-wrap"},[e("v-uni-view",{staticClass:"body-shade"}),e("v-uni-view",{staticClass:"head"},[t._v("中奖名单")]),e("v-uni-view",{staticClass:"body"},[e("v-uni-view",{staticClass:"wrap",class:{animate:t.animate}},t._l(t.gameInfo.draw_record,(function(a,i){return e("v-uni-view",{key:i},[e("v-uni-view",{staticClass:"tit"},[t._v(t._s(t._f("cover")(a.member_nick_name)))]),e("v-uni-view",{staticClass:"txt"},[e("l-time",{attrs:{text:1e3*a.create_time}}),t._v("获得 "+t._s(a.award_name))],1)],1)})),1)],1)],1):t._e()],1),e("uni-popup",{ref:"resultPopup",attrs:{type:"center",maskClick:!1}},[e("v-uni-view",{staticClass:"result-wrap"},[t.result.is_winning?[e("v-uni-view",{staticClass:"content-wrap yes"},[e("v-uni-image",{staticClass:"look",attrs:{src:t.$util.img(t.gameInfo.award[t.resultIndex].award_img),mode:"widthFix"}}),e("v-uni-view",{staticClass:"msg"},[t._v("恭喜您抽中"+t._s(t.gameInfo.award[t.resultIndex].award_name))]),e("v-uni-view",{staticClass:"btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.closePopup.apply(void 0,arguments)}}},[t._v("继续抽奖")]),e("v-uni-text",{staticClass:"iconfont iconroundclose",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.closePopup.apply(void 0,arguments)}}})],1),e("v-uni-image",{staticClass:"bg-img",attrs:{src:t.$util.img("upload/uniapp/game/result_yes.png"),mode:"widthFix"}})]:[e("v-uni-view",{staticClass:"content-wrap"},[e("v-uni-image",{staticClass:"look",attrs:{src:t.$util.img("upload/uniapp/game/result_look.png"),mode:"widthFix"}}),e("v-uni-view",{staticClass:"msg"},[t._v(t._s(t.gameInfo.no_winning_desc))]),e("v-uni-view",{staticClass:"btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.closePopup.apply(void 0,arguments)}}},[t._v("继续抽奖")]),e("v-uni-text",{staticClass:"iconfont iconroundclose",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.closePopup.apply(void 0,arguments)}}})],1),e("v-uni-image",{staticClass:"bg-img",attrs:{src:t.$util.img("upload/uniapp/game/result_no.png"),mode:"widthFix"}})]],2)],1),e("uni-popup",{ref:"rulePopup",attrs:{type:"center",maskClick:!1}},[e("v-uni-view",{staticClass:"rule-wrap"},[e("v-uni-view",{staticClass:"content-wrap"},[e("v-uni-image",{staticClass:"rule-head",attrs:{src:t.$util.img("upload/uniapp/game/rule_head.png"),mode:"widthFix"}}),e("v-uni-scroll-view",{staticClass:"rule",attrs:{"scroll-y":"true"}},[e("v-uni-view",[e("v-uni-view",{staticClass:"tit"},[t._v("活动时间")]),e("v-uni-view",{staticClass:"text"},[t._v(t._s(t.$util.timeStampTurnTime(t.gameInfo.start_time))+" - "+t._s(t.$util.timeStampTurnTime(t.gameInfo.end_time)))]),e("v-uni-view",{staticClass:"tit"},[t._v("参与规则")]),0==t.gameInfo.join_type?e("v-uni-view",{staticClass:"text"},[t._v("每个用户活动期间共有"+t._s(t.gameInfo.join_frequency)+"次抽奖机会。")]):e("v-uni-view",{staticClass:"text"},[t._v("每个用户活动期间每天都有"+t._s(t.gameInfo.join_frequency)+"次抽奖机会，每天0点更新。")]),e("v-uni-view",{staticClass:"text"},[t._v("每次抽奖需消耗 "+t._s(t.gameInfo.points)+" 积分")]),0!=t.gameInfo.level_id?e("v-uni-view",{staticClass:"text"},[t._v("该活动只有"+t._s(t.gameInfo.level_name)+"等级的会员可参与。")]):t._e(),""!=t.gameInfo.remark?[e("v-uni-view",{staticClass:"tit"},[t._v("活动说明")]),e("v-uni-view",{staticClass:"text"},[t._v(t._s(t.gameInfo.remark))])]:t._e()],2)],1),e("v-uni-text",{staticClass:"iconfont iconroundclose",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.closeRulePopup.apply(void 0,arguments)}}})],1)],1)],1),e("loading-cover",{ref:"loadingCover"}),e("ns-login",{ref:"login"})],1)},r=[]},b1b0:function(t,a,e){"use strict";var i=e("4dea"),n=e.n(i);n.a},dd49:function(t,a,e){"use strict";var i=e("4ea4");e("4160"),e("e25e"),e("159b"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("92aa")),r=i(e("9050")),o=i(e("c409")),s={components:{uniPopup:n.default,LTime:r.default},data:function(){return{token:null,isClick:!1,currentIndex:-1,maxRing:6,currentRing:1,speed:300,timer:null,id:0,gameInfo:{award:[{award_img:"",award_name:""}],surplus_num:""},award:[],resultIndex:0,result:{is_winning:1},point:0,animate:!1,scrollTimer:null}},onLoad:function(t){t.id&&(this.id=t.id),this.getGameInfo()},onShow:function(){var t=this;if(!this.addonIsExit.turntable)return this.$util.showToast({title:"商家未开启幸运抽奖",mask:!0,duration:2e3}),void setTimeout((function(){t.$util.redirectTo("/pages/index/index/index",{},"redirectTo")}),2e3);this.$langConfig.refresh(),uni.getStorageSync("token")&&(this.getMemberPointInfo(),this.token=uni.getStorageSync("token"))},mixins:[o.default],computed:{storeToken:function(){return this.$store.state.token}},watch:{storeToken:function(t,a){t&&(this.token=uni.getStorageSync("token"),this.getMemberPointInfo(),this.getGameInfo())}},methods:{getMemberPointInfo:function(){var t=this;this.$api.sendRequest({url:"/api/memberaccount/info",data:{account_type:"point"},success:function(a){a.data&&(t.point=parseInt(a.data.point))}})},lottery:function(){var t=this;uni.getStorageSync("token")?1==this.gameInfo.status&&(this.gameInfo.surplus_num<=0?this.$util.showToast({title:"您的抽奖次数已用完"}):this.gameInfo.points>0&&this.point<this.gameInfo.points?this.$util.showToast({title:"积分不足"}):this.isClick||(this.isClick=!0,this.currentIndex=0,this.currentRing=1,this.speed=300,this.timer=setInterval(this.startRoll,this.speed),this.$api.sendRequest({url:"/turntable/api/turntable/lottery",data:{id:this.id},success:function(a){a.code>=0?(t.result=a.data,a.data.is_winning?t.resultIndex=t.$util.inArray(a.data.award_id,t.award):t.resultIndex=t.$util.inArray(-1,t.award),t.point-=t.gameInfo.points,t.gameInfo.surplus_num-=1):t.$util.showToast({title:a.message})},fail:function(a){t.resultIndex=t.$util.inArray(-1,t.award)}}))):this.$refs.login.open("/otherpages/game/turntable/turntable?id="+this.id)},getGameInfo:function(){var t=this;this.$api.sendRequest({url:"/turntable/api/turntable/info",data:{id:this.id},success:function(a){a.code>=0&&a.data?(t.gameInfo=a.data,a.data.award.forEach((function(a){t.award.push(a.award_id)})),t.$refs.loadingCover&&t.$refs.loadingCover.hide(),t.gameInfo.is_show_winner&&t.gameInfo.draw_record.length>6&&(t.scrollTimer=setInterval(t.scrollRecord,2e3))):(t.$util.showToast({title:"未获取到活动信息！"}),setTimeout((function(){t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}),1500))},fail:function(a){t.$util.showToast({title:"未获取到活动信息！"}),setTimeout((function(){t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}),1500)}})},startRoll:function(){if(this.speed>50&&(this.speed-=50),this.currentRing>=this.maxRing-1&&this.speed<700&&(this.speed+=100),this.currentRing==this.maxRing&&this.currentIndex==this.resultIndex)return clearInterval(this.timer),void this.showResult();7==this.currentIndex?(this.currentRing+=1,this.currentIndex=0):this.currentIndex+=1,clearInterval(this.timer),this.timer=setTimeout(this.startRoll,this.speed)},showResult:function(){this.$refs.resultPopup.open()},closePopup:function(){this.isClick=!1,this.currentIndex=-1,this.$refs.resultPopup.close()},openRulePopup:function(){this.$refs.rulePopup.open()},closeRulePopup:function(){this.$refs.rulePopup.close()},scrollRecord:function(){var t=this;this.animate=!0,setTimeout((function(){t.gameInfo.draw_record.push(t.gameInfo.draw_record[0]),t.gameInfo.draw_record.shift(),t.animate=!1}),1e3)}},filters:{cover:function(t){return"string"==typeof t&&t.length>0?t.substr(0,1)+"******"+t.substr(-1):""}},onHide:function(){clearInterval(this.scrollTimer)}};a.default=s},f232:function(t,a,e){"use strict";e.r(a);var i=e("722a"),n=e.n(i);for(var r in i)"default"!==r&&function(t){e.d(a,t,(function(){return i[t]}))}(r);a["default"]=n.a},fa63:function(t,a,e){"use strict";var i;e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return r})),e.d(a,"a",(function(){return i}));var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-text",[t._v(t._s(t.temp))])},r=[]}}]);