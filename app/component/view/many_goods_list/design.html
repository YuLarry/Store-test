<nc-component v-bind:data="data[index]" class="many-goods-list">

	<!-- 预览 -->
	<template slot="preview">
		<div class="goods-list-preview" v-bind:style="{ marginTop: nc.marginTop + 'px' }" style="padding: 0 15px;">
			<template v-if="nc.style == 1">
				<div class="goods-cate-list">
					<template v-for="(item, index) in nc.list">
						<div class="split-line" v-if="index > 0"></div>
						<div class="goods-cate-item" :class="{'active': index == 0}">
							<p>{{item.title}}</p>
							<p :style="{background: index == 0 && item.desc ? nc.selectColor : ''}">{{item.desc}}</p>
						</div>
					</template>
				</div>
			</template>
		</div>
	</template>

	<!-- 编辑 -->
	<template slot="edit">
		<!-- <div class="layui-form-item">
			<label class="layui-form-label sm">名称</label> 
			<div class="layui-input-block">
				<input type="text" v-model="nc.goodsGroupTitle" v-bind:id="'title_'+index" placeholder="请输入商品组名称" class="layui-input">
			</div>
		</div> -->
		
		<template v-if="nc.lazyLoad">
			<many-goods-list-style></many-goods-list-style>
		</template>
		
		<template v-if="nc.lazyLoad">
			<many-goods-list></many-goods-list>
		</template>
		
		<div class="template-edit-title"><h3>其他设置</h3></div>
		<slide v-bind:data="{ field : 'marginTop', label : '页面间距' }"></slide>

		<!-- 商品组风格弹框 -->
		<div class="goods-cate-style">
			<div class="style-cate-goods layui-form">
				<div class="style-cate-con-goods">
					<div class="style-li-goods" v-bind:class="{'selected ns-border-color': nc.style == 1}">
						<img src="{$resource_path}/many_goods_list/img/cate_style_1.png" />
					</div>
				</div>
				
				<input type="hidden" name="style">
				
			</div>
		</div>

		<!-- 商品分类选择弹框 -->
		<script type="text/html" class="goods-category-layer">
		    <div class="goods-category-list layui-form">
		        <table class="layui-table ns-pithy-table">
		            <colgroup>
		                <col width="5%">
		                <col width="3%">
		                <col width="37%">
		                <col width="25%">
		                <col width="30%">
		            </colgroup>
		            <thead>
		            <tr>
		                <th></th>
		                <th></th>
		                <th>分类名称</th>
		                <th>简称</th>
		                <th>图片</th>
		            </tr>
		            </thead>
		            <tbody>
		            {if condition="$category_list"}
		            {foreach name="$category_list" item="vo"}
		            <tr class='category-line'>
		                <td><input type="checkbox" name="category_select_id" data-category_select_id = "{$vo['category_id']}"lay-skin="primary" value='{:json_encode($vo)}' lay-filter="category_select_id"{if !empty($link_array.category_id) && $link_array.category_id == $vo['category_id']}checked{/if}></td>
		                <td>
		                    {notempty name="$vo['child_list']"}
		                    <span class="switch ns-text-color js-switch" data-category-id="{$vo['category_id']}" data-level="{$vo['level']}" data-open="0">+</span>
		                    {/notempty}
		                </td>
		                <td class="category-name">{$vo['category_name']}</td>
		                <td>{$vo['short_name']}</td>
		                <td>
		                    {notempty name="$vo['image']"}
		                    <div class="ns-img-box">
		                        <img layer-src src="{:img($vo['image'])}"/>
		                    </div>
		                    {/notempty}
		                </td>

		            </tr>
		            {notempty name="$vo['child_list']"}
		            {foreach name="$vo['child_list']" item="second"}
		            <tr class='category-line' data-category-id-1="{$second['category_id_1']}" style="display:none;">
		                <td><input type="checkbox" name="category_select_id" lay-skin="primary"data-category_select_id = "{$second['category_id']}" value='{:json_encode($second)}' lay-filter="category_select_id"{if !empty($link_array.category_id) && $link_array.category_id == $second['category_id']}checked{/if}></td>
		                <td></td>
		                <td style="padding-left: 20px;">
		                    <span class="switch ns-text-color js-switch" data-category-id="{$second['category_id']}" data-level="{$second['level']}" data-open="1" style="padding-right: 20px;">-</span>
		                    <span class="category-name">{$second['category_name']}</span>
		                </td>
		                <td>{$second['short_name']}</td>
		                <td>
		                    {notempty name="$second['image']"}
		                    <img layer-src src="{:img($second['image'])}"/>
		                    {/notempty}
		                </td>
		            </tr>
		            {notempty name="$second['child_list']"}
		            {foreach name="$second['child_list']" item="third"}
		            <tr class='category-line'data-category-id-1="{$third['category_id_1']}" data-category-id-2="{$third['category_id_2']}" style="display:none;">
		                <td><input type="checkbox" name="category_select_id" lay-skin="primary" value='{:json_encode($third)}' data-category_select_id = '{$third['category_id']}'lay-filter="category_select_id"{if !empty($link_array.category_id) && $link_array.category_id == $third['category_id']}checked{/if}></td>
		                <td></td>
		                <td style="padding-left: 80px;">
		                    <span class="category-name">{$third['category_name']}</span>
		                </td>
		                <td>{$third['short_name']}</td>
		                <td>
		                    {notempty name="$third['image']"}
		                    <img layer-src src="{:img($third['image'])}"/>
		                    {/notempty}
		                </td>
		            </tr>
		            {/foreach}
		            {/notempty}
		            {/foreach}
		            {/notempty}
		            {/foreach}
		            {else/}
		            <tr>
		                <td colspan="9" style="text-align: center">无数据</td>
		            </tr>
		            {/if}
		            </tbody>
		        </table>
		    </div>
		</script>
		
		<!-- 商品列表风格弹框 -->
		<!-- <div class="goods-list-style">
			<div class="style-list-goods layui-form">
				<div class="style-list-con-goods">
					<div class="style-li-goods" v-bind:class="{'selected ns-border-color': nc.style == 1}">
						<img src="{$resource_path}/many_goods_list/img/style3.png" />
					</div>
				</div>
				
				<input type="hidden" name="style">
				
			</div>
		</div> -->
	</template>
	
	<!-- 资源 -->
	<template slot="resource">
		<js>
		var goodsListResourcePath = "{$resource_path}";
		</js>
		<css src="{$resource_path}/many_goods_list/css/design.css"></css>
		<js src="{$resource_path}/many_goods_list/js/design.js"></js>
	</template>
	
</nc-component>