{extend name="base"/}
{block name="resources"}
<style>
	.item-block{margin-bottom: 0px;}
	.item-block-parent{padding: 0;}
	.over-hide-second{line-height: 20px !important;}
	.item-block-parent .item-block-wrap{align-items: center;}
	.item-block-parent .item-poa-pic{top: 50%;transform: translateY(-50%);line-height: 50px;text-align: center;}
	.tips{margin: 10px 0 0 20px;}
</style>
{/block}
{block name="main"}
<div class="layui-card card-common card-brief">
	<div class="layui-card-header">
		<span class="card-title">缓存管理</span>
	</div>
	<div class="layui-card-body layui-field-box">
		<div class="site_list item-block-parent item-five">
			{foreach $cache_list as $k => $val}
			<a class="item-block item-block-hover-a" href="#">
				<div class="item-block-wrap">
					<div class="item-pic">
						<img src="{:img($val.icon)}" />
					</div>
					<div class="item-con">
						<div class="item-content-title">{$val.name}</div>
						<p class="item-content-desc over-hide-second">{$val.desc}</p>
					</div>
					<div class="item-poa-pic" onclick="clear_cache('{$val.key}')">
						<span class="text-color">清除</span>
					</div>
				</div>
				<!-- <div class="item-float-wrap">
					<div class="item-float">
						<div class="item-float-con">
							<span></span>
						</div>
						<div class="item-float-con" onclick="clear_cache('{$val.key}')">
							<i class="bg-color-red"></i>
							<span>清除</span>
						</div>
					</div>
				</div>
 -->
			</a>
			{/foreach}
		</div>

		<div class="word-aux tips">
			<p>说明：当对模板文件进行过修改,需要清除模板缓存才可正常显示修改后的效果;当新增数据表或者默认数据,需要清除数据和数据表缓存才可正常显示效果。</p>
		</div>

	</div>
</div>
{/block}
{block name="script"}
<script>
	//清除缓存
	function clear_cache(key) {
		layer.confirm('确定要删除对应缓存吗?', function() {
			$.ajax({
				url: ns.url("shop/system/cache"),
				data: {
					key
				},
				type: "POST",
				dataType: "JSON",
				success: function(res) {
					layer.msg(res.message);
				}
			});
		});
	}
</script>
{/block}
