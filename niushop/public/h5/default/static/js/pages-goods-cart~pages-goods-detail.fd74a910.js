(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-cart~pages-goods-detail"],{"04db":function(t,e,i){"use strict";i.r(e);var o=i("d100"),a=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=a.a},"0ca1":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{showTop:!1,scrollTop:0,oldLocation:0}},methods:{scrollToTopNative:function(){uni.pageScrollTo({duration:200,scrollTop:0})}},onReachBottom:function(){this.$refs.goodrecommend&&this.$refs.goodrecommend.getLikeList(10)},onPageScroll:function(t){this.oldLocation=t.scrollTop,t.scrollTop>400?this.showTop=!0:this.showTop=!1}};e.default=o},"1d9e":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* 回到顶部的按钮 */.mescroll-totop[data-v-5fa8cfd1]{z-index:99;position:fixed!important; /* 加上important避免编译到H5,在多mescroll中定位失效 */right:%?46?%!important;bottom:%?272?%!important;width:%?72?%;height:%?72?%;border-radius:50%;opacity:0;transition:opacity .5s; /* 过渡 */margin-bottom:var(--window-bottom) /* css变量 */}\r\n/* 适配 iPhoneX */.mescroll-safe-bottom[data-v-5fa8cfd1]{margin-bottom:calc(var(--window-bottom) + constant(safe-area-inset-bottom)); /* window-bottom + 适配 iPhoneX */margin-bottom:calc(var(--window-bottom) + env(safe-area-inset-bottom))}\r\n/* 显示 -- 淡入 */.mescroll-totop-in[data-v-5fa8cfd1]{opacity:1}\r\n/* 隐藏 -- 淡出且不接收事件*/.mescroll-totop-out[data-v-5fa8cfd1]{opacity:0;pointer-events:none}",""]),t.exports=e},"263c":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.goods-recommend[data-v-3fd00442]{margin-top:%?74?%;width:100vw}.goods-recommend .goods-recommend-title[data-v-3fd00442]{text-align:center;margin-bottom:%?40?%}.goods-recommend .goods-recommend-title uni-image[data-v-3fd00442]{width:%?690?%;height:%?40?%}.hr-view[data-v-3fd00442]{display:flex;justify-content:center;align-items:center;max-width:100%;box-sizing:initial;font-size:%?32?%}.hr-view .hr[data-v-3fd00442]{width:36%;height:%?2?%;background:#e5e5e5}.hr-view .title[data-v-3fd00442]{padding:0 %?20?%}.goods-list.double-column[data-v-3fd00442]{display:flex;flex-wrap:wrap;margin:0 %?30?%}.goods-list.double-column .goods-item[data-v-3fd00442]{flex:1;position:relative;background-color:#fff;flex-basis:48%;max-width:calc((100% - %?30?%) / 2);margin-right:%?30?%;margin-bottom:%?20?%;border-radius:%?10?%}.goods-list.double-column .goods-item[data-v-3fd00442]:nth-child(2n){margin-right:0}.goods-list.double-column .goods-item .goods-img[data-v-3fd00442]{position:relative;overflow:hidden;padding-top:100%;border-top-left-radius:%?10?%;border-top-right-radius:%?10?%}.goods-list.double-column .goods-item .goods-img uni-image[data-v-3fd00442]{width:100%;position:absolute;top:0;bottom:0;left:0;right:0}.goods-list.double-column .goods-item .goods-tag[data-v-3fd00442]{color:#fff;line-height:1;padding:%?8?% %?16?%;position:absolute;border-bottom-right-radius:%?10?%;top:0;left:0;font-size:%?22?%}.goods-list.double-column .goods-item .goods-tag-img[data-v-3fd00442]{position:absolute;border-top-left-radius:%?10?%;width:%?80?%;height:%?80?%;top:0;left:0;z-index:5;overflow:hidden}.goods-list.double-column .goods-item .goods-tag-img uni-image[data-v-3fd00442]{width:100%;height:100%}.goods-list.double-column .goods-item .info-wrap[data-v-3fd00442]{padding:0 %?26?% %?26?% %?26?%}.goods-list.double-column .goods-item .goods-name[data-v-3fd00442]{font-size:%?28?%;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-top:%?20?%;height:%?68?%}.goods-list.double-column .goods-item .discount-price[data-v-3fd00442]{display:inline-block;font-weight:700;line-height:1;margin-top:%?16?%;color:var(--price-color)}.goods-list.double-column .goods-item .discount-price .unit[data-v-3fd00442]{margin-right:%?6?%}.goods-list.double-column .goods-item .pro-info[data-v-3fd00442]{display:flex;margin-top:auto}.goods-list.double-column .goods-item .pro-info .delete-price[data-v-3fd00442]{text-decoration:line-through;flex:1}.goods-list.double-column .goods-item .pro-info .delete-price .unit[data-v-3fd00442]{margin-right:%?6?%}.goods-list.double-column .goods-item .pro-info > uni-view[data-v-3fd00442]{line-height:1}.goods-list.double-column .goods-item .pro-info > uni-view[data-v-3fd00442]:nth-child(2){text-align:right}.goods-list.double-column .goods-item .member-price-tag[data-v-3fd00442]{display:inline-block;width:%?60?%;line-height:1;margin-left:%?6?%}.goods-list.double-column .goods-item .member-price-tag uni-image[data-v-3fd00442]{width:100%}',""]),t.exports=e},"2a43":function(t,e,i){"use strict";i.r(e);var o=i("f93f"),a=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=a.a},"34c4":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.sku-layer .sku-info[data-v-5be15a79]{max-height:75vh;height:45vh;position:relative;z-index:999}.sku-layer .sku-info .header[data-v-5be15a79]{padding:%?30?% %?30?% %?20?% %?210?%;position:relative;border-bottom:%?2?% solid #eee;min-height:%?170?%}.sku-layer .sku-info .header .img-wrap[data-v-5be15a79]{width:%?160?%;height:%?160?%;position:absolute;left:%?20?%;border-radius:%?10?%;overflow:hidden;padding:%?2?%;background-color:#fff;line-height:%?208?%}.sku-layer .sku-info .header .img-wrap uni-image[data-v-5be15a79]{width:100%;height:100%}.sku-layer .sku-info .main[data-v-5be15a79]{font-size:%?24?%;line-height:%?40?%;padding-right:%?40?%}.sku-layer .sku-info .main .price-wrap[data-v-5be15a79]{font-weight:700}.sku-layer .sku-info .main .price-wrap .unit[data-v-5be15a79]{margin-right:%?4?%}.sku-layer .sku-info .main .stock[data-v-5be15a79]{font-size:%?24?%;color:#909399;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;height:%?70?%;overflow:hidden}.sku-layer .sku-info .main .price[data-v-5be15a79]{word-wrap:break-word}.sku-layer .sku-info .main .sku-name[data-v-5be15a79]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;height:%?42?%}.sku-layer .sku-info .main .sku-name .spec-value[data-v-5be15a79]::after{content:"/"}.sku-layer .sku-info .main .sku-name .spec-value[data-v-5be15a79]:last-child::after{content:""}.sku-layer .sku-info .sku-close[data-v-5be15a79]{position:absolute;top:%?20?%;right:%?40?%;width:%?40?%;height:%?80?%;font-size:%?40?%}.sku-layer .body-item[data-v-5be15a79]{padding:0 %?30?%;height:calc(100% - %?360?%);box-sizing:border-box;overflow:scroll}.sku-layer .body-item .wrap[data-v-5be15a79]{height:calc(100% - %?60?%)}.sku-layer .body-item .sku-list-wrap[data-v-5be15a79]{padding-bottom:%?0?%}.sku-layer .body-item .sku-list-wrap .title[data-v-5be15a79]{padding:%?20?% 0;display:block}.sku-layer .body-item .sku-list-wrap .items[data-v-5be15a79]{position:relative;display:inline-block;border:%?2?% solid #eee;padding:%?4?% %?30?%;border-radius:%?8?%;margin:0 %?20?% %?20?% 0;background-color:#fff;font-size:%?24?%}.sku-layer .body-item .sku-list-wrap .items.disabled[data-v-5be15a79]{border:%?2?% dashed}.sku-layer .body-item .sku-list-wrap .items uni-image[data-v-5be15a79]{height:%?44?%;width:%?44?%;border-radius:%?10?%;margin-right:%?10?%;display:inline-block;vertical-align:middle}.sku-layer .body-item .number-wrap .number-line[data-v-5be15a79]{padding:%?20?% 0;line-height:%?72?%}.sku-layer .body-item .number-wrap .title[data-v-5be15a79]{font-weight:400}.sku-layer .body-item .number-wrap .number[data-v-5be15a79]{display:flex;height:%?72?%;border-radius:%?6?%;float:right}.sku-layer .body-item .number-wrap .number uni-button[data-v-5be15a79]{display:inline-block;line-height:%?64?%;height:%?68?%;width:%?60?%;font-size:%?48?%;box-sizing:initial;border:%?2?% solid #eee;padding:0;margin:0;border-radius:0;background-color:#fff!important}.sku-layer .body-item .number-wrap .number uni-button.disabled[data-v-5be15a79]{background:#f7f7f7!important}.sku-layer .body-item .number-wrap .number uni-button.decrease[data-v-5be15a79]{border-right-width:0!important}.sku-layer .body-item .number-wrap .number uni-button.increase[data-v-5be15a79]{border-left:0!important}.sku-layer .body-item .number-wrap .number uni-button[data-v-5be15a79]:after{border-radius:0;border:none}.sku-layer .body-item .number-wrap .number uni-input[data-v-5be15a79]{display:inline-block;line-height:%?64?%;height:%?68?%;width:%?72?%;text-align:center;font-weight:700;border:%?2?% solid;margin:0;padding:0;vertical-align:top;background-color:#f8f8f8!important}.sku-layer .footer[data-v-5be15a79]{height:%?100?%;width:100%;position:absolute;bottom:%?30?%;bottom:calc(%?30?% + constant(safe-area-inset-bottom));bottom:calc(%?30?% + env(safe-area-inset-bottom));color:#fff;z-index:1;display:flex;justify-content:center;align-items:flex-start}.sku-layer .footer uni-button[data-v-5be15a79]{width:100%;height:%?80?%;background-color:var(--goods-btn-color);font-weight:700}',""]),t.exports=e},"42e9":function(t,e,i){var o=i("34c4");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=i("4f06").default;a("339216d2",o,!0,{sourceMap:!1,shadowMode:!1})},"4f34":function(t,e,i){"use strict";var o;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-image",{staticClass:"mescroll-totop",class:[t.value?"mescroll-totop-in":"mescroll-totop-out"],attrs:{src:t.$util.img("public/uniapp/common/mescroll-totop.png"),mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toTopClick.apply(void 0,arguments)}}})},s=[]},6113:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var o={uniPopup:i("6636").default,nsLogin:i("5a49").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"goods-sku",on:{touchmove:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("uni-popup",{ref:"skuPopup",staticClass:"sku-layer",attrs:{type:"bottom"}},[i("v-uni-view",{staticClass:"sku-info",style:{height:t.goodsDetail.goods_spec_format?48+9.5*t.goodsDetail.goods_spec_format.length+"vh":"48vh"}},[i("v-uni-view",{staticClass:"header"},[i("v-uni-view",{staticClass:"img-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewMedia()}}},[i("v-uni-image",{attrs:{src:t.$util.img(t.goodsDetail.sku_image,{size:"mid"}),mode:"aspectFit"},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.imageError()}}})],1),i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"price-wrap"},[i("v-uni-text",{staticClass:"unit price-style small"},[t._v("￥")]),t.goodsDetail.discount_price>0?[t.goodsDetail.member_price?[t.showPrice(t.goodsDetail.discount_price)<t.showPrice(t.goodsDetail.member_price)?i("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.discount_price).toFixed(2).split(".")[0]))]):i("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.member_price).toFixed(2).split(".")[0]))]),t.showPrice(t.goodsDetail.discount_price)<t.showPrice(t.goodsDetail.member_price)?i("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.discount_price).toFixed(2).split(".")[1]))]):i("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.member_price).toFixed(2).split(".")[1]))])]:[t.showPrice(t.goodsDetail.discount_price)<t.showPrice(t.goodsDetail.price)?i("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.discount_price).toFixed(2).split(".")[0]))]):i("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.price).toFixed(2).split(".")[0]))]),t.showPrice(t.goodsDetail.discount_price)<t.showPrice(t.goodsDetail.price)?i("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.discount_price).toFixed(2).split(".")[1]))]):i("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.price).toFixed(2).split(".")[1]))])]]:[t.goodsDetail.member_price?i("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.member_price).toFixed(2).split(".")[0]))]):i("v-uni-text",{staticClass:"price price-style large"},[t._v(t._s(parseFloat(t.goodsDetail.price).toFixed(2).split(".")[0]))]),t.goodsDetail.member_price?i("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.member_price).toFixed(2).split(".")[1]))]):i("v-uni-text",{staticClass:"unit price-style small"},[t._v("."+t._s(parseFloat(t.goodsDetail.price).toFixed(2).split(".")[1]))])]],2),i("v-uni-view",{staticClass:"stock"},[t.goodsDetail.stock_show?[t._v("库存"+t._s(t.goodsDetail.stock)+t._s(t.goodsDetail.unit))]:t._e()],2),t.goodsDetail.sku_spec_format?i("v-uni-view",{staticClass:"sku-name font-size-tag"},[i("v-uni-text",{staticClass:"color-tip"},[t._v("已选规格：")]),t._l(t.goodsDetail.sku_spec_format,(function(e,o){return i("v-uni-text",{key:o,staticClass:"spec-value"},[t._v(t._s(e.spec_value_name))])}))],2):t._e()],1),i("v-uni-view",{staticClass:"sku-close iconfont iconclose",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeSkuPopup()}}})],1),i("v-uni-view",{staticClass:"body-item"},[i("v-uni-scroll-view",{staticClass:"wrap",attrs:{"scroll-y":!0}},[t._l(t.goodsDetail.goods_spec_format,(function(e,o){return i("v-uni-view",{key:o,staticClass:"sku-list-wrap"},[i("v-uni-text",{staticClass:"title font-size-base"},[t._v(t._s(e.spec_name))]),t._l(e.value,(function(e,a){return i("v-uni-view",{key:a,staticClass:"items",class:{selected:e["selected"]||t.skuId==e.sku_id,disabled:e["disabled"]||!e["selected"]&&t.disabled},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.change(e.sku_id,e.spec_id)}}},[e.image?i("v-uni-image",{attrs:{src:t.$util.img(e.image,{size:"small"})},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.valueImageError(o,a)}}}):t._e(),i("v-uni-text",[t._v(t._s(e.spec_value_name))])],1)}))],2)})),i("v-uni-view",{staticClass:"number-wrap"},[i("v-uni-view",{staticClass:"number-line"},[i("v-uni-text",{staticClass:"title font-size-base"},[t._v("购买数量")]),t.limitNumber>0?i("v-uni-text",{staticClass:"limit-txt color-base-text"},[t._v("(每人限购"+t._s(t.limitNumber)+t._s(t.goodsDetail.unit)+")")]):t._e(),t.maxBuy>0&&t.minBuy>1?i("v-uni-text",{staticClass:"limit-txt color-base-text"},[t._v("("+t._s(t.minBuy)+t._s(t.goodsDetail.unit)+"起售，限购"+t._s(t.maxBuy)+t._s(t.goodsDetail.unit)+")")]):t.maxBuy>0?i("v-uni-text",{staticClass:"limit-txt color-base-text"},[t._v("(限购"+t._s(t.maxBuy)+t._s(t.goodsDetail.unit)+")")]):t.minBuy>1?i("v-uni-text",{staticClass:"limit-txt color-base-text"},[t._v("("+t._s(t.minBuy)+t._s(t.goodsDetail.unit)+"起售)")]):t._e(),i("v-uni-view",{staticClass:"number"},[i("v-uni-button",{staticClass:"decrease color-line-border",class:{disabled:t.decreaseDisabled},attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeNum("-")}}},[t._v("-")]),i("v-uni-input",{staticClass:"uni-input color-line-border font-size-goods-tag",attrs:{type:"number",placeholder:"0"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.blur.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),t.keyInput(!1)}},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}}),i("v-uni-button",{staticClass:"increase color-line-border",class:{disabled:t.increaseDisabled},attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeNum("+")}}},[t._v("+")])],1)],1)],1)],2)],1),i("v-uni-view",{staticClass:"footer",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm()}}},[t.goodsDetail.stock&&0!=t.goodsDetail.stock&&"join_cart"==t.type?i("v-uni-button",{attrs:{type:"primary"}},[t._v("加入购物车")]):t.goodsDetail.stock&&0!=t.goodsDetail.stock&&"buy_now"==t.type?i("v-uni-button",{attrs:{type:"primary"}},[t._v("立即购买")]):t.goodsDetail.stock&&0!=t.goodsDetail.stock&&"confirm"==t.type?i("v-uni-button",{attrs:{type:"primary"}},[t._v("确认")]):t.goodsDetail.stock&&0!=t.goodsDetail.stock?[t.goodsDetail.buy_num?[t.goodsDetail.buy_num<=t.goodsDetail.stock?i("v-uni-button",{attrs:{type:"primary"}},[t._v("立即抢购")]):i("v-uni-button",{attrs:{type:"primary",disabled:"true"}},[t._v("库存不足")])]:[i("v-uni-button",{attrs:{type:"primary"}},[t._v("立即抢购")])]]:i("v-uni-button",{attrs:{type:"primary",disabled:"true"}},[t._v("库存不足")])],2)],1)],1),i("ns-login",{ref:"login"})],1)},s=[]},6496:function(t,e,i){var o=i("263c");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=i("4f06").default;a("6e8ce917",o,!0,{sourceMap:!1,shadowMode:!1})},"73e8":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var o={nsLoading:i("a250").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"goods-recommend"},[t.list.length?i("v-uni-view",[i("v-uni-view",{staticClass:"goods-recommend-title"},[i("v-uni-image",{attrs:{src:t.$util.img("public/uniapp/goods/guess-like.png")}})],1),i("v-uni-view",{staticClass:"goods-list double-column"},t._l(t.list,(function(e,o){return i("v-uni-view",{key:o,staticClass:"goods-item margin-bottom",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toDetail(e)}}},[i("v-uni-view",{staticClass:"goods-img"},[i("v-uni-image",{attrs:{src:t.goodsImg(e.goods_image),mode:"widthFix","lazy-load":!0},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.imgError(o)}}}),""!=t.goodsTag(e)?i("v-uni-view",{staticClass:"color-base-bg goods-tag"},[t._v(t._s(t.goodsTag(e)))]):t._e()],1),i("v-uni-view",{staticClass:"info-wrap"},[i("v-uni-view",{staticClass:"name-wrap"},[i("v-uni-view",{staticClass:"goods-name"},[t._v(t._s(e.goods_name))])],1),i("v-uni-view",{staticClass:"lineheight-clear"},[i("v-uni-view",{staticClass:"discount-price"},[i("v-uni-text",{staticClass:"unit  price-style small"},[t._v(t._s(t.$lang("common.currencySymbol")))]),i("v-uni-text",{staticClass:"price  price-style large"},[t._v(t._s(parseFloat(t.showPrice(e)).toFixed(2).split(".")[0]))]),i("v-uni-text",{staticClass:"unit  price-style small"},[t._v("."+t._s(parseFloat(t.showPrice(e)).toFixed(2).split(".")[1]))])],1),e.member_price&&e.member_price==t.showPrice(e)?i("v-uni-view",{staticClass:"member-price-tag"},[i("v-uni-image",{attrs:{src:t.$util.img("public/uniapp/index/VIP.png"),mode:"widthFix"}})],1):1==e.promotion_type?i("v-uni-view",{staticClass:"member-price-tag"},[i("v-uni-image",{attrs:{src:t.$util.img("public/uniapp/index/discount.png"),mode:"widthFix"}})],1):t._e()],1),i("v-uni-view",{staticClass:"pro-info"},[i("v-uni-view",{staticClass:"delete-price font-size-activity-tag color-tip price-font"},[[i("v-uni-text",{staticClass:"unit"},[t._v(t._s(t.$lang("common.currencySymbol")))]),t._v(t._s(e.market_price>0?e.market_price:e.price))]],2),e.sale_show?i("v-uni-view",{staticClass:"sale font-size-activity-tag color-tip"},[t._v("已售"+t._s(e.sale_num)+t._s(e.unit?e.unit:"件"))]):t._e()],1)],1)],1)})),1)],1):t._e(),t.showLoading&&t.load?i("v-uni-view",{staticClass:"circle-box"},[i("ns-loading")],1):t._e()],1)},s=[]},"7b31":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"UniPopup",props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},custom:{type:Boolean,default:!1},maskClick:{type:Boolean,default:!0},show:{type:Boolean,default:!0}},data:function(){return{ani:"",showPopup:!1,callback:null,isIphoneX:!1}},watch:{show:function(t){t?this.open():this.close()}},created:function(){this.isIphoneX=this.$util.uniappIsIPhoneX()},methods:{clear:function(){},open:function(t){var e=this;t&&(this.callback=t),this.$emit("change",{show:!0}),this.showPopup=!0,this.$nextTick((function(){setTimeout((function(){e.ani="uni-"+e.type}),30)}))},close:function(t,e){var i=this;!this.maskClick&&t||(this.$emit("change",{show:!1}),this.ani="",this.$nextTick((function(){setTimeout((function(){i.showPopup=!1}),300)})),e&&e(),this.callback&&this.callback.call(this))}}};e.default=o},"8b26":function(t,e,i){"use strict";i.r(e);var o=i("7b31"),a=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=a.a},"8c6d":function(t,e,i){"use strict";var o=i("4ea4");i("c975"),i("13d5"),i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("5319"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("6d92")),s=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,n=/^<\/([-A-Za-z0-9_]+)[^>]*>/,r=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,u=g("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),l=g("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),d=g("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),c=g("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),p=g("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),m=g("script,style");function f(t,e){var i,o,a,f=[],g=t;f.last=function(){return this[this.length-1]};while(t){if(o=!0,f.last()&&m[f.last()])t=t.replace(new RegExp("([\\s\\S]*?)</"+f.last()+"[^>]*>"),(function(t,i){return i=i.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),e.chars&&e.chars(i),""})),v("",f.last());else if(0==t.indexOf("\x3c!--")?(i=t.indexOf("--\x3e"),i>=0&&(e.comment&&e.comment(t.substring(4,i)),t=t.substring(i+3),o=!1)):0==t.indexOf("</")?(a=t.match(n),a&&(t=t.substring(a[0].length),a[0].replace(n,v),o=!1)):0==t.indexOf("<")&&(a=t.match(s),a&&(t=t.substring(a[0].length),a[0].replace(s,b),o=!1)),o){i=t.indexOf("<");var h=i<0?t:t.substring(0,i);t=i<0?"":t.substring(i),e.chars&&e.chars(h)}if(t==g)throw"Parse Error: "+t;g=t}function b(t,i,o,a){if(i=i.toLowerCase(),l[i])while(f.last()&&d[f.last()])v("",f.last());if(c[i]&&f.last()==i&&v("",i),a=u[i]||!!a,a||f.push(i),e.start){var s=[];o.replace(r,(function(t,e){var i=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:p[e]?e:"";s.push({name:e,value:i,escaped:i.replace(/(^|[^\\])"/g,'$1\\"')})})),e.start&&e.start(i,s,a)}}function v(t,i){if(i){for(o=f.length-1;o>=0;o--)if(f[o]==i)break}else var o=0;if(o>=0){for(var a=f.length-1;a>=o;a--)e.end&&e.end(f[a]);f.length=o}}v()}function g(t){for(var e={},i=t.split(","),o=0;o<i.length;o++)e[i[o]]=!0;return e}function h(t){return t.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"")}function b(t){t=t.replace(/<!--[\s\S]*-->/gi,"");return t}function v(t){var e="100%",i='<img style="width:100% !important;display:block;max-width: '.concat(e,' !important;"');t=t.replace(/\\/g,"").replace(/<img/g,i);return t=t.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,(function(t,e){return i+' src="'+a.default.img(e)+'"/>'})),t}function _(t){t=t.replace(/style\s*=\s*["][^>]*;[^"]?/gi,(function(t,e){return t=t.replace(/[:](\s?)[\s\S]*/gi,(function(t,e){return t.replace(/"/g,"'")})),t}));return t}function w(t){return t.reduce((function(t,e){var i=e.value,o=e.name;return t[o]?t[o]=t[o]+" "+i:t[o]=i,t}),{})}function k(t){t=h(t),t=b(t),t=v(t),t=_(t);var e=[],i={node:"root",children:[]};return f(t,{start:function(t,o,a){var s={name:t};if(0!==o.length&&(s.attrs=w(o)),a){var n=e[0]||i;n.children||(n.children=[]),n.children.push(s)}else e.unshift(s)},end:function(t){var o=e.shift();if(o.name!==t&&console.error("invalid state: mismatch end tag"),0===e.length)i.children.push(o);else{var a=e[0];a.children||(a.children=[]),a.children.push(o)}},chars:function(t){var o={type:"text",text:t};if(0===e.length)i.children.push(o);else{var a=e[0];a.children||(a.children=[]),a.children.push(o)}},comment:function(t){var i={node:"comment",text:t},o=e[0];o.children||(o.children=[]),o.children.push(i)}}),i.children}var y=k;e.default=y},"8d7ec":function(t,e,i){"use strict";var o;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showPopup?i("v-uni-view",{staticClass:"uni-popup"},[i("v-uni-view",{staticClass:"uni-popup__mask",class:[t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(!0)}}}),t.isIphoneX?i("v-uni-view",{staticClass:"uni-popup__wrapper safe-area",class:[t.type,t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(!0)}}},[i("v-uni-view",{staticClass:"uni-popup__wrapper-box",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}},[t._t("default")],2)],1):i("v-uni-view",{staticClass:"uni-popup__wrapper",class:[t.type,t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(!0)}}},[i("v-uni-view",{staticClass:"uni-popup__wrapper-box",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}},[t._t("default")],2)],1)],1):t._e()},s=[]},"9a1a":function(t,e,i){"use strict";i.r(e);var o=i("73e8"),a=i("04db");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("e514");var n,r=i("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"3fd00442",null,!1,o["a"],n);e["default"]=u.exports},a216:function(t,e,i){"use strict";var o=i("f3f7"),a=i.n(o);a.a},baf0:function(t,e,i){"use strict";i.r(e);var o=i("8d7ec"),a=i("8b26");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("a216");var n,r=i("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"159bd814",null,!1,o["a"],n);e["default"]=u.exports},d0b8:function(t,e,i){"use strict";i.r(e);var o=i("4f34"),a=i("2a43");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("efb6");var n,r=i("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"5fa8cfd1",null,!1,o["a"],n);e["default"]=u.exports},d100:function(t,e,i){"use strict";var o=i("4ea4");i("99af"),i("a9e3"),i("d3b7"),i("acd8"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("a250")),s={name:"ns-goods-recommend",components:{nsLoading:a.default},data:function(){return{list:[],page:1,isAll:!0,isClick:!0,showLoading:!1}},props:{isLike:{type:Boolean,default:!0},size:{type:[Number,String],default:10},auto:{type:Boolean,default:!0},load:{type:Boolean,default:!0},route:{type:String,default:""}},mounted:function(){this.auto&&this.getLikeList()},methods:{init:function(){this.list=[],this.page=1},toDetail:function(t){var e={goods_id:t.goods_id};this.$util.redirectTo("/pages/goods/detail",e)},getLikeList:function(t){var e=this,i=this;if(this.isClick&&this.isAll)return this.isClick=!1,this.page>1&&(this.showLoading=!0),new Promise((function(o,a){i.$api.sendRequest({url:"/api/goodssku/recommend",data:{page:e.page,page_size:e.auto?e.size:t,route:e.route},success:function(t){e.showLoading=!1,e.isClick=!0,0==t.code&&(1==e.page&&(e.list=[]),e.list=e.list.concat(t.data.list),e.list.length==t.data.count&&(e.isAll=!1),e.page+=1,o(t.data.list))}})}))},goodsImg:function(t){var e=t.split(",");return e[0]?this.$util.img(e[0],{size:"mid"}):this.$util.getDefaultImage().goods},imgError:function(t){this.list[t].goods_image=this.$util.getDefaultImage().goods},showPrice:function(t){var e=t.discount_price;return t.member_price&&parseFloat(t.member_price)<parseFloat(e)&&(e=t.member_price),e},goodsTag:function(t){return t.label_name||""}}};e.default=s},d22c:function(t,e,i){var o=i("1d9e");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=i("4f06").default;a("e9499ba0",o,!0,{sourceMap:!1,shadowMode:!1})},da0d:function(t,e,i){"use strict";i.r(e);var o=i("ed64"),a=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);e["default"]=a.a},df10:function(t,e,i){"use strict";i.r(e);var o=i("6113"),a=i("da0d");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("ed55");var n,r=i("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"5be15a79",null,!1,o["a"],n);e["default"]=u.exports},dfff:function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";.uni-popup[data-v-159bd814]{position:fixed;top:0;top:0;bottom:0;left:0;right:0;z-index:999;overflow:hidden}.uni-popup__mask[data-v-159bd814]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:998;background:rgba(0,0,0,.4);opacity:0}.uni-popup__mask.ani[data-v-159bd814]{transition:all .3s}.uni-popup__mask.uni-bottom[data-v-159bd814],\r\n.uni-popup__mask.uni-center[data-v-159bd814],\r\n.uni-popup__mask.uni-right[data-v-159bd814],\r\n.uni-popup__mask.uni-left[data-v-159bd814],\r\n.uni-popup__mask.uni-top[data-v-159bd814]{opacity:1}.uni-popup__wrapper[data-v-159bd814]{position:absolute;z-index:999;box-sizing:border-box;background:#fff}.uni-popup__wrapper.ani[data-v-159bd814]{transition:all .3s}.uni-popup__wrapper.top[data-v-159bd814]{top:0;left:0;width:100%;-webkit-transform:translateY(-100%);transform:translateY(-100%)}.uni-popup__wrapper.bottom[data-v-159bd814]{bottom:0;left:0;width:100%;-webkit-transform:translateY(100%);transform:translateY(100%)}.uni-popup__wrapper.right[data-v-159bd814]{bottom:0;left:0;width:100%;-webkit-transform:translateX(100%);transform:translateX(100%)}.uni-popup__wrapper.left[data-v-159bd814]{bottom:0;left:0;width:100%;-webkit-transform:translateX(-100%);transform:translateX(-100%)}.uni-popup__wrapper.center[data-v-159bd814]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0}.uni-popup__wrapper-box[data-v-159bd814]{position:relative;box-sizing:border-box}.uni-popup__wrapper.uni-custom .uni-popup__wrapper-box[data-v-159bd814]{background:#fff}.uni-popup__wrapper.uni-custom.center .uni-popup__wrapper-box[data-v-159bd814]{position:relative;max-width:80%;max-height:80%;overflow-y:scroll}.uni-popup__wrapper.uni-custom.bottom .uni-popup__wrapper-box[data-v-159bd814],\r\n.uni-popup__wrapper.uni-custom.top .uni-popup__wrapper-box[data-v-159bd814]{width:100%;max-height:500px;overflow-y:scroll}.uni-popup__wrapper.uni-bottom[data-v-159bd814],\r\n.uni-popup__wrapper.uni-top[data-v-159bd814]{-webkit-transform:translateY(0);transform:translateY(0)}.uni-popup__wrapper.uni-left[data-v-159bd814],\r\n.uni-popup__wrapper.uni-right[data-v-159bd814]{-webkit-transform:translateX(0);transform:translateX(0)}.uni-popup__wrapper.uni-center[data-v-159bd814]{-webkit-transform:scale(1);transform:scale(1);opacity:1}\r\n\r\n/* isIphoneX系列手机底部安全距离 */.bottom.safe-area[data-v-159bd814]{padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}',""]),t.exports=e},e514:function(t,e,i){"use strict";var o=i("6496"),a=i.n(o);a.a},ed55:function(t,e,i){"use strict";var o=i("42e9"),a=i.n(o);a.a},ed64:function(t,e,i){"use strict";var o=i("4ea4");i("99af"),i("a9e3"),i("acd8"),i("e25e"),i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(i("baf0")),s=o(i("8c6d")),n={name:"ns-goods-sku",components:{uniPopup:a.default},props:{goodsDetail:{type:Object,default:null},disabled:{type:Boolean,default:!1},maxBuy:{type:Number,default:0},minBuy:{type:Number,default:0}},data:function(){return{isIphoneX:!1,systemInfo:{},number:1,btnSwitch:!1,type:"",callback:null,skuId:0,limitNumber:0,minNumber:0,preview:0,cartNumber:0,goodsSkuDetail:{}}},created:function(){this.isIphoneX=this.$util.uniappIsIPhoneX(),this.systemInfo=uni.getSystemInfoSync()},watch:{goodsDetail:function(t,e){this.skuId=t.sku_id},minBuy:function(t,e){this.minBuy>1&&(this.number=Number(this.minBuy))}},computed:{decreaseDisabled:function(){var t=this.minBuy>0?this.minBuy:1;return this.number<=t},increaseDisabled:function(){var t=this.maxBuy>0&&this.maxBuy<this.goodsDetail.stock?this.maxBuy:this.goodsDetail.stock;return this.number>=t}},methods:{show:function(t,e){this.callback=e,this.$refs.skuPopup.open(),this.type=t,this.skuId=this.goodsDetail.sku_id,this.preview=this.goodsDetail.preview||0,"join_cart"==this.type&&this.getCartData(),this.$forceUpdate()},hide:function(){this.$refs.skuPopup.close()},previewMedia:function(){var t=[];t.push(this.$util.img(this.goodsDetail.sku_image,{size:"big"})),uni.previewImage({current:1,urls:t})},change:function(t,e){if(!this.disabled){this.btnSwitch=!1,this.skuId=t;for(var i=0;i<this.goodsDetail.goods_spec_format.length;i++)for(var o=this.goodsDetail.goods_spec_format[i],a=0;a<o.value.length;a++)e==this.goodsDetail.goods_spec_format[i].value[a].spec_id&&(this.goodsDetail.goods_spec_format[i].value[a].selected=!1);this.getGoodsSkuInfo()}},showPrice:function(t){return parseFloat(t)},getGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/api/goodssku/info",data:{sku_id:this.skuId},success:function(e){var i=e.data;null!=i?(i.unit=i.unit||"件",t.goodsSkuDetail=i,t.dealData(),1==t.goodsSkuDetail.promotion_type&&(t.goodsSkuDetail.discountTimeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-e.timestamp)),1==t.goodsSkuDetail.promotion_type&&t.goodsSkuDetail.discountTimeMachine?t.goodsSkuDetail.member_price>0&&Number(t.goodsSkuDetail.member_price)<=Number(t.goodsSkuDetail.discount_price)?t.goodsSkuDetail.show_price=t.goodsSkuDetail.member_price:t.goodsSkuDetail.show_price=t.goodsSkuDetail.discount_price:t.goodsSkuDetail.member_price>0?t.goodsSkuDetail.show_price=t.goodsSkuDetail.member_price:t.goodsSkuDetail.show_price=t.goodsSkuDetail.price,t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail),t.$emit("GetSkuid",t.skuId),t.$emit("levelInfo",t.levelInfo),t.$forceUpdate()):t.$util.redirectTo("/pages/index/index",{},"reLaunch")},fail:function(e){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index",{},"reLaunch")}})},dealData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goodsSkuDetail;if(t.sku_images?t.sku_images=t.sku_images.split(","):t.sku_images=[],t.goods_spec_format&&t.goods_image&&(t.goods_image=t.goods_image.split(","),t.sku_images=t.goods_image.concat(t.sku_images)),t.sku_spec_format&&(t.sku_spec_format=JSON.parse(t.sku_spec_format)),t.goods_attr_format){var e=JSON.parse(t.goods_attr_format);t.goods_attr_format=this.$util.unique(e,"attr_id");for(var i=0;i<t.goods_attr_format.length;i++)for(var o=0;o<e.length;o++)t.goods_attr_format[i].attr_id==e[o].attr_id&&t.goods_attr_format[i].attr_value_id!=e[o].attr_value_id&&(t.goods_attr_format[i].attr_value_name+="、"+e[o].attr_value_name)}t.goods_spec_format&&(t.goods_spec_format=JSON.parse(t.goods_spec_format)),t.goods_content=(0,s.default)(t.goods_content),this.goodsDetail.unit=this.goodsDetail.unit||"件",this.keyInput(!0),"confirm"!=this.type&&this.$langConfig.title(t.goods_name)},changeNum:function(t){if(0!=this.goodsDetail.stock){var e=1,i=this.goodsDetail.stock;if(1==this.maxBuy&&(i=1),1==this.goodsDetail.is_limit&&this.maxBuy>0&&this.maxBuy<i&&(i=this.maxBuy),1==this.goodsDetail.is_limit&&2==this.goodsDetail.limit_type&&this.maxBuy>0&&this.goodsDetail.purchased_num>0){var o=this.maxBuy-this.goodsDetail.purchased_num;i=o<this.goodsDetail.stock?o:this.goodsDetail.stock}if(this.minBuy>1&&(e=this.minBuy),"+"==t)if(this.number<i)this.number++;else{if(this.number>=this.goodsDetail.stock)return void this.$util.showToast({title:"库存不足"});if(1==this.goodsDetail.is_limit&&this.maxBuy>0){if(1==this.goodsDetail.limit_type)return void this.$util.showToast({title:"该商品每次最多购买"+this.maxBuy+this.goodsDetail.unit});if(2==this.goodsDetail.limit_type){var a="该商品每人限购"+this.maxBuy+this.goodsDetail.unit;return a+=this.goodsDetail.purchased_num>0?"，您已购买了"+this.goodsDetail.purchased_num+this.goodsDetail.unit:"",void this.$util.showToast({title:a})}}}else if("-"==t){if(!(this.number>e))return void(this.minBuy>1&&this.$util.showToast({title:"该商品"+this.minBuy+this.goodsDetail.unit+"起售"}));this.number-=1}this.number>this.limitNumber&&this.limitNumber&&(this.number=this.limitNumber)}},blur:function(){if(this.number||(this.number=0),this.number>this.limitNumber&&this.limitNumber&&(this.number=this.limitNumber),this.number<this.minNumber&&this.minNumber&&(this.number=this.minNumber),1==this.goodsDetail.is_limit&&this.maxBuy>0&&this.number>this.maxBuy&&(this.number=this.maxBuy),1==this.goodsDetail.is_limit&&this.maxBuy>0&&this.goodsDetail.purchased_num>0){var t=this.maxBuy-this.goodsDetail.purchased_num;this.number>t&&(this.number=t)}this.number<this.minBuy&&this.minBuy>0&&(this.number=this.minBuy),this.number<=0&&(this.number=1)},keyInput:function(t,e){var i=this;setTimeout((function(){var o=i.goodsDetail.stock;0!=i.goodsDetail.stock?(t&&0==i.number.length&&(i.number=1),t&&(i.number<=0||isNaN(i.number))&&(i.number=1),i.number>o&&(i.number=o),i.minBuy>1&&i.number<i.minBuy&&(i.number=i.minBuy),t&&(i.number=parseInt(i.number)),e&&e()):i.number=0}),0)},confirm:function(){var t=this;uni.removeStorageSync("delivery"),this.preview?this.$util.showToast({title:"预览商品无法购买"}):uni.getStorageSync("token")?this.keyInput(!0,(function(){if(0!=t.goodsDetail.stock)if(0==t.number.length||t.number<=0)t.$util.showToast({title:"购买数量不能小于等于0"});else if(t.goodsDetail.buy_num>t.goodsDetail.stock)t.$util.showToast({title:"库存小于最低购买数量"});else if(t.number>t.goodsDetail.stock)t.$util.showToast({title:"库存不足"});else if(1==t.goodsDetail.is_limit&&1==t.goodsDetail.limit_type&&t.maxBuy>0&&t.number>t.maxBuy)t.$util.showToast({title:"该商品每次最多购买"+t.maxBuy+t.goodsDetail.unit});else{if(1==t.goodsDetail.is_limit&&2==t.goodsDetail.limit_type&&t.maxBuy>0&&t.number+t.goodsDetail.purchased_num>t.maxBuy){var e="该商品每人限购"+t.maxBuy+t.goodsDetail.unit;return e+=t.goodsDetail.purchased_num>0?"，您已购买了"+t.goodsDetail.purchased_num+t.goodsDetail.unit:"",void t.$util.showToast({title:e})}if("join_cart"==t.type&&1==t.goodsDetail.is_limit&&t.maxBuy>0&&t.cartNumber+t.number>t.maxBuy)t.$util.showToast({title:"该商品每人限购"+t.maxBuy+t.goodsDetail.unit});else if(!t.btnSwitch)if(t.btnSwitch=!0,"join_cart"==t.type)t.$api.sendRequest({url:"/api/cart/add",data:{sku_id:t.skuId,num:t.number},success:function(e){var i=e.data;i>0&&(t.$util.showToast({title:"加入购物车成功"}),t.cartNumber+=t.number,t.callback&&t.callback()),t.$refs.skuPopup.close(),t.btnSwitch=!1},fail:function(e){t.$refs.skuPopup.close(),t.btnSwitch=!1}});else if("buy_now"==t.type){var i={sku_id:t.skuId,num:t.number};uni.setStorage({key:"orderCreateData",data:i,success:function(){t.$util.redirectTo("/pages/order/payment"),t.btnSwitch=!1}})}else"confirm"==t.type&&(t.btnSwitch=!1,t.$refs.skuPopup.close(),t.callback&&t.callback(t.skuId,t.number))}else t.$util.showToast({title:"商品已售罄"})})):this.$refs.login.open()},closeSkuPopup:function(){this.$refs.skuPopup.close()},imageError:function(){this.goodsDetail.sku_image=this.$util.getDefaultImage().goods,this.$forceUpdate()},valueImageError:function(t,e){this.goodsDetail.goods_spec_format[t].value[e].image=this.$util.getDefaultImage().goods,this.$forceUpdate()},getCartData:function(){var t=this;this.$api.sendRequest({url:"/api/cart/goodsnum",data:{goods_id:this.goodsDetail.goods_id},success:function(e){e.code>=0&&(t.cartNumber=e.data)}})}}};e.default=n},efb6:function(t,e,i){"use strict";var o=i("d22c"),a=i.n(o);a.a},f3f7:function(t,e,i){var o=i("dfff");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=i("4f06").default;a("5f65dd9e",o,!0,{sourceMap:!1,shadowMode:!1})},f93f:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{value:!0}},methods:{toTopClick:function(){this.$emit("toTop")}}};e.default=o}}]);