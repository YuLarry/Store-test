(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-list"],{"0f93":function(e,t,a){"use strict";a.r(t);var o=a("e265"),i=a("8068");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("879f"),a("2c68");var s,n=a("f0c5"),d=Object(n["a"])(i["default"],o["b"],o["c"],!1,null,"adb4aee8",null,!1,o["a"],s);t["default"]=d.exports},"1e61":function(e,t,a){var o=a("bf5a");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("4f06").default;i("6cf1e1d9",o,!0,{sourceMap:!1,shadowMode:!1})},"2c68":function(e,t,a){"use strict";var o=a("1e61"),i=a.n(o);i.a},"3d59":function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.order-container[data-v-adb4aee8]{width:100vw}.align-right[data-v-adb4aee8]{text-align:right}.order-nav[data-v-adb4aee8]{width:100vw;height:%?90?%;flex-direction:row;white-space:nowrap;background:#fff;display:flex;position:fixed;left:0;z-index:998;justify-content:space-around}.order-nav .uni-tab-item[data-v-adb4aee8]{width:%?120?%;text-align:center}.order-nav .uni-tab-item-title[data-v-adb4aee8]{font-size:%?28?%;display:inline-block;height:%?86?%;line-height:%?90?%;border-bottom:1px solid #fff;flex-wrap:nowrap;white-space:nowrap;text-align:center;font-size:%?30?%}.order-nav .uni-tab-item-title-active[data-v-adb4aee8]{height:%?86?%;border-bottom:2px solid #fff}.order-nav[data-v-adb4aee8] ::-webkit-scrollbar{width:0;height:0;color:transparent}.order-item[data-v-adb4aee8]{margin:%?20?% %?30?%;border-radius:%?10?%;background:#fff;position:relative}.order-item .order-header[data-v-adb4aee8]{display:flex;align-items:center;position:relative;padding:%?20?% %?30?% %?26?% %?30?%}.order-item .order-header.waitpay[data-v-adb4aee8]{padding-left:%?70?%}.order-item .order-header.waitpay .iconyuan_checked[data-v-adb4aee8],\r\n.order-item .order-header.waitpay .iconyuan_checkbox[data-v-adb4aee8]{font-size:%?32?%;position:absolute;top:48%;left:%?20?%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.order-item .order-header.waitpay .iconyuan_checkbox[data-v-adb4aee8]{color:#909399}.order-item .order-header .icondianpu[data-v-adb4aee8]{display:inline-block;line-height:1;margin-right:%?12?%;font-size:%?28?%}.order-item .order-header .status-name[data-v-adb4aee8]{flex:1;text-align:right;font-size:%?28?%;font-weight:600}.order-item .order-body .goods-wrap[data-v-adb4aee8]{display:flex;position:relative;padding:0 %?30?% %?30?% %?30?%}.order-item .order-body .goods-wrap[data-v-adb4aee8]:last-of-type{margin-bottom:0}.order-item .order-body .goods-wrap .goods-img[data-v-adb4aee8]{width:%?160?%;height:%?160?%;margin-right:%?20?%}.order-item .order-body .goods-wrap .goods-img uni-image[data-v-adb4aee8]{width:100%;height:100%;border-radius:%?10?%}.order-item .order-body .goods-wrap .goods-info[data-v-adb4aee8]{flex:1;position:relative;max-width:calc(100% - %?180?%);display:flex;flex-direction:column}.order-item .order-body .goods-wrap .goods-info .pro-info[data-v-adb4aee8]{flex:1}.order-item .order-body .goods-wrap .goods-info .goods-name[data-v-adb4aee8]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;line-height:1.5;font-size:%?28?%;color:#303133}.order-item .order-body .goods-wrap .goods-info .goods-sub-section[data-v-adb4aee8]{width:100%;line-height:1.3;display:flex;margin-top:%?14?%}.order-item .order-body .goods-wrap .goods-info .goods-sub-section .goods-price[data-v-adb4aee8]{font-size:%?24?%;color:var(--price-color);flex:1;font-weight:700}.order-item .order-body .goods-wrap .goods-info .goods-sub-section .goods-num[data-v-adb4aee8]{font-size:%?24?%;color:#909399;flex:1;text-align:right;line-height:1}.order-item .order-body .goods-wrap .goods-info .goods-sub-section .goods-num .iconfont[data-v-adb4aee8]{font-size:%?24?%}.order-item .order-body .goods-wrap .goods-info .goods-sub-section .goods-type[data-v-adb4aee8]{font-size:%?24?%}.order-item .order-body .goods-wrap .goods-info .goods-sub-section .unit[data-v-adb4aee8]{font-size:%?24?%;margin-right:%?2?%}.order-item .order-body .goods-wrap .goods-info .goods-sub-section uni-view[data-v-adb4aee8]{flex:1;line-height:1.3;display:flex;flex-direction:column}.order-item .order-body .goods-wrap .goods-info .goods-sub-section uni-view[data-v-adb4aee8]:last-of-type{text-align:right}.order-item .order-body .goods-wrap .goods-info .goods-sub-section uni-view:last-of-type .iconfont[data-v-adb4aee8]{line-height:1;font-size:%?24?%}.order-item .order-body .goods-wrap .goods-info .goods-action[data-v-adb4aee8]{text-align:right}.order-item .order-body .goods-wrap .goods-info .goods-action .action-btn[data-v-adb4aee8]{line-height:1;padding:%?14?% %?20?%;color:#303133;display:inline-block;border-radius:%?10?%;background:#fff;border:%?2?% solid #999;font-size:%?24?%;margin-left:%?10?%}.order-item .order-footer .order-base-info .total[data-v-adb4aee8]{padding:%?20?%;font-size:%?24?%;background:hsla(0,0%,97.3%,.5);display:flex}.order-item .order-footer .order-base-info .total > uni-text[data-v-adb4aee8]{flex:1;line-height:1;margin-left:%?10?%}.order-item .order-footer .order-base-info .order-type[data-v-adb4aee8]{padding-top:%?20?%;flex:0.5}.order-item .order-footer .order-base-info .order-type > uni-text[data-v-adb4aee8]{line-height:1}.order-item .order-footer .order-action[data-v-adb4aee8]{text-align:right;padding:%?30?%;position:relative}.order-item .order-footer .order-action .order-time[data-v-adb4aee8]{position:absolute;top:%?35?%;left:%?30?%;display:flex;align-items:center;font-size:10px;color:#b5b6b9}.order-item .order-footer .order-action .order-time uni-image[data-v-adb4aee8]{width:%?26?%;height:%?26?%;margin-right:%?6?%}.order-item .order-footer .order-action .action-btn[data-v-adb4aee8]{line-height:1;padding:%?20?% %?26?%;color:#333;display:inline-block;border-radius:%?10?%;background:#fff;border:%?2?% solid #999;font-size:%?24?%;margin-left:%?10?%}[data-v-adb4aee8] #action-date .uni-countdown .uni-countdown__number{border:none!important;padding:0!important;margin:0!important}.order-batch-action[data-v-adb4aee8]{position:fixed;z-index:5;left:0;bottom:0;width:100vw;height:%?100?%;background:#fff;box-shadow:0 0 10px rgba(0,0,0,.1);text-align:right}.order-batch-action.bottom-safe-area[data-v-adb4aee8]{padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.order-batch-action .action-btn[data-v-adb4aee8]{height:%?68?%;line-height:%?68?%;background:#fff;padding:0 %?40?%;display:inline-block;text-align:center;margin:%?16?% %?20?% %?16?% 0;border-radius:%?10?%;border:1px solid #fff}.order-batch-action .action-btn.white[data-v-adb4aee8]{height:%?68?%;line-height:%?68?%;color:#333;border:1px solid #999;background:#fff}.sku[data-v-adb4aee8]{display:flex;line-height:1;margin-top:%?10?%}.goods-spec[data-v-adb4aee8]{color:#909399;font-size:%?22?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.cate-search[data-v-adb4aee8]{width:100%;height:%?100?%;background:#fff;padding:%?10?% %?30?%;box-sizing:border-box;padding-top:%?30?%;position:relative;z-index:998}.cate-search uni-input[data-v-adb4aee8]{font-size:%?28?%;height:%?76?%;padding:0 %?25?% 0 %?30?%;line-height:%?60?%;width:calc(100% - %?120?%)}.cate-search uni-text[data-v-adb4aee8]{font-size:%?32?%;color:#909399;width:%?120?%;text-align:center}.cate-search .search-box[data-v-adb4aee8]{width:100%;height:100%;background:#f8f8f8;display:flex;justify-content:center;align-items:center;border-radius:%?40?%}',""]),e.exports=t},8068:function(e,t,a){"use strict";a.r(t);var o=a("c319"),i=a.n(o);for(var r in o)"default"!==r&&function(e){a.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"879f":function(e,t,a){"use strict";var o=a("ee7d"),i=a.n(o);i.a},bf5a:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,"[data-v-adb4aee8] .uni-page{overflow:hidden}[data-v-adb4aee8] .mescroll-upwarp{padding-bottom:%?100?%}",""]),e.exports=t},c319:function(e,t,a){"use strict";var o=a("4ea4");a("99af"),a("4160"),a("a434"),a("d3b7"),a("acd8"),a("e25e"),a("25f0"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a("e1ab")),r=o(a("a6a3")),s={data:function(){return{scrollInto:"",orderStatus:"all",statusList:[],orderList:[],contentText:{},mergePayOrder:[],isIphoneX:!1,evaluateConfig:{evaluate_audit:1,evaluate_show:0,evaluate_status:1},orderData:{},payMoney:0,payMoneyMerge:0,token:null,order_id:0,searchText:"",pageText:""}},components:{nsPayment:r.default},mixins:[i.default],onLoad:function(e){e.status&&(this.orderStatus=e.status),e.order_id&&(this.order_id=e.order_id)},onShow:function(){var e=this;this.isIphoneX=this.$util.uniappIsIPhoneX(),this.getEvaluateConfig(),this.getOrderStatus(),uni.getStorageSync("token")?(this.token=uni.getStorageSync("token"),this.$refs.mescroll&&this.$refs.mescroll.refresh()):setTimeout((function(){e.$refs.login.open("/pages/order/list?status="+e.orderStatus)}))},methods:{ontabtap:function(e){var t=e.target.dataset.current||e.currentTarget.dataset.current;this.orderStatus=this.statusList[t].status,""==this.orderStatus&&(this.mergePayOrder=[]),this.$refs.loadingCover.show(),this.$refs.mescroll.refresh()},getListData:function(e){var t=this;this.$api.sendRequest({url:"/api/order/lists",data:{page:e.num,page_size:e.size,order_status:this.orderStatus,order_id:this.order_id,searchText:this.pageText},success:function(a){var o=[],i=a.message,r=0;0==a.code&&a.data?(o=a.data.list,r=a.data.auto_close):t.$util.showToast({title:i}),e.endSuccess(o.length),1==e.num&&(t.orderList=[],t.order_id=0),t.orderList=t.orderList.concat(o);var s=Date.parse(new Date)/1e3;t.orderList.forEach((function(e){e.discountTimeMachine=t.$util.countDown(e.create_time+r-s),e.order_goods.forEach((function(e){if(e.sku_spec_format)try{e.sku_spec_format=JSON.parse(e.sku_spec_format)}catch(t){e.sku_spec_format=e.sku_spec_format}else e.sku_spec_format=[]}))})),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(a){e.endErr(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},getOrderStatus:function(){this.statusList=[{status:"all",name:this.$lang("all"),id:"status_0"},{status:"waitpay",name:this.$lang("waitPay"),id:"status_1"},{status:"waitsend",name:this.$lang("readyDelivery"),id:"status_2"},{status:"waitconfirm",name:this.$lang("waitDelivery"),id:"status_3"},{status:"waitrate",name:this.$lang("waitEvaluate"),id:"status_4"}]},operation:function(e,t){var a=this;this.status;switch(e){case"orderPay":this.orderData=t,this.payMoney=parseFloat(t.pay_money),this.orderPay(t);break;case"orderClose":this.orderClose(t.order_id,(function(){a.$refs.mescroll.refresh()}));break;case"memberTakeDelivery":this.orderDelivery(t.order_id,(function(){a.$refs.mescroll.refresh()}));break;case"trace":this.$util.redirectTo("/pages_tool/order/logistics",{order_id:t.order_id});break;case"memberOrderEvaluation":this.$util.redirectTo("/pages_tool/order/evaluate",{order_id:t.order_id});break;case"memberVirtualTakeDelivery":this.orderVirtualDelivery(t.order_id,(function(){a.$refs.mescroll.refresh()}));break}},orderDetail:function(e){switch(parseInt(e.order_type)){case 2:this.$util.redirectTo("/pages/order/detail_pickup",{order_id:e.order_id});break;case 3:this.$util.redirectTo("/pages/order/detail_local_delivery",{order_id:e.order_id});break;case 4:this.$util.redirectTo("/pages_tool/order/detail_virtual",{order_id:e.order_id});break;default:this.$util.redirectTo("/pages/order/detail",{order_id:e.order_id});break}},selectOrder:function(e,t){-1!=this.$util.inArray(e,this.mergePayOrder)?(this.mergePayOrder.splice(this.$util.inArray(e,this.mergePayOrder),1),this.payMoneyMerge-=parseFloat(t)):(this.payMoneyMerge+=parseFloat(t),this.mergePayOrder.push(e))},mergePay:function(){var e=this;this.mergePayOrder.length&&this.$api.sendRequest({url:"/api/order/pay",data:{order_ids:this.mergePayOrder.toString()},success:function(t){t.code>=0?e.$refs.choosePaymentMergePopup.getPayInfo(t.data):e.$util.showToast({title:t.message})}})},imageError:function(e,t){this.orderList[e].order_goods[t].sku_image=this.$util.getDefaultImage().goods,this.$forceUpdate()},getEvaluateConfig:function(){var e=this;this.$api.sendRequest({url:"/api/goodsevaluate/config",success:function(t){if(0==t.code){var a=t.data;e.evaluateConfig=a}}})},search:function(){this.pageText=this.searchText,this.$refs.mescroll.refresh()}},computed:{mpOrderList:function(){if(this.orderList[this.status])return this.orderList[this.status].list||[]},storeToken:function(){return this.$store.state.token}},watch:{storeToken:function(e,t){e&&(this.token=e,this.$refs.mescroll.refresh())}}};t.default=s},e265:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return o}));var o={pageMeta:a("6d42").default,uniCountDown:a("93e2").default,nsEmpty:a("a358").default,nsPayment:a("aea7").default,nsLogin:a("5a49").default,loadingCover:a("d1a6").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("page-meta",{attrs:{"page-style":e.themeColor}}),a("v-uni-view",{staticClass:"order-container"},[a("v-uni-view",{staticClass:"cate-search"},[a("v-uni-view",{staticClass:"search-box"},[a("v-uni-input",{staticClass:"uni-input",attrs:{maxlength:"50","confirm-type":"search",placeholder:"请输入商品名称/订单编号"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.search()}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),a("v-uni-text",{staticClass:"iconfont iconsousuo1",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.search()}}})],1)],1),e.token?a("v-uni-view",{staticClass:"order-nav"},e._l(e.statusList,(function(t,o){return a("v-uni-view",{key:o,staticClass:"uni-tab-item",attrs:{id:t.id,"data-current":o},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ontabtap.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"uni-tab-item-title",class:t.status==e.orderStatus?"uni-tab-item-title-active color-base-border  color-base-text":""},[e._v(e._s(t.name))])],1)})),1):e._e(),e.token?a("mescroll-uni",{ref:"mescroll",attrs:{top:"220rpx"},on:{getData:function(t){arguments[0]=t=e.$handleEvent(t),e.getListData.apply(void 0,arguments)}}},[a("template",{attrs:{slot:"list"},slot:"list"},[e.orderList.length>0?a("v-uni-view",{staticClass:"order-list"},e._l(e.orderList,(function(t,o){return a("v-uni-view",{key:o,staticClass:"order-item"},[a("v-uni-view",{staticClass:"order-header",class:{waitpay:"waitpay"==e.orderStatus&&0==t.order_status}},["waitpay"==e.orderStatus&&0==t.order_status?a("v-uni-view",{staticClass:"iconfont",class:-1==e.$util.inArray(t.order_id,e.mergePayOrder)?"iconyuan_checkbox":"iconyuan_checked color-base-text",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.selectOrder(t.order_id,t.pay_money)}}}):e._e(),a("v-uni-text",{staticClass:"font-size-base"},[e._v("订单号："+e._s(t.order_no))]),a("v-uni-text",{staticClass:"status-name color-base-text"},[e._v(e._s(t.order_status_name))])],1),a("v-uni-view",{staticClass:"order-body",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.orderDetail(t)}}},e._l(t.order_goods,(function(t,i){return a("v-uni-view",{key:i,staticClass:"goods-wrap"},[a("v-uni-view",{staticClass:"goods-img"},[a("v-uni-image",{attrs:{src:e.$util.img(t.sku_image,{size:"mid"}),mode:"aspectFill","lazy-load":!0},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.imageError(o,i)}}})],1),a("v-uni-view",{staticClass:"goods-info"},[a("v-uni-view",{staticClass:"pro-info"},[2==t.goods_class?a("v-uni-view",{staticClass:"goods-name"},[e._v(e._s(t.goods_name))]):a("v-uni-view",{staticClass:"goods-name"},[e._v(e._s(t.sku_name))]),t.sku_spec_format?a("v-uni-view",{staticClass:"sku"},[a("v-uni-view",{staticClass:"goods-spec"},[e._l(t.sku_spec_format,(function(a,o){return[e._v(e._s(a.spec_value_name)+" "+e._s(o<t.sku_spec_format.length-1?"; ":""))]}))],2)],1):e._e()],1),a("v-uni-view",{staticClass:"goods-sub-section"},[a("v-uni-text",{staticClass:"goods-price"},[a("v-uni-text",{staticClass:"unit price-style small"},[e._v(e._s(e.$lang("common.currencySymbol")))]),a("v-uni-text",{staticClass:"price-style large"},[e._v(e._s(parseFloat(t.price).toFixed(2).split(".")[0]))]),a("v-uni-text",{staticClass:"unit price-style small"},[e._v("."+e._s(parseFloat(t.price).toFixed(2).split(".")[1]))])],1),a("v-uni-text",{staticClass:"goods-num"},[a("v-uni-text",{staticClass:"iconfont iconclose"}),e._v(e._s(t.num))],1)],1),a("v-uni-view",{staticClass:"goods-action"})],1)],1)})),1),a("v-uni-view",{staticClass:"order-footer"},[a("v-uni-view",{staticClass:"order-base-info"},[a("v-uni-view",{staticClass:"total"},[a("v-uni-text",{staticClass:"font-size-sub"},[e._v("共"+e._s(t.goods_num)+"件商品")]),a("v-uni-text",{staticClass:"align-right font-size-base"},[e._v("实付款："),a("v-uni-text",{staticClass:"font-size-base price-font"},[e._v(e._s(e.$lang("common.currencySymbol"))+e._s(t.order_money))])],1)],1)],1),t.action.length>0?a("v-uni-view",{staticClass:"order-action"},[0==t.order_status?a("v-uni-view",{staticClass:"order-time",attrs:{id:"action-date"}},[a("v-uni-image",{attrs:{src:e.$util.img("public/uniapp/order/time.png")}}),e._v("剩余时间："),a("uni-count-down",{attrs:{day:t.discountTimeMachine.d,hour:t.discountTimeMachine.h,minute:t.discountTimeMachine.i,second:t.discountTimeMachine.s,color:"#FF4644",splitorColor:"#FF4644"}})],1):e._e(),1==e.evaluateConfig.evaluate_status&&1==t.is_evaluate?a("v-uni-view",{staticClass:"order-box-btn",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.operation("memberOrderEvaluation",t)}}},[0==t.evaluate_status?a("v-uni-text",[e._v("评价")]):1==t.evaluate_status?a("v-uni-text",[e._v("追评")]):e._e()],1):e._e(),e._l(t.action,(function(o,i){return a("v-uni-view",{key:i,staticClass:"order-box-btn",class:{"color-base-border color-base-text":"orderPay"==o.action},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.operation(o.action,t)}}},[e._v(e._s(o.title))])}))],2):0==t.action.length&&1==t.is_evaluate&&1==e.evaluateConfig.evaluate_status?a("v-uni-view",{staticClass:"order-action"},[1==t.is_evaluate?a("v-uni-view",{staticClass:"order-box-btn",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.operation("memberOrderEvaluation",t)}}},[0==t.evaluate_status?a("v-uni-text",[e._v("评价")]):1==t.evaluate_status?a("v-uni-text",[e._v("追评")]):e._e()],1):e._e()],1):a("v-uni-view",{staticClass:"order-action"},[a("v-uni-view",{staticClass:"order-box-btn color-base-border color-base-text",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.orderDetail(t)}}},[e._v("查看详情")])],1)],1)],1)})),1):a("v-uni-view",[a("ns-empty",{attrs:{isIndex:!1,text:e.$lang("emptyTips")}})],1)],1)],2):e._e(),e.mergePayOrder.length?a("v-uni-view",{staticClass:"order-batch-action",class:{"bottom-safe-area":e.isIphoneX}},[a("v-uni-view",{staticClass:"action-btn color-base-text color-base-border",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.mergePay()}}},[e._v("合并付款")])],1):e._e(),a("ns-payment",{ref:"choosePaymentPopup"}),a("ns-payment",{ref:"choosePaymentMergePopup"}),a("ns-login",{ref:"login"}),a("loading-cover",{ref:"loadingCover"})],1)],1)},r=[]},ee7d:function(e,t,a){var o=a("3d59");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("4f06").default;i("a579127e",o,!0,{sourceMap:!1,shadowMode:!1})}}]);