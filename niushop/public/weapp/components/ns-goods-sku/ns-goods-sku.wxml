<view data-event-opts="{{[['touchmove',[['',['$event']]]]]}}" class="goods-sku" catchtouchmove="__e"><uni-popup class="sku-layer vue-ref" vue-id="18423b42-1" type="bottom" data-ref="skuPopup" bind:__l="__l" vue-slots="{{['default']}}"><view class="sku-info" style="{{'height:'+(goodsDetail.goods_spec_format?48+goodsDetail.goods_spec_format.length*9.5+'vh':'48vh')+';'}}"><view class="header"><view data-event-opts="{{[['tap',[['previewMedia']]]]}}" class="img-wrap" bindtap="__e"><image src="{{$root.g0}}" mode="aspectFit" data-event-opts="{{[['error',[['imageError']]]]}}" binderror="__e"></image></view><view class="main"><view class="price-wrap"><text class="unit price-style small">￥</text><block wx:if="{{goodsDetail.discount_price>0}}"><block><block wx:if="{{goodsDetail.member_price}}"><block><block wx:if="{{$root.m0<$root.m1}}"><text class="price price-style large">{{$root.g1[0]}}</text></block><block wx:else><text class="price price-style large">{{$root.g2[0]}}</text></block><block wx:if="{{$root.m2<$root.m3}}"><text class="unit price-style small">{{"."+$root.g3[1]}}</text></block><block wx:else><text class="unit price-style small">{{"."+$root.g4[1]}}</text></block></block></block><block wx:else><block><block wx:if="{{$root.m4<$root.m5}}"><text class="price price-style large">{{$root.g5[0]}}</text></block><block wx:else><text class="price price-style large">{{$root.g6[0]}}</text></block><block wx:if="{{$root.m6<$root.m7}}"><text class="unit price-style small">{{"."+$root.g7[1]}}</text></block><block wx:else><text class="unit price-style small">{{"."+$root.g8[1]}}</text></block></block></block></block></block><block wx:else><block><block wx:if="{{goodsDetail.member_price}}"><text class="price price-style large">{{$root.g9[0]}}</text></block><block wx:else><text class="price price-style large">{{$root.g10[0]}}</text></block><block wx:if="{{goodsDetail.member_price}}"><text class="unit price-style small">{{"."+$root.g11[1]}}</text></block><block wx:else><text class="unit price-style small">{{"."+$root.g12[1]}}</text></block></block></block></view><view class="stock"><block wx:if="{{goodsDetail.stock_show}}"><block>{{"库存"+goodsDetail.stock+goodsDetail.unit}}</block></block></view><block wx:if="{{goodsDetail.sku_spec_format}}"><view class="sku-name font-size-tag"><text class="color-tip">已选规格：</text><block wx:for="{{goodsDetail.sku_spec_format}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text class="spec-value">{{item.spec_value_name}}</text></block></view></block></view><view data-event-opts="{{[['tap',[['closeSkuPopup']]]]}}" class="sku-close iconfont iconclose" bindtap="__e"></view></view><view class="body-item"><scroll-view class="wrap" scroll-y="{{true}}"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="sku-list-wrap"><text class="title font-size-base">{{item.$orig.spec_name}}</text><block wx:for="{{item.l0}}" wx:for-item="item_value" wx:for-index="index_value" wx:key="index_value"><view data-event-opts="{{[['tap',[['change',['$0','$1'],[[['goodsDetail.goods_spec_format','',index],['value','',index_value,'sku_id']],[['goodsDetail.goods_spec_format','',index],['value','',index_value,'spec_id']]]]]]]}}" class="{{['items',(item_value.$orig['selected']||skuId==item_value.$orig.sku_id)?'selected':'',(item_value.$orig['disabled']||!item_value.$orig['selected']&&disabled)?'disabled':'']}}" bindtap="__e"><block wx:if="{{item_value.$orig.image}}"><image src="{{item_value.g13}}" data-event-opts="{{[['error',[['valueImageError',[index,index_value]]]]]}}" binderror="__e"></image></block><text>{{item_value.$orig.spec_value_name}}</text></view></block></view></block><view class="number-wrap"><view class="number-line"><text class="title font-size-base">购买数量</text><block wx:if="{{limitNumber>0}}"><text class="limit-txt color-base-text">{{"(每人限购"+limitNumber+goodsDetail.unit+")"}}</text></block><block wx:if="{{maxBuy>0&&minBuy>1}}"><text class="limit-txt color-base-text">{{'('+minBuy+goodsDetail.unit+"起售，限购"+maxBuy+goodsDetail.unit+')'}}</text></block><block wx:else><block wx:if="{{maxBuy>0}}"><text class="limit-txt color-base-text">{{"(限购"+maxBuy+goodsDetail.unit+")"}}</text></block><block wx:else><block wx:if="{{minBuy>1}}"><text class="limit-txt color-base-text">{{"("+minBuy+goodsDetail.unit+"起售)"}}</text></block></block></block><view class="number"><button class="{{['decrease','color-line-border',(decreaseDisabled)?'disabled':'']}}" type="default" data-event-opts="{{[['tap',[['changeNum',['-']]]]]}}" bindtap="__e">-</button><input class="uni-input color-line-border font-size-goods-tag" type="number" placeholder="0" data-event-opts="{{[['blur',[['blur',['$event']]]],['input',[['__set_model',['','number','$event',[]]],['keyInput',[false]]]]]}}" value="{{number}}" bindblur="__e" bindinput="__e"/><button class="{{['increase','color-line-border',(increaseDisabled)?'disabled':'']}}" type="default" data-event-opts="{{[['tap',[['changeNum',['+']]]]]}}" bindtap="__e">+</button></view></view></view></scroll-view></view><view data-event-opts="{{[['tap',[['confirm']]]]}}" class="footer" bindtap="__e"><block wx:if="{{goodsDetail.stock&&goodsDetail.stock!=0&&type=='join_cart'}}"><button type="primary">加入购物车</button></block><block wx:else><block wx:if="{{goodsDetail.stock&&goodsDetail.stock!=0&&type=='buy_now'}}"><button type="primary">立即购买</button></block><block wx:else><block wx:if="{{goodsDetail.stock&&goodsDetail.stock!=0&&type=='confirm'}}"><button type="primary">确认</button></block><block wx:else><block wx:if="{{goodsDetail.stock&&goodsDetail.stock!=0}}"><block wx:if="{{goodsDetail.buy_num}}"><block wx:if="{{goodsDetail.buy_num<=goodsDetail.stock}}"><button type="primary">立即抢购</button></block><block wx:else><button type="primary" disabled="true">库存不足</button></block></block><block wx:else><button type="primary">立即抢购</button></block></block><block wx:else><button type="primary" disabled="true">库存不足</button></block></block></block></block></view></view></uni-popup><ns-login class="vue-ref" vue-id="18423b42-2" data-ref="login" bind:__l="__l"></ns-login></view>