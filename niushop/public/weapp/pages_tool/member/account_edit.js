(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_tool/member/account_edit"],{256:function(e,t,a){"use strict";(function(e){a(5);n(a(4));var t=n(a(257));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=a,e(t.default)}).call(this,a(1)["createPage"])},257:function(e,t,a){"use strict";a.r(t);var n=a(258),r=a(260);for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a(263);var o,c=a(14),s=Object(c["default"])(r["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],o);s.options.__file="pages_tool/member/account_edit.vue",t["default"]=s.exports},258:function(e,t,a){"use strict";a.r(t);var n=a(259);a.d(t,"render",(function(){return n["render"]})),a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),a.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),a.d(t,"components",(function(){return n["components"]}))},259:function(e,t,a){"use strict";var n;a.r(t),a.d(t,"render",(function(){return r})),a.d(t,"staticRenderFns",(function(){return o})),a.d(t,"recyclableRender",(function(){return i})),a.d(t,"components",(function(){return n}));try{n={loadingCover:function(){return a.e("components/loading-cover/loading-cover").then(a.bind(null,714))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,a=(e._self._c,e.$lang("name")),n=e.$lang("mobilePhone"),r=e.$lang("accountType"),i=e.$lang("save");e.$mp.data=Object.assign({},{$root:{m0:a,m1:n,m2:r,m3:i}})},i=!1,o=[];r._withStripped=!0},260:function(e,t,a){"use strict";a.r(t);var n=a(261),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},261:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(262));function r(e){return e&&e.__esModule?e:{default:e}}var i={data:function(){return{formData:{realname:"",mobile:"",withdraw_type:"",bank_account:"",branch_bank_name:""},payList:[],index:0,flag:!1,transferType:[],accountInfo:null,back:""}},onLoad:function(e){e.id&&(this.formData.id=e.id),e.back&&(this.back=e.back)},onShow:function(){this.formData.id?this.getAccountDetail(this.formData.id):this.getTransferType(),this.formData.id?e.setNavigationBarTitle({title:"编辑账户"}):e.setNavigationBarTitle({title:"新增账户"})},methods:{getAccountDetail:function(e){var t=this;this.$api.sendRequest({url:"/api/memberbankaccount/info",data:{id:this.formData.id},success:function(e){0==e.code&&e.data&&(t.accountInfo=e.data,t.formData.realname=e.data.realname,t.formData.mobile=e.data.mobile,t.formData.bank_account=e.data.bank_account,t.formData.branch_bank_name=e.data.branch_bank_name,t.formData.withdraw_type=e.data.withdraw_type),t.getTransferType(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(e){t.getTransferType(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},getTransferType:function(){var e=this;this.payList=[],this.$api.sendRequest({url:"/api/memberwithdraw/transferType",success:function(t){if(t.code>=0&&t.data){for(var a in e.transferType=t.data,e.transferType)e.payList.push(e.transferType[a]);if(1==e.payList.length&&"银行卡"==e.payList[0]&&(e.formData.withdraw_type="bank"),e.payList.reverse(),!e.formData.id&&e.$refs.loadingCover&&e.$refs.loadingCover.hide(),e.accountInfo&&-1==e.$util.inArray(e.accountInfo.withdraw_type_name,e.payList)&&e.payList.push(e.accountInfo.withdraw_type_name),e.payList.length&&e.accountInfo&&(e.index=e.$util.inArray(e.accountInfo.withdraw_type_name,e.payList)),!e.formData.withdraw_type&&e.payList.length)switch(e.payList[0]){case"银行卡":e.formData.withdraw_type="bank";break;case"支付宝":e.formData.withdraw_type="alipay";break;case"微信零钱":e.formData.withdraw_type="wechatpay";break}}}})},bindPickerChange:function(e){this.index=e.detail.value;var t="";for(var a in this.transferType)this.transferType[a]==this.payList[this.index]&&(t=a);""!=t&&(this.formData.withdraw_type=t)},vertify:function(){var e=[{name:"realname",checkType:"required",errorMsg:"请输入姓名"},{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"withdraw_type",checkType:"required",errorMsg:"请选择账户类型"}];"bank"==this.formData.withdraw_type&&e.push({name:"branch_bank_name",checkType:"required",errorMsg:"请输入银行名称"}),"wechatpay"!=this.formData.withdraw_type&&e.push({name:"bank_account",checkType:"required",errorMsg:"请输入提现账号"});var t=n.default.check(this.formData,e);return!!t||(this.$util.showToast({title:n.default.error}),this.flag=!1,!1)},saveAccount:function(){var e=this;if(!this.flag&&(this.flag=!0,this.vertify())){var t=this.formData.id?"edit":"add";this.$api.sendRequest({url:"/api/memberbankaccount/"+t,data:{id:this.formData.id,realname:this.formData.realname,mobile:this.formData.mobile,withdraw_type:this.formData.withdraw_type,bank_account:this.formData.bank_account,branch_bank_name:this.formData.branch_bank_name},success:function(t){0==t.code?(e.formData.id?e.$util.showToast({title:"修改成功"}):e.$util.showToast({title:"添加成功"}),""!=e.back?e.$util.redirectTo(e.back,{},e.redirect):e.$util.redirectTo("/pages_tool/member/account")):(e.flag=!1,e.$util.showToast({title:t.message}))},fail:function(t){e.flag=!1}})}}}};t.default=i}).call(this,a(1)["default"])},263:function(e,t,a){"use strict";a.r(t);var n=a(264),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},264:function(e,t,a){}},[[256,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages_tool/member/account_edit.js.map